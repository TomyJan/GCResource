[
  //************************************************************************************************//
  ///  全局索引：
  ///  Avatar_Itto_ExtraAttack                普攻、普通重击、特殊重击触发逻辑
  ///  Avatar_Itto_SpecialExtra_Damage        特殊重击循环攻击的伤害判定（普通状态）
  ///  Avatar_Itto_SpecialExtra_Damage_Ghost  特殊重击循环攻击的伤害判定（鬼人状态）
  ///  Avatar_Itto_Symbol_Handler             特殊印记的逻辑管理
  ///  Avatar_Itto_ExtraAttack_Mask           鬼脸面具的美术表现管理
  ///  Avatar_Itto_ElementalArt               元素战技打拳逻辑
  ///  Avatar_Itto_ElementalArt_CreateGadget  一斗创生牛子的Trigger
  ///  Avatar_Itto_Gadget_OniBull_Bullet      牛子发射器
  ///  Avatar_Itto_Gadget_OniBull             牛子创生物本体
  ///  Avatar_Itto_ElementalBurst             充能技逻辑管理（无敌、镜头、Buff等）
  ///  Avatar_Itto_ElementalBurst_ChangeWeapon 处理鬼人状态下替换狼牙棒
  ///  Avatar_Itto_FallingAnthem              下落攻击
  ///  Avatar_Itto_Attack_DamageHandler       普攻、重击伤害逻辑控制
  ///  Avatar_Itto_PermanentSkill_1           突破1，特殊重击带霸体，特殊重击越打越快
  ///  Avatar_Itto_PermanentSkill_2           突破2，特殊重击伤害提升，数值基于自身防御力
  ///  Avatar_Itto_Constellation_1            释放大招瞬间印记瞬间回复2层，此后间隔2秒回复一层，总共回复3次
  ///  Avatar_Itto_Constellation_2            释放元素爆发后，基于队内岩元素角色数量减少自身大招冷却
  ///  Avatar_Itto_Constellation_4            元素爆发状态下，对生命百分比低于自身的敌方目标的暴击率提升
  ///  Avatar_Itto_Constellation_6            节能施法
  //************************************************************************************************//

  //////////////////////////////////////////////////////////////////////////////
  //
  //  普攻和重击
  //
  ////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_ExtraAttack",
      "onAdded": [
        {
          "$type": "SetGlobalValue",
          "key": "_ABILITY_Itto_Constellation_SavingState", //最后一击节能状态判定，0:未开启节能判定 1:节能 2:不节能
          "value": 0
        }
      ],
      "abilityMixins": [
        {
          "$type": "ButtonHoldChargeMixin",
          "skillID": 10571,
          "chargeTime": 0.12,
          "secondChargeTime": 0.08, //这个是临界值 否则容易误触
          "OnBeginUncharged": [
            {
              "$type": "SetAnimatorTrigger",
              "triggerID": "DoSkill"
            },
            {
              "$type": "SetAnimatorInt",
              "intID": "SkillID",
              "value": 1
            },
            {
              "$type": "SetAnimatorBool",
              "boolID": "IsCharging",
              "value": false
            },

            //Button按下时的初始化清零行为
            {
              "$type": "RemoveModifier",
              "modifierName": "Avatar_Itto_ExtraHoldCharging",
              "doOffStage": true
            },
            {
              "$type": "RemoveModifier",
              "modifierName": "Avatar_Itto_ExtraAttackTrigger_HighTickFrequency",
              "doOffStage": true
            },

            //------------------点按判定----------------//
            //特殊重击循环过程
            {
              "$type": "SetAnimatorTrigger",
              "triggerID": "PRIVATE_DoSpecialExtra",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 1,
                  "compareType": "MoreThan"
                }
              ]
            },
            //节能状态初始化（仅当最后一层的时候才会执行，否则存在过度滥用）
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Constellation_SavingState",
              "value": 0,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 1,
                  "compareType": "MoreThan"
                }
              ]
            },
            //特殊重击最后一段判定与消耗
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByUnlockTalentParam",
                  "talentParam": "Itto_Constellation_6"
                }
              ],
              //非6命状态
              "failActions": [
                {
                  "$type": "SetAnimatorTrigger",
                  "triggerID": "PRIVATE_DoLastSpecialExtra", //特殊重击最后一段
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "_ABILITY_Itto_Symbol",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ]
                }
              ],
              //6命状态
              "successActions": [
                {
                  "$type": "Predicated",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "_ABILITY_Itto_Symbol",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ],
                  "successActions": [
                    {
                      "$type": "ResetAnimatorTrigger",
                      "triggerID": "PRIVATE_DoSpecialExtra"
                    },
                    {
                      "$type": "ResetAnimatorTrigger",
                      "triggerID": "PRIVATE_DoLastSpecialExtra" //每次按下去都会先清理下老Trigger
                    },
                    //上面某种程度是每次按键的初始化
                    {
                      "$type": "Randomed",
                      "chance": "%Cost_Ratio",
                      //节能成功（该次必不消耗印记播放循环combo）
                      "successActions": [
                        {
                          "$type": "SetGlobalValue",
                          "key": "_ABILITY_Itto_Constellation_SavingState",
                          "value": 1
                        },
                        {
                          "$type": "SetAnimatorTrigger",
                          "triggerID": "PRIVATE_DoSpecialExtra"
                        }
                      ],
                      //节能失败（该次必消耗印记播放最后一击）
                      "failActions": [
                        {
                          "$type": "SetGlobalValue",
                          "key": "_ABILITY_Itto_Constellation_SavingState",
                          "value": 2
                        },
                        {
                          "$type": "SetAnimatorTrigger",
                          "triggerID": "PRIVATE_DoLastSpecialExtra"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "OnReleaseUncharged": [
            {
              "$type": "RemoveModifier",
              "modifierName": "Avatar_Itto_ExtraHoldCharging", //保护性操作
              "doOffStage": true
            }
          ],
          "OnBeginCharged": [
            {
              "$type": "SetAnimatorBool",
              "boolID": "IsCharging",
              "value": true
            }
          ],
          "OnReleaseCharged": [
            {
              "$type": "SetAnimatorBool",
              "boolID": "IsCharging",
              "value": false
            },
            {
              "$type": "SetAnimatorInt",
              "intID": "SkillID",
              "value": 1
            },
            {
              "$type": "RemoveModifier",
              "modifierName": "Avatar_Itto_ExtraHoldCharging", //保护性操作
              "doOffStage": true
            }
          ],
          //真正的蓄力进入判定点 chargeTime+secondChargeTime
          "OnBeginSecondCharged": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Symbol_IsCharged",
              "value": 1
            },
            {
              "$type": "SetAnimatorBool",
              "boolID": "IsCharging",
              "value": false
            },
            {
              "$type": "AttachModifier",
              "modifierName": "Avatar_Itto_ExtraHoldCharging",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 0,
                  "compareType": "MoreThan"
                }
              ]
            },
            {
              "$type": "AttachModifier",
              "modifierName": "Avatar_Itto_ExtraAttackTrigger_HighTickFrequency"
            }
          ],
          "OnReleaseSecondCharged": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Symbol_IsCharged",
              "value": 0
            },
            {
              "$type": "RemoveModifier",
              "modifierName": "Avatar_Itto_ExtraAttackTrigger_HighTickFrequency",
              "doOffStage": true
            },
            {
              "$type": "RemoveModifier",
              "modifierName": "Avatar_Itto_ExtraHoldCharging",
              "doOffStage": true
            }
          ],
          "chargeStateIDs": [
            "Attack01_BS",
            "Attack01",
            "Attack02",
            "Attack03",
            "Attack04",
            "Run",
            "ExtraAttack",
            "ExtraAttack1_BS",
            "ExtraAttack1",
            "ExtraAttack2",
            "Extraattack3"
          ]
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": [
            "ExtraAttack",
            "ExtraAttack1",
            "ExtraAttack2",
            "ExtraAttack3"
          ],
          "modifierName": "ExtraAttack_ClearTickTrigger"
        },
        {
          "$type": "AttachToNormalizedTimeMixin",
          "modifierName": "ExtraAttack1_DoLastExtra",
          "stateID": "ExtraAttack1_BS",
          "normalizeStart": 0.5,
          "normalizeEnd": 1.0
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["ExtraAttack"],
          "modifierName": "ExtraAttack_StaminaCost"
        },
        {
          "$type": "AttachToNormalizedTimeMixin",
          "stateID": "Attack04",
          "modifierName": "NormalAttack_04_Effect",
          "normalizeStart": 0.024,
          "normalizeEnd": 1.0
        },
        // {
        //     "$type": "AttachToStateIDMixin",
        //     "stateIDs": ["ExtraAttack1_BS"],
        //     "modifierName": "ExtraAttack_TurnDir_BS",
        // },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["ExtraAttack1"],
          "modifierName": "ExtraAttack_TurnDir_01"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["ExtraAttack2"],
          "modifierName": "ExtraAttack_TurnDir_02"
        },
        {
          "$type": "AttachToNormalizedTimeMixin",
          "stateID": "ExtraAttack1",
          "modifierName": "ExtraAttack_TurnDir_Remover",
          "normalizeStart": 0.1,
          "normalizeEnd": 1.0
        },
        {
          "$type": "AttachToNormalizedTimeMixin",
          "stateID": "ExtraAttack2",
          "modifierName": "ExtraAttack_TurnDir_Remover",
          "normalizeStart": 0.1,
          "normalizeEnd": 1.0
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["SprintBS", "Sprint"],
          "modifierName": "NormalAttack_SprintCancle_SaveCombo"
        }
      ],
      "modifiers": {
        //高频Tick刷新自身印记数（防止触发特殊重击与自身印记数不符）
        "Avatar_Itto_ExtraAttackTrigger_HighTickFrequency": {
          "duration": 5.0, //保底时间
          "thinkInterval": 0.03,
          "onThinkInterval": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 0,
                  "compareType": "MoreThan"
                }
              ],
              //有印记释放特殊重击
              "successActions": [
                {
                  "$type": "SetAnimatorTrigger",
                  "triggerID": "DoSkill"
                },
                {
                  "$type": "SetAnimatorInt",
                  "intID": "SkillID",
                  "value": 7
                }
              ],
              //无印记释放普通重击（消耗体力）
              "failActions": [
                {
                  "$type": "SetAnimatorTrigger",
                  "triggerID": "DoSkill",
                  "predicates": [
                    {
                      "$type": "ByLocalAvatarStamina",
                      "stamina": "%ExtraAttack_Claymore_Stamina_Cost+%Flexible_Stamina",
                      "logic": "GreaterOrEqual"
                    }
                  ]
                },
                {
                  "$type": "SetAnimatorInt",
                  "intID": "SkillID",
                  "value": 6,
                  "predicates": [
                    {
                      "$type": "ByLocalAvatarStamina",
                      "stamina": "%ExtraAttack_Claymore_Stamina_Cost+%Flexible_Stamina",
                      "logic": "GreaterOrEqual"
                    }
                  ]
                }
              ]
            }
          ],
          "modifierMixins": [
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack1_BS",
              "modifierName": "ExtraAttack_DelayHold",
              "normalizeStart": 0.0,
              "normalizeEnd": 0.9
            }
          ]
        },
        //用于保留长按蓄力 (这个modifier有点危险，最好是有个保护)
        "ExtraAttack_DelayHold": {
          "onRemoved": [
            {
              "$type": "ApplyModifier",
              "modifierName": "Avatar_Itto_ExtraHoldCharging",
              "doOffStage": true,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Symbol_IsCharged", //要保证是按住状态下才会上modifier
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            }
          ]
        },
        //进入指定动作State后会清楚长按的高频TickModifier
        "ExtraAttack_ClearTickTrigger": {
          "onAdded": [
            {
              "$type": "RemoveModifier",
              "modifierName": "Avatar_Itto_ExtraAttackTrigger_HighTickFrequency"
            }
          ]
        },
        //长按特殊重击Bool控制
        "Avatar_Itto_ExtraHoldCharging": {
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "SetAnimatorBool",
              "boolID": "PRIVATE_ExtraCharging",
              "value": true
            }
          ],
          "onRemoved": [
            {
              "$type": "SetAnimatorBool",
              "boolID": "PRIVATE_ExtraCharging",
              "value": false,
              "doOffStage": true
            }
          ],
          "modifierMixins": [
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack1",
              "modifierName": "ExtraAttack_TransitionState_01",
              "normalizeStart": 0.09,
              "normalizeEnd": 0.5
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack2",
              "modifierName": "ExtraAttack_TransitionState_02",
              "normalizeStart": 0.09,
              "normalizeEnd": 0.5
            }
          ]
        },
        //计算长按时的衔接state
        "ExtraAttack_TransitionState_01": {
          "onAdded": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 1,
                  "compareType": "MoreThan"
                }
              ],
              //循环攻击
              "successActions": [
                {
                  "$type": "SetGlobalValue",
                  "key": "_ABILITY_Itto_Constellation_SavingState",
                  "value": 0
                }
              ],
              //最后一击判定
              "failActions": [
                {
                  "$type": "Predicated",
                  "targetPredicates": [
                    {
                      "$type": "ByUnlockTalentParam",
                      "talentParam": "Itto_Constellation_6"
                    }
                  ],
                  //非6命状态
                  "failActions": [
                    {
                      "$type": "SetAnimatorTrigger",
                      "triggerID": "PRIVATE_ExtraEndCharging" //特殊重击最后一段
                    },
                    {
                      "$type": "RemoveModifier",
                      "modifierName": "Avatar_Itto_ExtraHoldCharging"
                    }
                  ],
                  //6命状态
                  "successActions": [
                    {
                      "$type": "Randomed",
                      "chance": "%Cost_Ratio",
                      //节能成功（该次必不消耗印记播放循环combo）
                      "successActions": [
                        {
                          "$type": "SetGlobalValue",
                          "key": "_ABILITY_Itto_Constellation_SavingState",
                          "value": 1
                        }
                      ],
                      //节能失败（该次必消耗印记播放最后一击）
                      "failActions": [
                        {
                          "$type": "SetGlobalValue",
                          "key": "_ABILITY_Itto_Constellation_SavingState",
                          "value": 2
                        },
                        {
                          "$type": "SetAnimatorTrigger",
                          "triggerID": "PRIVATE_ExtraEndCharging" //特殊重击最后一段
                        },
                        {
                          "$type": "RemoveModifier",
                          "modifierName": "Avatar_Itto_ExtraHoldCharging"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        //计算长按时的衔接state
        "ExtraAttack_TransitionState_02": {
          "onAdded": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 1,
                  "compareType": "MoreThan"
                }
              ],
              //循环攻击
              "successActions": [
                {
                  "$type": "SetGlobalValue",
                  "key": "_ABILITY_Itto_Constellation_SavingState",
                  "value": 0
                }
              ],
              //最后一击判定
              "failActions": [
                {
                  "$type": "Predicated",
                  "targetPredicates": [
                    {
                      "$type": "ByUnlockTalentParam",
                      "talentParam": "Itto_Constellation_6"
                    }
                  ],
                  //非6命状态
                  "failActions": [
                    {
                      "$type": "SetAnimatorTrigger",
                      "triggerID": "PRIVATE_ExtraEndCharging" //特殊重击最后一段
                    },
                    {
                      "$type": "RemoveModifier",
                      "modifierName": "Avatar_Itto_ExtraHoldCharging"
                    }
                  ],
                  //6命状态
                  "successActions": [
                    {
                      "$type": "Randomed",
                      "chance": "%Cost_Ratio",
                      //节能成功（该次必不消耗印记播放循环combo）
                      "successActions": [
                        {
                          "$type": "SetGlobalValue",
                          "key": "_ABILITY_Itto_Constellation_SavingState",
                          "value": 1
                        }
                      ],
                      //节能失败（该次必消耗印记播放最后一击）
                      "failActions": [
                        {
                          "$type": "SetGlobalValue",
                          "key": "_ABILITY_Itto_Constellation_SavingState",
                          "value": 2
                        },
                        {
                          "$type": "SetAnimatorTrigger",
                          "triggerID": "PRIVATE_ExtraEndCharging" //特殊重击最后一段
                        },
                        {
                          "$type": "RemoveModifier",
                          "modifierName": "Avatar_Itto_ExtraHoldCharging"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        "Blank": {},
        //进入特殊重击BS时根据当前印记数量决定是否使出最终一击
        "ExtraAttack1_DoLastExtra": {
          "duration": 0.2,
          "onAdded": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByUnlockTalentParam",
                  "talentParam": "Itto_Constellation_6"
                }
              ],
              //非6命状态
              "failActions": [
                {
                  "$type": "SetAnimatorTrigger",
                  "triggerID": "PRIVATE_DoLastSpecialExtra", //特殊重击最后一段
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "_ABILITY_Itto_Symbol",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ]
                }
              ],
              //6命状态
              "successActions": [
                {
                  "$type": "Predicated",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "_ABILITY_Itto_Symbol",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ],
                  "successActions": [
                    {
                      "$type": "Randomed",
                      "chance": "%Cost_Ratio",
                      //节能成功（该次必不消耗印记播放循环combo）
                      "successActions": [
                        {
                          "$type": "SetGlobalValue",
                          "key": "_ABILITY_Itto_Constellation_SavingState",
                          "value": 1
                        }
                      ],
                      //节能失败（该次必消耗印记播放最后一击）
                      "failActions": [
                        {
                          "$type": "SetGlobalValue",
                          "key": "_ABILITY_Itto_Constellation_SavingState",
                          "value": 2
                        },
                        {
                          "$type": "SetAnimatorTrigger",
                          "triggerID": "PRIVATE_DoLastSpecialExtra"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        //普通重击消耗体力
        "ExtraAttack_StaminaCost": {
          "duration": 0.2,
          "onAdded": [
            {
              "$type": "AvatarSkillStart",
              "skillID": 10004,
              "costStaminaRatio": "%ExtraAttack_Claymore_Stamina_Cost"
            }
          ]
        },
        //普攻第四击踢刀特效
        "NormalAttack_04_Effect": {
          "onAdded": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Attack_04_Cast"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Attack_04_Weapon",
              "otherTargets": {
                "$type": "SelectTargetsByEquipParts",
                "equipPartNames": ["equip01", "equip02", "sheathPoint"]
              }
            }
          ]
        },
        //重击BS冲击阶段可调整方向
        "ExtraAttack_TurnDir_BS": {
          "modifierMixins": [
            {
              "$type": "AvatarSteerByCameraMixin",
              "stateIDs": ["ExtraAttack1_BS"],
              "angularSpeed": 600,
              "canReviveStamina": true
            }
          ]
        },
        //重击前摇动作中方便玩家调整方向
        "ExtraAttack_TurnDir_01": {
          "modifierMixins": [
            {
              "$type": "AvatarSteerByCameraMixin",
              "stateIDs": ["ExtraAttack1", "ExtraAttack2"],
              "angularSpeed": 1800,
              "canReviveStamina": true
            }
          ]
        },
        //重击前摇动作中方便玩家调整方向
        "ExtraAttack_TurnDir_02": {
          "modifierMixins": [
            {
              "$type": "AvatarSteerByCameraMixin",
              "stateIDs": ["ExtraAttack1", "ExtraAttack2"],
              "angularSpeed": 1800,
              "canReviveStamina": true
            }
          ]
        },
        //到达指定时间移除转向效果
        "ExtraAttack_TurnDir_Remover": {
          "onAdded": [
            {
              "$type": "RemoveModifier",
              "modifierName": "ExtraAttack_TurnDir_01"
            },
            {
              "$type": "RemoveModifier",
              "modifierName": "ExtraAttack_TurnDir_02"
            }
          ]
        },
        //冲刺打断普攻保留普攻Combo段数
        "NormalAttack_SprintCancle_SaveCombo": {
          "duration": 0.5, //保留短时的combo连段
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_NormalAttack_Combo",
              "value": 1,
              "predicates": [
                {
                  "$type": "ByAnimatorInt",
                  "value": 1,
                  "parameter": "ComboCount",
                  "logic": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_NormalAttack_Combo",
              "value": 2,
              "predicates": [
                {
                  "$type": "ByAnimatorInt",
                  "value": 2,
                  "parameter": "ComboCount",
                  "logic": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_NormalAttack_Combo",
              "value": 3,
              "predicates": [
                {
                  "$type": "ByAnimatorInt",
                  "value": 3,
                  "parameter": "ComboCount",
                  "logic": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_NormalAttack_Combo",
              "value": 0,
              "predicates": [
                {
                  "$type": "ByAnimatorInt",
                  "value": 4,
                  "parameter": "ComboCount",
                  "logic": "GreaterOrEqual"
                }
              ]
            },
            {
              "$type": "SetGlobalValueToOverrideMap",
              "globalValueKey": "_ABILITY_Itto_NormalAttack_Combo",
              "overrideMapKey": "Combo_Count"
            }
          ],
          "thinkInterval": 0.1,
          //需要间隔Tick设一下Int值，否则会被Eventpattern里清掉
          "onThinkInterval": [
            {
              "$type": "SetAnimatorInt",
              "intID": "ComboCount",
              "value": "%Combo_Count"
            }
          ],
          "onRemoved": [
            {
              "$type": "SetAnimatorInt",
              "intID": "ComboCount",
              "value": 0
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_NormalAttack_Combo",
              "value": 0
            }
          ]
        }
      },
      "abilitySpecials": {
        "Combo_Count": 0,

        "ExtraAttack_Claymore_Stamina_Cost": 0,
        "Flexible_Stamina": -2, //照顾延迟放宽一些判定条件

        "Cost_Ratio": 0 //节能施法概率（不消耗印记）
      }
    }
  },

  //普通状态下的特殊重击攻击判定
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_SpecialExtra_Damage",
      //EventPattern触发
      "onAbilityStart": [
        {
          "$type": "Predicated",
          //控制第一次攻击为挑飞
          "targetPredicates": [
            {
              "$type": "ByAny",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_SpecialExtra_Combo",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            }
          ],
          //特殊重击第一击
          "successActions": [
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackBox",
                  "triggerType": "TriggerNoRepeat",
                  "size": {
                    "x": 3.8,
                    "y": 4.0,
                    "z": 5.5
                  },
                  "born": {
                    "$type": "ConfigBornBySelf",
                    "offset": {
                      "x": 0.0,
                      "y": 1.4,
                      "z": -2.0
                    }
                  }
                },
                "attackInfo": {
                  "attackTag": "ExtraAttack",
                  "attenuationTag": "NormalAttack",
                  "attackProperty": {
                    "damagePercentage": "%ExtraAttack_Loop_DamagePercentage",
                    "strikeType": "Blunt",
                    "elementDurability": 25,
                    "enBreak": 143.4, //确保挑飞攻击Enbreak大一些
                    "overrideByWeapon": true,
                    "attackType": "Melee"
                  },
                  "hitPattern": {
                    "onHitEffectName": "default",
                    "hitImpulseType": "LV4",
                    "overrideHitImpulse": {
                      "hitLevel": "Heavy",
                      "hitImpulseX": 250,
                      "hitImpulseY": 0
                    },
                    "retreatType": "ByAttackerForward",
                    "reboundRatio": 0,
                    "canBeDefenceHalt": true,
                    "hitHaltTime": 0.07,
                    "hitHaltTimeScale": 0.01,
                    "muteHitText": false
                  },
                  "forceCameraShake": false,
                  "cameraShake": {
                    "shakeType": "CustomVector",
                    "shakeRange": 0.36,
                    "shakeTime": 0.12,
                    "shakeDistance": 30,
                    "shakeDir": {
                      "x": 1,
                      "y": 0,
                      "z": 0
                    }
                  }
                }
              }
            }
          ],
          "failActions": [
            //特殊重击第二击
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackBox",
                  "triggerType": "TriggerNoRepeat",
                  "size": {
                    "x": 3.8,
                    "y": 4.0,
                    "z": 5.5
                  },
                  "born": {
                    "$type": "ConfigBornBySelf",
                    "offset": {
                      "x": 0.0,
                      "y": 1.4,
                      "z": -2.0
                    }
                  }
                },
                "attackInfo": {
                  "attackTag": "ExtraAttack",
                  "attenuationTag": "NormalAttack",
                  "attackProperty": {
                    "damagePercentage": "%ExtraAttack_Loop_DamagePercentage",
                    "strikeType": "Blunt",
                    "elementDurability": 25,
                    "enBreak": 81.7,
                    "overrideByWeapon": true,
                    "attackType": "Melee"
                  },
                  "hitPattern": {
                    "onHitEffectName": "default",
                    "hitImpulseType": "LV4",
                    "overrideHitImpulse": {
                      "hitLevel": "Heavy",
                      "hitImpulseX": 250,
                      "hitImpulseY": 0 //适当把Y减为0 防止越打越高
                    },
                    "retreatType": "ByAttackerForward",
                    "reboundRatio": 0,
                    "canBeDefenceHalt": true,
                    "hitHaltTime": 0.05,
                    "hitHaltTimeScale": 0.01,
                    "muteHitText": false
                  },
                  "forceCameraShake": false,
                  "cameraShake": {
                    "shakeType": "CustomVector",
                    "shakeRange": 0.36,
                    "shakeTime": 0.12,
                    "shakeDistance": 30,
                    "shakeDir": {
                      "x": 0,
                      "y": -1,
                      "z": 0
                    }
                  }
                }
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_SpecialExtra_Combo",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            },
            //特殊重击第三击及以上循环攻击
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackBox",
                  "triggerType": "TriggerNoRepeat",
                  "size": {
                    "x": 3.8,
                    "y": 4.0,
                    "z": 5.5
                  },
                  "born": {
                    "$type": "ConfigBornBySelf",
                    "offset": {
                      "x": 0.0,
                      "y": 1.4,
                      "z": -2.0
                    }
                  }
                },
                "attackInfo": {
                  "attackTag": "ExtraAttack",
                  "attenuationTag": "NormalAttack",
                  "attackProperty": {
                    "damagePercentage": "%ExtraAttack_Loop_DamagePercentage",
                    "strikeType": "Blunt",
                    "elementDurability": 25,
                    "enBreak": 81.7,
                    "overrideByWeapon": true,
                    "attackType": "Melee"
                  },
                  "hitPattern": {
                    "onHitEffectName": "default",
                    "hitImpulseType": "LV4",
                    "overrideHitImpulse": {
                      "hitLevel": "Heavy",
                      "hitImpulseX": 250,
                      "hitImpulseY": 0 //适当把Y减为0 防止越打越高
                    },
                    "retreatType": "ByAttackerForward",
                    "reboundRatio": 0,
                    "canBeDefenceHalt": true,
                    "hitHaltTime": 0.03,
                    "hitHaltTimeScale": 0.01,
                    "muteHitText": false
                  },
                  "forceCameraShake": false,
                  "cameraShake": {
                    "shakeType": "CustomVector",
                    "shakeRange": 0.36,
                    "shakeTime": 0.12,
                    "shakeDistance": 30,
                    "shakeDir": {
                      "x": 0,
                      "y": -1,
                      "z": 0
                    }
                  }
                }
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_SpecialExtra_Combo",
                  "value": 2,
                  "compareType": "MoreThan"
                }
              ]
            }
          ]
        }
      ],
      "abilitySpecials": {
        "ExtraAttack_Loop_DamagePercentage": 0
      }
    }
  },

  //鬼人状态下的特殊重击攻击判定
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_SpecialExtra_Damage_Ghost",
      //EventPattern触发
      "onAbilityStart": [
        {
          "$type": "Predicated",
          //控制第一次攻击为挑飞
          "targetPredicates": [
            {
              "$type": "ByAny",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_SpecialExtra_Combo",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            }
          ],
          //特殊重击第一击
          "successActions": [
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackBox",
                  "triggerType": "TriggerNoRepeat",
                  "size": {
                    "x": 5.0,
                    "y": 5.8,
                    "z": 7.0
                  },
                  "born": {
                    "$type": "ConfigBornBySelf",
                    "offset": {
                      "x": 0.0,
                      "y": 1.6,
                      "z": -2.5
                    }
                  }
                },
                "attackInfo": {
                  "attackTag": "ExtraAttack",
                  "attenuationTag": "NormalAttack",
                  "attackProperty": {
                    "damagePercentage": "%ExtraAttack_Loop_DamagePercentage",
                    "strikeType": "Blunt",
                    "elementType": "Rock",
                    "elementDurability": 25,
                    "enBreak": 143.4, //确保挑飞攻击Enbreak大一些
                    "overrideByWeapon": false,
                    "attackType": "Melee"
                  },
                  "hitPattern": {
                    "onHitEffectName": "default",
                    "hitImpulseType": "LV4",
                    "overrideHitImpulse": {
                      "hitLevel": "Heavy",
                      "hitImpulseX": 250,
                      "hitImpulseY": 0
                    },
                    "retreatType": "ByAttackerForward",
                    "reboundRatio": 0,
                    "canBeDefenceHalt": true,
                    "hitHaltTime": 0.07,
                    "hitHaltTimeScale": 0.01,
                    "muteHitText": false
                  },
                  "forceCameraShake": false,
                  "cameraShake": {
                    "shakeType": "CustomVector",
                    "shakeRange": 0.36,
                    "shakeTime": 0.12,
                    "shakeDistance": 30,
                    "shakeDir": {
                      "x": 1,
                      "y": 0,
                      "z": 0
                    }
                  }
                }
              }
            }
          ],
          "failActions": [
            //特殊重击第二击
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackBox",
                  "triggerType": "TriggerNoRepeat",
                  "size": {
                    "x": 5.0,
                    "y": 5.8,
                    "z": 7.0
                  },
                  "born": {
                    "$type": "ConfigBornBySelf",
                    "offset": {
                      "x": 0.0,
                      "y": 1.6,
                      "z": -2.5
                    }
                  }
                },
                "attackInfo": {
                  "attackTag": "ExtraAttack",
                  "attenuationTag": "NormalAttack",
                  "attackProperty": {
                    "damagePercentage": "%ExtraAttack_Loop_DamagePercentage",
                    "strikeType": "Blunt",
                    "elementType": "Rock",
                    "elementDurability": 25,
                    "enBreak": 81.7,
                    "overrideByWeapon": false,
                    "attackType": "Melee"
                  },
                  "hitPattern": {
                    "onHitEffectName": "default",
                    "hitImpulseType": "LV4",
                    "overrideHitImpulse": {
                      "hitLevel": "Heavy",
                      "hitImpulseX": 250,
                      "hitImpulseY": 0
                    },
                    "retreatType": "ByAttackerForward",
                    "reboundRatio": 0,
                    "canBeDefenceHalt": true,
                    "hitHaltTime": 0.05,
                    "hitHaltTimeScale": 0.01,
                    "muteHitText": false
                  },
                  "forceCameraShake": false,
                  "cameraShake": {
                    "shakeType": "CustomVector",
                    "shakeRange": 0.36,
                    "shakeTime": 0.12,
                    "shakeDistance": 30,
                    "shakeDir": {
                      "x": 0,
                      "y": -1,
                      "z": 0
                    }
                  }
                }
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_SpecialExtra_Combo",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            },
            //特殊重击第三击及以上循环攻击
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackBox",
                  "triggerType": "TriggerNoRepeat",
                  "size": {
                    "x": 5.0,
                    "y": 5.8,
                    "z": 7.0
                  },
                  "born": {
                    "$type": "ConfigBornBySelf",
                    "offset": {
                      "x": 0.0,
                      "y": 1.6,
                      "z": -2.5
                    }
                  }
                },
                "attackInfo": {
                  "attackTag": "ExtraAttack",
                  "attenuationTag": "NormalAttack",
                  "attackProperty": {
                    "damagePercentage": "%ExtraAttack_Loop_DamagePercentage",
                    "strikeType": "Blunt",
                    "elementType": "Rock",
                    "elementDurability": 25,
                    "enBreak": 81.7,
                    "overrideByWeapon": false,
                    "attackType": "Melee"
                  },
                  "hitPattern": {
                    "onHitEffectName": "default",
                    "hitImpulseType": "LV4",
                    "overrideHitImpulse": {
                      "hitLevel": "Heavy",
                      "hitImpulseX": 250,
                      "hitImpulseY": 0
                    },
                    "retreatType": "ByAttackerForward",
                    "reboundRatio": 0,
                    "canBeDefenceHalt": true,
                    "hitHaltTime": 0.03,
                    "hitHaltTimeScale": 0.01,
                    "muteHitText": false
                  },
                  "forceCameraShake": false,
                  "cameraShake": {
                    "shakeType": "CustomVector",
                    "shakeRange": 0.36,
                    "shakeTime": 0.12,
                    "shakeDistance": 30,
                    "shakeDir": {
                      "x": 0,
                      "y": -1,
                      "z": 0
                    }
                  }
                }
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_SpecialExtra_Combo",
                  "value": 2,
                  "compareType": "MoreThan"
                }
              ]
            }
          ]
        }
      ],
      "abilitySpecials": {
        "ExtraAttack_Loop_DamagePercentage": 0
      }
    }
  },

  ///////////////////////////////////////////////////////////////w
  //
  //  攻击印记管理中枢
  //
  ////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_Symbol_Handler",
      "onAdded": [
        {
          "$type": "AttachModifier",
          "modifierName": "Avatar_Itto_ComboAddSymbol_Handler"
        },

        {
          "$type": "AttachModifier",
          "modifierName": "Avatar_Itto_ElementalArtAddSymbol_Handler"
        },
        {
          "$type": "AttachModifier",
          "modifierName": "Avatar_Itto_SymbolEffect_Handler"
        },
        {
          "$type": "AttachModifier",
          "modifierName": "Avatar_Itto_Mask_Handler"
        }
      ],
      "abilityMixins": [
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["ExtraAttack1"],
          "modifierName": "Avatar_Itto_Calculate_ExtraCombo"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["ExtraAttack2"],
          "modifierName": "Avatar_Itto_Calculate_ExtraCombo"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["ExtraAttack3"],
          "modifierName": "Avatar_Itto_Calculate_ExtraCombo"
        },
        {
          "$type": "AttachToAnimatorStateIDMixin",
          "stateIDs": ["ExtraAttack1", "ExtraAttack2", "ExtraAttack3"],
          "modifierName": "Avatar_Itto_Calculate_ClearExtraCombo"
        },
        {
          "$type": "AttachToNormalizedTimeMixin",
          "stateID": "ExtraAttack1_BS",
          "normalizeStart": 0.0,
          "normalizeEnd": 1.0,
          "modifierName": "Avatar_Itto_SpecialExtra_TipEffect"
        }
      ],
      "modifiers": {
        //普通攻击增添印记
        "Avatar_Itto_ComboAddSymbol_Handler": {
          "onAttackLanded": [
            {
              "$type": "Predicated", //第二击增添1枚
              "target": "Target",
              "targetPredicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": ["NormalAttack_02"]
                },
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ANIMAL_ENTITY_TYPE",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ],
              "successActions": [
                {
                  "$type": "ApplyModifier",
                  "modifierName": "Avatar_Itto_2ndNormalAttack_AddSymbol",
                  "target": "Self"
                }
              ]
            },
            {
              "$type": "Predicated", //第四击增添2枚
              "target": "Target",
              "targetPredicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": ["NormalAttack_04"]
                },
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ANIMAL_ENTITY_TYPE",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ],
              "successActions": [
                {
                  "$type": "ApplyModifier",
                  "modifierName": "Avatar_Itto_LastNormalAttack_AddSymbol",
                  "target": "Self"
                }
              ]
            },
            {
              "$type": "Predicated", //大招状态第一击、第三击各增添1枚
              "target": "Target",
              "targetPredicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": ["NormalAttack_01", "NormalAttack_03"]
                },
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ANIMAL_ENTITY_TYPE",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_ElementalBurst_Flag",
                  "value": 1,
                  "compareType": "Equal",
                  "target": "Self"
                }
              ],
              "successActions": [
                {
                  "$type": "ApplyModifier",
                  "modifierName": "Avatar_Itto_ForeNormalAttack_AddSymbol",
                  "target": "Self"
                }
              ]
            }
          ]
        },
        //普攻第二击增添1枚印记
        "Avatar_Itto_2ndNormalAttack_AddSymbol": {
          "duration": 0.1,
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_Itto_Symbol",
              "value": 1,
              "useLimitRange": true,
              "minValue": 0,
              "maxValue": 5,
              "doOffStage": true
            },
            {
              "$type": "TriggerAbility",
              "abilityName": "Avatar_Itto_Mask_Timer",
              "doOffStage": true
            }
          ]
        },
        //普攻第四击增添2枚印记
        "Avatar_Itto_LastNormalAttack_AddSymbol": {
          "duration": 0.1,
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "Repeated",
              "repeatTimes": 2,
              "actions": [
                {
                  "$type": "AddGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 1,
                  "useLimitRange": true,
                  "minValue": 0,
                  "maxValue": 5,
                  "doOffStage": true
                }
              ]
            },
            {
              "$type": "TriggerAbility",
              "abilityName": "Avatar_Itto_Mask_Timer",
              "doOffStage": true
            }
          ]
        },
        //普攻第一、第三击各增添1枚印记
        "Avatar_Itto_ForeNormalAttack_AddSymbol": {
          "duration": 0.1,
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_Itto_Symbol",
              "value": 1,
              "useLimitRange": true,
              "minValue": 0,
              "maxValue": 5,
              "doOffStage": true
            },
            {
              "$type": "TriggerAbility",
              "abilityName": "Avatar_Itto_Mask_Timer",
              "doOffStage": true
            }
          ]
        },
        //元素战技增添印记
        "Avatar_Itto_ElementalArtAddSymbol_Handler": {
          "onAttackLanded": [
            {
              "$type": "Predicated",
              "target": "Target",
              "targetPredicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": ["Elemental_Art"]
                },
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ANIMAL_ENTITY_TYPE",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ],
              "successActions": [
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ElementalArt_Add_Symbol",
                  "target": "Self"
                }
              ]
            }
          ]
        },
        //元素战技增添印记
        "ElementalArt_Add_Symbol": {
          "duration": 0.5,
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_Itto_Symbol",
              "value": 1,
              "useLimitRange": true,
              "minValue": 0,
              "maxValue": 5,
              "doOffStage": true
            },
            {
              "$type": "TriggerAbility",
              "abilityName": "Avatar_Itto_Mask_Timer",
              "doOffStage": true
            }
          ]
        },

        //进入特殊重击的提示效果（隐身+特效）
        "Avatar_Itto_SpecialExtra_TipEffect": {
          "onAdded": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ExtraAttack_TipEffect_01"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ExtraAttack_TipEffect_02",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "PRIVATE_GhostBuff"
              }
            },
            {
              "$type": "TriggerSetVisible",
              "visible": false
            }
          ],
          "onRemoved": [
            {
              "$type": "TriggerSetVisible",
              "doOffStage": true,
              "canBeHandledOnRecover": true,
              "visible": true
            },
            {
              "$type": "TriggerHideWeapon",
              "visible": false,
              "partNames": ["equip01", "equip02", "equip03", "sheathPoint"],
              "doOffStage": true,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_ElementalBurst_WeaponTag",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            }
          ]
        },
        //印记特效处理中枢
        "Avatar_Itto_SymbolEffect_Handler": {
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "_ABILITY_Itto_Symbol",
              "valueSteps": [-0.5, 0.5, 1.5, 2.5, 3.5, 4.5, 5.5],
              "removeAppliedModifier": true,
              "modifierNameSteps": [
                "Blank",
                "Blank",
                "Blank",
                "Blank",
                "Blank",
                "Blank"
              ],
              "actionQueues": [
                //印记层数 0层
                [
                  {
                    "$type": "SetAnimatorInt", //隐藏
                    "intID": "Mask_Level",
                    "value": 0,
                    "doOffStage": true,
                    "otherTargets": {
                      "$type": "SelectTargetsByChildren",
                      "configID": 41057001
                    }
                  },
                  {
                    "$type": "KillGadget",
                    "doOffStage": true,
                    "gadgetInfo": {
                      "$type": "SelectTargetsByChildren",
                      "configID": 41057001
                    }
                  }
                ],
                //印记层数 1层
                [
                  {
                    "$type": "CreateGadget", //没有印记时会创建印记
                    "gadgetID": 41057001,
                    "campID": 1001,
                    "campTargetType": "Enemy",
                    "doOffStage": true,
                    "born": {
                      "$type": "ConfigBornByTarget"
                    },
                    "predicates": [
                      {
                        "$type": "ByTargetGlobalValue",
                        "key": "_ABILITY_Itto_Mask_LifeTag",
                        "value": 0,
                        "compareType": "NoneOrEqual"
                      }
                    ]
                  },
                  {
                    "$type": "SetGlobalValue",
                    "key": "_ABILITY_Itto_Symbol",
                    "value": 1,
                    "otherTargets": {
                      "$type": "SelectTargetsByChildren",
                      "configID": 41057001
                    }
                  }
                ],
                //印记层数 2层
                [
                  {
                    "$type": "SetGlobalValue",
                    "key": "_ABILITY_Itto_Symbol",
                    "value": 2,
                    "doOffStage": true,
                    "otherTargets": {
                      "$type": "SelectTargetsByChildren",
                      "configID": 41057001
                    }
                  }
                ],
                //印记层数 3层
                [
                  {
                    "$type": "SetGlobalValue",
                    "key": "_ABILITY_Itto_Symbol",
                    "value": 3,
                    "doOffStage": true,
                    "otherTargets": {
                      "$type": "SelectTargetsByChildren",
                      "configID": 41057001
                    }
                  }
                ],
                //印记层数 4层
                [
                  {
                    "$type": "SetGlobalValue",
                    "key": "_ABILITY_Itto_Symbol",
                    "value": 4,
                    "doOffStage": true,
                    "otherTargets": {
                      "$type": "SelectTargetsByChildren",
                      "configID": 41057001
                    }
                  }
                ],
                //印记层数 5层
                [
                  {
                    "$type": "SetGlobalValue",
                    "key": "_ABILITY_Itto_Symbol",
                    "value": 5,
                    "doOffStage": true,
                    "otherTargets": {
                      "$type": "SelectTargetsByChildren",
                      "configID": 41057001
                    }
                  },
                  {
                    "$type": "ActCameraShake",
                    "cameraShake": {
                      "shakeType": "CustomVector",
                      "shakeRange": 0.25,
                      "shakeTime": 0.1,
                      "shakeDistance": 30,
                      "shakeDir": {
                        "x": 0,
                        "y": 1,
                        "z": 0
                      },
                      "extension": {
                        "baseOnCamera": true,
                        "rangeAttenuation": 0.1
                      }
                    }
                  },
                  {
                    "$type": "ActCameraRadialBlur",
                    "cameraRadialBlur": {
                      "power": 0.3,
                      "blurTime": 0.15,
                      "fadeTime": 0.12
                    }
                  }
                ]
              ]
            }
          ]
        },
        "Blank": {},
        //计算特殊重击打击次数，用于判断何时进最后一击
        "Avatar_Itto_Calculate_ExtraCombo": {
          "duration": 0.1,
          "stacking": "Multiple",
          "onAdded": [
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_Itto_SpecialExtra_Combo",
              "value": 1,
              "useLimitRange": true,
              "minValue": 0,
              "maxValue": 5,
              "doOffStage": true
            }
          ]
        },
        //退出特殊重击循环时清空Combo段数
        "Avatar_Itto_Calculate_ClearExtraCombo": {
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_SpecialExtra_Combo",
              "value": 0,
              "doOffStage": true
            }
          ],
          "onAvatarOut": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_SpecialExtra_Combo",
              "value": 0,
              "doOffStage": true
            }
          ]
        },
        //面具Gadget的恢复及显示处理
        "Avatar_Itto_Mask_Handler": {
          "onAdded": [
            {
              "$type": "SetGlobalValue", //面具显示状态  0：完全显示  1：部分隐藏  2：全部隐藏
              "key": "_ABILITY_Itto_Mask_FadeState",
              "value": 0,
              "doOffStage": true
            }
          ],
          "onAvatarIn": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Mask_FadeState",
              "value": 0,
              "doOffStage": true
            },
            {
              "$type": "DebugLog",
              "content": "AvatarIn",
              "doOffStage": true
            }
          ],
          "onAvatarOut": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Mask_FadeState",
              "value": 2,
              "doOffStage": true
            },
            {
              "$type": "DebugLog",
              "content": "AvatarOut",
              "doOffStage": true
            }
          ],
          //重连后Gadget会消失需要重新创建
          "onReconnect": [
            {
              "$type": "DebugLog",
              "content": "重连恢复面具",
              "doOffStage": true
            },
            {
              "$type": "CreateGadget",
              "gadgetID": 41057001,
              "campID": 1001,
              "campTargetType": "Enemy",
              "doOffStage": true,
              "born": {
                "$type": "ConfigBornByTarget"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue", //印记大于0时需要恢复
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 0,
                  "compareType": "MoreThan"
                },
                {
                  "$type": "ByHasChildGadget", //防止断线恢复一次性创建多个Gadget
                  "configIdArray": [41057001],
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ]
            }
          ],
          "thinkInterval": 3.0, //除此之外最好还是加个Tick保护吧，如果Symbol大于0就得有Gadget__重要！！！
          "onThinkInterval": [
            {
              "$type": "CreateGadget",
              "gadgetID": 41057001,
              "campID": 1001,
              "campTargetType": "Enemy",
              "doOffStage": true,
              "born": {
                "$type": "ConfigBornByTarget"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue", //印记大于0时需要恢复
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 0,
                  "compareType": "MoreThan"
                },
                {
                  "$type": "ByHasChildGadget", //防止断线恢复一次性创建多个Gadget
                  "configIdArray": [41057001],
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ]
            }
          ],
          //自身死亡时干掉面具
          "onKill": [
            {
              "$type": "KillGadget",
              "doOffStage": true,
              "gadgetInfo": {
                "$type": "SelectTargetsByChildren",
                "configID": 41057001
              }
            }
          ],
          "modifierMixins": [
            {
              "$type": "AttachToStateIDMixin",
              "stateIDs": [
                "Itto_ElementalArt_Loop",
                "Itto_ElementalArt_Hold",
                "Itto_ElementalBurst",
                "FlyStart",
                "Fly",
                "Swim",
                "Sit",
                "Slip",
                "Crouch",
                "HitThrow",
                "BeHitAir",
                "ExtraAttack1_BS"
              ],
              "modifierName": "Mask_Display"
            },
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "_ABILITY_Itto_Mask_FadeState",
              "valueSteps": [-0.5, 0.5, 1.5, 2.5],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["Blank", "Blank", "Blank"],
              "actionQueues": [
                //面具全显示
                [
                  {
                    "$type": "SetGlobalValue",
                    "key": "_ABILITY_Itto_Mask_FadeState",
                    "value": 0,
                    "doOffStage": true,
                    "otherTargets": {
                      "$type": "SelectTargetsByChildren",
                      "configID": 41057001
                    }
                  }
                ],
                //面具半透
                [
                  {
                    "$type": "SetGlobalValue",
                    "key": "_ABILITY_Itto_Mask_FadeState",
                    "value": 1,
                    "doOffStage": true,
                    "otherTargets": {
                      "$type": "SelectTargetsByChildren",
                      "configID": 41057001
                    }
                  }
                ],
                //面具全隐藏
                [
                  {
                    "$type": "SetGlobalValue",
                    "key": "_ABILITY_Itto_Mask_FadeState",
                    "value": 2,
                    "doOffStage": true,
                    "otherTargets": {
                      "$type": "SelectTargetsByChildren",
                      "configID": 41057001
                    }
                  }
                ]
              ]
            }
          ]
        },
        //一斗处于部分动作下将半隐藏模型
        "Mask_Display": {
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Mask_FadeState",
              "value": 1,
              "doOffStage": true
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Mask_FadeState",
              "value": 0,
              "doOffStage": true
            }
          ]
        }
      }
    }
  },
  //Trigger自身印记消耗 (EventPatternc触发)
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_Symbol_Cost",
      "onAbilityStart": [
        {
          "$type": "Predicated",
          "targetPredicates": [
            {
              "$type": "ByUnlockTalentParam",
              "talentParam": "Itto_Constellation_6"
            }
          ],
          //解锁命6 开启节能施法
          "successActions": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Constellation_SavingState",
                  "value": 0,
                  "compareType": "Equal"
                }
              ],
              //非最后一击的判定循环
              "successActions": [
                {
                  "$type": "Randomed",
                  "chance": "%Cost_Ratio",
                  //不消耗印记需要播个明显特效
                  "successActions": [
                    {
                      "$type": "FireEffect",
                      "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Constellation_Saving",
                      "otherTargets": {
                        "$type": "SelectTargetsByChildren",
                        "configID": 41057001
                      },
                      "born": {
                        "$type": "ConfigBornByTarget"
                      }
                    },
                    {
                      "$type": "SetAnimatorTrigger",
                      "triggerID": "Mask_TriggerTalent",
                      "MPTriggerOnRemote": true,
                      "otherTargets": {
                        "$type": "SelectTargetsByChildren",
                        "configID": 41057001
                      }
                    }
                  ],
                  //消耗印记
                  "failActions": [
                    {
                      "$type": "ApplyModifier",
                      "modifierName": "ExtraAttack_SymbolCost_Effect", //这个Modifier需要放在印记消耗之前
                      "otherTargets": {
                        "$type": "SelectTargetsByChildren",
                        "configID": 41057001
                      }
                    },
                    {
                      "$type": "AddGlobalValue",
                      "key": "_ABILITY_Itto_Symbol",
                      "value": -1,
                      "useLimitRange": true,
                      "minValue": 0,
                      "maxValue": 5
                    }
                  ]
                }
              ],
              //最后一击的节能判定逻辑
              "failActions": [
                {
                  "$type": "Predicated",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "_ABILITY_Itto_Constellation_SavingState",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ],
                  //节能且必不消耗资源
                  "successActions": [
                    {
                      "$type": "FireEffect",
                      "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Constellation_Saving",
                      "otherTargets": {
                        "$type": "SelectTargetsByChildren",
                        "configID": 41057001
                      },
                      "born": {
                        "$type": "ConfigBornByTarget"
                      }
                    },
                    {
                      "$type": "SetAnimatorTrigger",
                      "triggerID": "Mask_TriggerTalent",
                      "MPTriggerOnRemote": true,
                      "otherTargets": {
                        "$type": "SelectTargetsByChildren",
                        "configID": 41057001
                      }
                    }
                  ],
                  //不节能必消耗资源
                  "failActions": [
                    {
                      "$type": "ApplyModifier",
                      "modifierName": "ExtraAttack_SymbolCost_Effect", //这个Modifier需要放在印记消耗之前
                      "otherTargets": {
                        "$type": "SelectTargetsByChildren",
                        "configID": 41057001
                      }
                    },
                    {
                      "$type": "AddGlobalValue",
                      "key": "_ABILITY_Itto_Symbol",
                      "value": -1,
                      "useLimitRange": true,
                      "minValue": 0,
                      "maxValue": 5
                    }
                  ]
                }
              ]
            }
          ],
          //未解锁命6
          "failActions": [
            {
              "$type": "ApplyModifier",
              "modifierName": "ExtraAttack_SymbolCost_Effect",
              "otherTargets": {
                "$type": "SelectTargetsByChildren",
                "configID": 41057001
              }
            },
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_Itto_Symbol",
              "value": -1,
              "useLimitRange": true,
              "minValue": 0,
              "maxValue": 5,
              "doOffStage": true
            }
          ]
        }
      ],
      "modifiers": {
        //重击消耗印记时亮点消失的特效表现
        "ExtraAttack_SymbolCost_Effect": {
          "duration": 0.1,
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Mask_UpDown", //1表示印记上升，2表示印记下降
              "value": 2
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Mask_Trigger_Disappear_01",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "Point1",
                "attachPointTargetType": "Self"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 1,
                  "compareType": "Equal",
                  "target": "OriginOwner"
                }
              ]
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Mask_Trigger_Disappear_02",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "Point2",
                "attachPointTargetType": "Self"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 2,
                  "compareType": "Equal",
                  "target": "OriginOwner"
                }
              ]
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Mask_Trigger_Disappear_03",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "Point3",
                "attachPointTargetType": "Self"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 3,
                  "compareType": "Equal",
                  "target": "OriginOwner"
                }
              ]
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Mask_Trigger_Disappear_04",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "Point4",
                "attachPointTargetType": "Self"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 4,
                  "compareType": "Equal",
                  "target": "OriginOwner"
                }
              ]
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Mask_Trigger_Disappear_05",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "Point5",
                "attachPointTargetType": "Self"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 5,
                  "compareType": "Equal",
                  "target": "OriginOwner"
                }
              ]
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Mask_UpDown",
              "value": 1
            }
          ]
        }
      },
      "abilitySpecials": {
        "Cost_Ratio": 0 //节能施法概率（不消耗印记）
      }
    }
  },
  //面具生命周期相关
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_Mask_Timer",
      "onAbilityStart": [
        {
          "$type": "AttachModifier",
          "modifierName": "Refresh_LifeTime",
          "doOffStage": true
        }
      ],
      "modifiers": {
        "Refresh_LifeTime": {
          "duration": "%Mask_Timer",
          "stacking": "Refresh",
          "onRemoved": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Mask_Disappear",
              "otherTargets": {
                "$type": "SelectTargetsByChildren",
                "configID": 41057001
              },
              "born": {
                "$type": "ConfigBornByTarget"
              }
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Symbol",
              "value": 0,
              "doOffStage": true
            }
          ]
        }
      },
      "abilitySpecials": {
        "Mask_Timer": 0
      }
    }
  },

  //Gadget_41057001  一斗重击印记美术表现处理
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_ExtraAttack_Mask",
      "onAdded": [
        {
          "$type": "AttachModifier",
          "modifierName": "Itto_Mask_Initialize"
        },
        {
          "$type": "AttachModifier",
          "modifierName": "Itto_Mask_Display_Handler"
        },
        {
          "$type": "SetGlobalValue",
          "key": "_ABILITY_Itto_Mask_LifeTag", //生命周期标志位 1：活着  0：挂了
          "value": 1,
          "target": "OriginOwner",
          "doOffStage": true
        }
      ],
      "abilityMixins": [
        {
          "$type": "AttachModifierToSelfGlobalValueMixin",
          "globalValueKey": "_ABILITY_Itto_Symbol",
          "valueSteps": [-0.5, 0.5, 1.5, 2.5, 3.5, 4.5, 5.5],
          "removeAppliedModifier": true,
          "modifierNameSteps": [
            "Blank",
            "Itto_Mask_Eff_01",
            "Itto_Mask_Eff_02",
            "Itto_Mask_Eff_03",
            "Itto_Mask_Eff_04",
            "Itto_Mask_Eff_05"
          ]
        }
      ],
      "modifiers": {
        //面具创建时的初始化（主要是GV）
        "Itto_Mask_Initialize": {
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Mask_UpDown", //1表示印记增加 ，2表示印记降低
              "value": 1 //初始化默认增加印记
            },
            {
              "$type": "CopyGlobalValue",
              "srcTarget": "OriginOwner",
              "dstTarget": "Self",
              "srcKey": "_ABILITY_Itto_Mask_FadeState",
              "dstKey": "_ABILITY_Itto_Mask_FadeState"
            },
            {
              "$type": "CopyGlobalValue",
              "srcTarget": "OriginOwner",
              "dstTarget": "Self",
              "srcKey": "_ABILITY_Itto_Symbol",
              "dstKey": "_ABILITY_Itto_Symbol_Time" //Gadget创生时需要去一斗身上读下GV
            },
            {
              "$type": "SetGlobalValueToOverrideMap",
              "globalValueKey": "_ABILITY_Itto_Symbol_Time",
              "overrideMapKey": "Mask_AddTIme"
            },
            {
              "$type": "Repeated",
              "repeatTimes": "%Mask_AddTIme",
              "actions": [
                {
                  "$type": "AddGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 1,
                  "useLimitRange": true,
                  "minValue": 0,
                  "maxValue": 5,
                  "doOffStage": true
                }
              ]
            }
          ]
        },
        "Blank": {},
        //1层亮点特效
        "Itto_Mask_Eff_01": {
          "onAdded": [
            {
              "$type": "SetAnimatorInt",
              "intID": "Mask_Level",
              "value": 1,
              "doOffStage": true
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Mask_Trigger_Appear_01",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "Point1",
                "attachPointTargetType": "Self"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Mask_UpDown",
                  "value": 1,
                  "compareType": "Equal"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Mask_FadeState", //面具在非隐藏状态下才会appear
                  "value": 1,
                  "compareType": "LessAndEqual"
                }
              ]
            }
          ]
        },
        //2层亮点特效
        "Itto_Mask_Eff_02": {
          "onAdded": [
            {
              "$type": "SetAnimatorInt",
              "intID": "Mask_Level",
              "value": 2,
              "doOffStage": true
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Mask_Trigger_Appear_02",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "Point2",
                "attachPointTargetType": "Self"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Mask_UpDown",
                  "value": 1,
                  "compareType": "Equal"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Mask_FadeState",
                  "value": 1,
                  "compareType": "LessAndEqual"
                }
              ]
            }
          ]
        },
        //3层亮点特效
        "Itto_Mask_Eff_03": {
          "onAdded": [
            {
              "$type": "SetAnimatorInt",
              "intID": "Mask_Level",
              "value": 3,
              "doOffStage": true
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Mask_Trigger_Appear_03",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "Point3",
                "attachPointTargetType": "Self"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Mask_UpDown",
                  "value": 1,
                  "compareType": "Equal"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Mask_FadeState",
                  "value": 1,
                  "compareType": "LessAndEqual"
                }
              ]
            }
          ]
        },
        //4层亮点特效
        "Itto_Mask_Eff_04": {
          "onAdded": [
            {
              "$type": "SetAnimatorInt",
              "intID": "Mask_Level",
              "value": 4,
              "doOffStage": true
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Mask_Trigger_Appear_04",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "Point4",
                "attachPointTargetType": "Self"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Mask_UpDown",
                  "value": 1,
                  "compareType": "Equal"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Mask_FadeState",
                  "value": 1,
                  "compareType": "LessAndEqual"
                }
              ]
            }
          ]
        },
        //5层亮点特效
        "Itto_Mask_Eff_05": {
          "onAdded": [
            {
              "$type": "SetAnimatorInt",
              "intID": "Mask_Level",
              "value": 5,
              "doOffStage": true
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_Mask_Trigger_Appear_05",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "Point5",
                "attachPointTargetType": "Self"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_Mask_UpDown",
                  "value": 1,
                  "compareType": "Equal"
                }
                //叠满时可以整体亮一下
                // {
                //     "$type": "ByTargetGlobalValue",
                //     "key": "_ABILITY_Itto_Mask_FadeState",
                //     "value": 1,
                //     "compareType": "LessAndEqual",
                // },
              ]
            }
          ]
        },
        //鬼脸面具的状态机参数控制
        "Itto_Mask_Display_Handler": {
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "_ABILITY_Itto_Mask_FadeState",
              "valueSteps": [-0.5, 0.5, 1.5, 2.5],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["Blank", "Blank", "Blank"],
              "actionQueues": [
                //面具全显示
                [
                  {
                    "$type": "SetAnimatorInt",
                    "intID": "Mask_FadeState",
                    "value": 0,
                    "doOffStage": true
                  }
                ],
                //面具半透
                [
                  {
                    "$type": "SetAnimatorInt",
                    "intID": "Mask_FadeState",
                    "value": 1,
                    "doOffStage": true
                  }
                ],
                //面具全隐藏
                [
                  {
                    "$type": "SetAnimatorInt",
                    "intID": "Mask_FadeState",
                    "value": 2,
                    "doOffStage": true
                  }
                ]
              ]
            }
          ]
        }
      },
      "onKill": [
        {
          "$type": "SetGlobalValue",
          "key": "_ABILITY_Itto_Mask_LifeTag",
          "value": 0,
          "target": "OriginOwner",
          "doOffStage": true
        }
      ],
      "abilitySpecials": {
        "Mask_AddTIme": 0 //用于处理面具创生时的Trigger特效次数
      }
    }
  },

  ///////////////////////////////////////////////////////////////
  //
  //  元素战技（男拳妈妈）
  //
  ////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_ElementalArt",
      "onAdded": [
        {
          "$type": "SetGlobalValue",
          "key": "_ABILITY_Itto_ElementalArt_ClickOrHold", //用于判断技能点按长按二择，1:点按 2:长按
          "value": 1
        },
        {
          "$type": "AttachModifier",
          "modifierName": "Avatar_Itto_ElementalArt_HitCheck"
        }
      ],
      //EventPattern Trigger
      "onAbilityStart": [
        {
          "$type": "AvatarSkillStart",
          "skillID": 10572,
          "cdRatio": 1
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "Avatar_Itto_ElementalArt_Strike"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "Avatar_Itto_ElementalArt_CreateBull"
        },
        {
          "$type": "RemoveModifier",
          "modifierName": "Focus"
        }
      ],
      "abilityMixins": [
        {
          "$type": "SkillButtonHoldChargeMixin",
          "skillID": 10572,
          "beforeStateIDs": ["Itto_ElementalArt_BS"],
          "chargeLoopStateIDs": ["Itto_ElementalArt_Loop"],
          "chargeLoopDurations": [10],
          "nextLoopTriggerID": "NextLoopTrigger",
          "endHoldTrigger": "EndHoldTrigger"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": [
            "Itto_ElementalArt_BS",
            "Itto_ElementalArt_Loop",
            "Itto_ElementalArt_Hold",
            "Itto_ElementalArt"
          ],
          "modifierName": "Avatar_Itto_ElementalArt_ChargeRune"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["Itto_ElementalArt_Loop", "Itto_ElementalArt_Hold"],
          "modifierName": "Focus"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["Itto_ElementalArt_Loop"],
          "modifierName": "Charge_FX"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": [
            "Itto_ElementalArt_BS",
            "Itto_ElementalArt_Loop",
            "Itto_ElementalArt_Hold",
            "Itto_ElementalArt",
            "Itto_ElementalArt_AS"
          ],
          "modifierName": "Avatar_Itto_ElementalArt_SaveNormalCombo"
        }
      ],
      "modifiers": {
        //打拳警告
        "Avatar_Itto_ElementalArt_Strike": {
          "duration": 0.2,
          "onAdded": [
            {
              "$type": "RemoveModifier",
              "modifierName": "Avatar_Itto_ElementalArt_ChargeRune" //干掉自己身上的符文开始打拳
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalArt_Strike"
            },
            {
              "$type": "ActCameraShake",
              "cameraShake": {
                "shakeType": "CustomVector",
                "shakeRange": 0.3,
                "shakeTime": 0.15,
                "shakeDistance": 30,
                "shakeDir": {
                  "x": 0,
                  "y": -1,
                  "z": 0
                },
                "extension": {
                  "baseOnCamera": true,
                  "rangeAttenuation": 0.1
                }
              }
            },
            {
              "$type": "ActCameraRadialBlur",
              "cameraRadialBlur": {
                "power": 0.3,
                "blurTime": 0.2,
                "fadeTime": 0.15
              }
            }
          ]
        },
        //元素战技掉球检测
        "Avatar_Itto_ElementalArt_HitCheck": {
          "onHittingOther": [
            {
              "$type": "Predicated", //增添掉球检测
              "target": "Target",
              "targetPredicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": ["Elemental_Art"]
                },
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ANIMAL_ENTITY_TYPE",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ],
              "successActions": [
                {
                  "$type": "ApplyModifier",
                  "modifierName": "Avatar_Itto_ElementalArt_DropBall",
                  "target": "Self",
                  "doOffStage": true //可以换到后台再打出伤害，需要加doOffStage
                }
              ]
            }
          ]
        },
        //掉球Ball
        "Avatar_Itto_ElementalArt_DropBall": {
          "duration": 0.2,
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "Randomed", //权值10.5点能量
              "chance": 0.5,
              "successActions": [
                {
                  "$type": "GenerateElemBall",
                  "configID": 2023,
                  "baseEnergy": 9,
                  "ratio": 1,
                  "born": {
                    "$type": "ConfigBornBySelf",
                    "bornRandom": {
                      "$type": "BornRandomFromCenter",
                      "minRandomRange": 0.4,
                      "maxRandomRange": 1.2
                    }
                  },
                  "doOffStage": true
                }
              ],
              "failActions": [
                {
                  "$type": "GenerateElemBall",
                  "configID": 2023,
                  "baseEnergy": 12,
                  "ratio": 1,
                  "born": {
                    "$type": "ConfigBornBySelf",
                    "bornRandom": {
                      "$type": "BornRandomFromCenter",
                      "minRandomRange": 0.4,
                      "maxRandomRange": 1.2
                    }
                  },
                  "doOffStage": true
                }
              ]
            }
          ]
        },
        //创建牛子发射器
        "Avatar_Itto_ElementalArt_CreateBull": {
          "duration": 0.2,
          "onAdded": [
            {
              "$type": "KillGadget",
              "gadgetInfo": {
                "$type": "SelectTargetsByChildren",
                "configID": 41057002
              }
            },
            {
              "$type": "KillGadget",
              "gadgetInfo": {
                "$type": "SelectTargetsByChildren",
                "configID": 41057003
              }
            },
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_ElementalArt_ClickOrHold",
                  "value": 1,
                  "compareType": "Equal"
                }
              ],
              //点按发射
              "successActions": [
                {
                  "$type": "TriggerBullet",
                  "bulletID": 41057002,
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "WeaponR",
                    "offset": {
                      "x": 0.2,
                      "y": -0.25,
                      "z": 0.1
                    },
                    "direction": {
                      "$type": "ConfigDirectionByEntity",
                      "angleOffset": {
                        "x": 20, //向下偏转20°
                        "y": 0, //向右偏转10°
                        "z": 0
                      }
                    }
                  }
                }
              ],
              //长按发射
              "failActions": [
                {
                  "$type": "TriggerBullet",
                  "bulletID": 41057002,
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "FocusAnchor",
                    "offset": {
                      "x": 0.15,
                      "y": -0.1,
                      "z": 0.6
                    }
                  }
                }
              ]
            }
          ]
        },
        //创生牛子的蓄力符文
        "Avatar_Itto_ElementalArt_ChargeRune": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalArt_Hand"
            },
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalArt_Rune"
            }
          ]
        },
        //蓄力瞄准镜头
        "Focus": {
          "onAdded": [
            {
              "$type": "AvatarEnterFocus",
              "cameraFollowLower": {
                "x": 0.8,
                "y": 0.2,
                "z": -2.5
              },
              "cameraFollowUpper": {
                "x": 0.5,
                "y": -0.2,
                "z": 0.0
              },
              "cameraFollowMaxDegree": -2,
              "cameraFollowMinDegree": -45,
              "cameraFastFocusMode": true,
              "dragButtonName": "Skill2",
              "assistance": {
                "ps4": {
                  "useGyro": false
                },
                "ps5": {
                  "useGyro": false
                },
                "other": {
                  "useGyro": true
                }
              },
              "canMove": false,
              "showCrosshair": false,
              "vcam_fov": 45
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalArt_ClickOrHold",
              "value": 2
            },
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalArt_AimAlert"
            },
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalArt_AimAlert_Hand"
            }
          ],
          "onRemoved": [
            {
              "$type": "AvatarExitFocus",
              "keepRotation": true
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalArt_ClickOrHold",
              "value": 1
            }
          ]
        },
        //蓄力瞄准特效
        "Charge_FX": {
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "_ONIBULL_THROW_RANGE", //配合Aim_Line特效使用，可调整瞄准特效距离
              "value": 10
            },
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalArt_Aim_Line"
            }
            // {
            //     "$type": "AttachEffect",
            //     "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalArt_Aim_Hand",
            // },
          ]
        },
        //记录释放打拳之前的普攻combo段数
        "Avatar_Itto_ElementalArt_SaveNormalCombo": {
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_NormalAttack_Combo",
              "value": 1,
              "predicates": [
                {
                  "$type": "ByAnimatorInt",
                  "value": 1,
                  "parameter": "ComboCount",
                  "logic": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_NormalAttack_Combo",
              "value": 2,
              "predicates": [
                {
                  "$type": "ByAnimatorInt",
                  "value": 2,
                  "parameter": "ComboCount",
                  "logic": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_NormalAttack_Combo",
              "value": 3,
              "predicates": [
                {
                  "$type": "ByAnimatorInt",
                  "value": 3,
                  "parameter": "ComboCount",
                  "logic": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_NormalAttack_Combo",
              "value": 0,
              "predicates": [
                {
                  "$type": "ByAnimatorInt",
                  "value": 4,
                  "parameter": "ComboCount",
                  "logic": "GreaterOrEqual"
                }
              ]
            },
            {
              "$type": "SetGlobalValueToOverrideMap",
              "globalValueKey": "_ABILITY_Itto_NormalAttack_Combo",
              "overrideMapKey": "Combo_Count"
            }
          ],
          "thinkInterval": 0.2,
          //需要间隔Tick设一下Int值，否则会被Eventpattern里清掉
          "onThinkInterval": [
            {
              "$type": "SetAnimatorInt",
              "intID": "ComboCount",
              "value": "%Combo_Count"
            }
          ],
          "onRemoved": [
            {
              "$type": "SetAnimatorInt",
              "intID": "ComboCount",
              "value": 0
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_NormalAttack_Combo",
              "value": 0
            }
          ]
        }
      },
      "abilitySpecials": {
        "Combo_Count": 0
      }
    }
  },
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_ElementalArt_CreateGadget",
      //发射器通知一斗创建岩牛
      "onAbilityStart": [
        {
          "$type": "CreateGadget",
          "gadgetID": 41057003,
          "campID": 1001,
          "campTargetType": "Enemy",
          "doOffStage": true,
          "born": {
            "$type": "ConfigBornByGlobalValue",
            "positionKey": "_ABILITY_Itto_OniBull_Pos",
            "directionKey": "_ABILITY_Itto_OniBull_Dir"
            // "onGround": true,
            // "onGroundIgnoreWater": true,
            // "onGroundRaycastUpDist": 3,
          }
        }
      ]
    }
  },

  ///////////////////////////////////////////////////////////////
  //
  //  元素战技 —— Gadget牛子
  //
  ////////////////////////////////////////////////////////////////
  //Gadget_41057002  岩牛发射器
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_Gadget_OniBull_Bullet",
      "onAdded": [
        {
          "$type": "AttachEffect",
          "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalArt_OniBull_Bullet"
        },
        {
          "$type": "AttachEffect",
          "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalArt_OniBull_Bullet_Trail"
        }
      ],
      //碰撞Trigger创生岩牛
      "onAbilityStart": [
        {
          "$type": "SetGlobalPos",
          "target": "OriginOwner",
          "key": "_ABILITY_Itto_OniBull_Pos",
          "born": {
            "$type": "ConfigBornBySelf"
          },
          "setTarget": true
        },
        {
          "$type": "SetGlobalDir",
          "target": "OriginOwner",
          "key": "_ABILITY_Itto_OniBull_Dir",
          "born": {
            "$type": "ConfigBornBySelfOwner" //用自己的方向
          },
          "setTarget": true
        },
        {
          "$type": "TriggerAbility",
          "abilityName": "Avatar_Itto_ElementalArt_CreateGadget",
          "target": "OriginOwner",
          "doOffStage": true
        },
        {
          "$type": "KillSelf"
        }
      ]
    }
  },

  //Gadget_41057003  岩牛创生物
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_Gadget_OniBull",
      "onAdded": [
        {
          "$type": "ApplyModifier",
          "modifierName": "OniBull_TriggerAttack"
        },
        {
          "$type": "FireEffect",
          "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalArt_OniBull_Born",
          "born": {
            "$type": "ConfigBornBySelf"
          }
        },
        {
          "$type": "AttachModifier",
          "modifierName": "OniBull_Life_Handler"
        },
        {
          "$type": "AttachModifier",
          "modifierName": "OniBull_Battle_TriggerTaunt"
        }
      ],
      "modifiers": {
        //牛子创生时的爆炸攻击
        "OniBull_TriggerAttack": {
          "duration": 0.5,
          "onAdded": [
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackCircle",
                  "triggerType": "TriggerNoRepeat",
                  "height": 3.0,
                  "fanAngle": 360.0,
                  "detectDirection": "CenterToSide",
                  "radius": 3.5,
                  "born": {
                    "$type": "ConfigBornByGlobalValue",
                    "positionKey": "_ABILITY_Itto_OniBull_Pos",
                    "directionKey": "_ABILITY_Itto_OniBull_Dir",
                    "offset": {
                      "x": 0,
                      "y": -1,
                      "z": 0
                    }
                  }
                },
                "attackInfo": {
                  "attackTag": "Elemental_Art",
                  "canBeModifiedBy": "OriginOwner",
                  "attackProperty": {
                    "damagePercentage": "%Damage_Ratio",
                    "strikeType": "Blunt",
                    "attackType": "Range",
                    "elementType": "Rock",
                    "elementDurability": 25,
                    "enBreak": 250
                  },
                  "hitPattern": {
                    "onHitEffectName": "default",
                    "hitImpulseType": "LV5",
                    "overrideHitImpulse": {
                      "hitLevel": "Air",
                      "hitImpulseX": 100,
                      "hitImpulseY": 600
                    },
                    "reboundRatio": 0,
                    "hitHaltTime": 0.02,
                    "hitHaltTimeScale": 0.01,
                    "muteHitText": false,
                    "retreatType": "ByHitDirection"
                  }
                }
              }
            }
          ]
        },
        //牛子生命处理器
        "OniBull_Life_Handler": {
          "duration": "%OniBull_Duration",
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalArt_OniBull_Audio"
            }
            // {
            //     "$type": "ResetAnimatorTrigger",
            //     "triggerID": "Die",
            //     "doOffStage": true,
            // },
          ],
          "onRemoved": [
            // {
            //     "$type": "SetAnimatorTrigger",
            //     "triggerID": "Die",
            //     "MPTriggerOnRemote": true,
            //     "doOffStage": true,
            // },
            {
              "$type": "KillSelf"
            }
          ],
          "isLimitedProperties": true,
          "properties": {
            "Actor_MaxHPRatio": "%OniBull_MaxHPRatio-1"
          }
        },
        //嘲讽
        "OniBull_Battle_TriggerTaunt": {
          "thinkInterval": 0.25,
          "onThinkInterval": [
            {
              "$type": "TriggerTaunt",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR5H10",
                "centerBasedOn": "Self",
                "campTargetType": "Enemy",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ANIMAL_ENTITY_TYPE",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ]
            },
            {
              "$type": "AttachModifier",
              "modifierName": "Taunted_FX",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR5H10",
                "centerBasedOn": "Self",
                "campTargetType": "Enemy",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ANIMAL_ENTITY_TYPE",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                },
                {
                  "$type": "ByNot",
                  "predicates": [
                    {
                      "$type": "ByHasAbilityState",
                      "abilityState": "MuteTaunt"
                    }
                  ]
                }
              ]
            }
          ],
          "onBeingHit": [
            {
              "$type": "ApplyModifier",
              "modifierName": "OniBull_BeingHit",
              "predicates": [
                {
                  "$type": "ByHitDamage",
                  "damage": 0,
                  "logic": "Greater"
                }
              ]
            }
          ]
        },
        //嘲讽目标上的特效
        "Taunted_FX": {
          "stacking": "Refresh",
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Ganyu_Dummy_Taunted"
            }
          ],
          "onKill": [
            {
              "$type": "RemoveModifier",
              "modifierName": "Taunted_FX"
            }
          ]
        },
        //牛子受击为一斗回复印记
        "OniBull_BeingHit": {
          "duration": "%Hitting_Interval",
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_Itto_Symbol",
              "value": 1,
              "useLimitRange": true,
              "minValue": 0,
              "maxValue": 5,
              "target": "OriginOwner",
              "doOffStage": true
            },
            {
              "$type": "TriggerAbility",
              "abilityName": "Avatar_Itto_Mask_Timer",
              "target": "OriginOwner",
              "doOffStage": true
            },
            {
              "$type": "SetAnimatorTrigger",
              "triggerID": "Trigger_Hit",
              "MPTriggerOnRemote": true
            }
          ]
        }
      },
      "onKill": [
        {
          "$type": "AddGlobalValue",
          "key": "_ABILITY_Itto_Symbol",
          "value": 1,
          "useLimitRange": true,
          "minValue": 0,
          "maxValue": 5,
          "target": "OriginOwner",
          "doOffStage": true
        },
        {
          "$type": "TriggerAbility",
          "abilityName": "Avatar_Itto_Mask_Timer",
          "target": "OriginOwner",
          "doOffStage": true
        },
        {
          "$type": "FireEffect",
          "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalArt_OniBull_Die"
        }
      ],
      "abilitySpecials": {
        "Damage_Ratio": 0, //创生伤害
        "OniBull_Duration": 0, //持续时间
        "OniBull_MaxHPRatio": 0, //继承角色最大生命百分比
        "Hitting_Interval": 0 //回能间隔
      }
    }
  },

  //Gadget_41057004  回层子弹(测试效果)
  // {
  //     "Default":
  //     {
  //         "$type": "ConfigAbility",
  //         "abilityName": "Avatar_Itto_Symbol_Bullet",
  //         "onAdded":
  //         [
  //             {
  //                 "$type":"AttachEffect",
  //                 "effectPattern":"Eff_Ningguang_ElementalBurst_Attack_Up_Funnel_Orange_Trail",
  //             },
  //             {
  //                 "$type": "SetRandomOverrideMapValue",
  //                 "overrideMapKey": "RandomTimeRatio",
  //                 "valueRangeMin": 0.1,
  //                 "valueRangeMax": 0.2,
  //             },
  //             {
  //                 "$type":"ApplyModifier",
  //                 "modifierName":"Timer",
  //             },
  //         ],
  //         "onAbilityStart":
  //         [
  //             {
  //                 "$type": "AddGlobalValue",
  //                 "key": "_ABILITY_Itto_Symbol",
  //                 "value": 1,
  //                 "useLimitRange": true,
  //                 "minValue": 0,
  //                 "maxValue": 5,
  //                 "target": "OriginOwner",
  //                 "doOffStage": true,
  //             },
  //             {
  //                 "$type": "TriggerAbility",
  //                 "abilityName": "Avatar_Itto_Mask_Timer",
  //                 "target": "OriginOwner",
  //                 "doOffStage": true,
  //             },
  //         ],
  //         "modifiers":
  //         {
  //             "Timer":
  //             {
  //                 "duration":"%RandomTimeRatio",
  //                 "onRemoved":
  //                 [
  //                     {
  //                         "$type":"ApplyModifier",
  //                         "modifierName":"AngularVelocityUp",
  //                     },
  //                 ],
  //             },
  //             "AngularVelocityUp":
  //             {
  //                 "properties":
  //                 {
  //                     "Actor_BulletMoveAngularVelocityRatio": "%VelocityRatio",
  //                 },
  //             },
  //         },
  //         "abilitySpecials":
  //         {
  //             "RandomTimeRatio": 0,
  //             "VelocityRatio": 20,
  //         },
  //     },
  // },

  ///////////////////////////////////////////////////////////////
  //
  //  元素爆发
  //
  ////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_ElementalBurst",
      "onAbilityStart": [
        //控制天气播放
        {
          "$type": "RemoveModifier",
          "modifierName": "Avatar_Itto_ElementalBurst_WeatherChange_Pre"
        },
        {
          "$type": "AttachModifier",
          "modifierName": "Avatar_Itto_ElementalBurst_WeatherChange"
        }
      ],
      "abilityMixins": [
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["Itto_ElementalBurst"],
          "modifierName": "Avatar_Itto_ElementalBurst_Initialize"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["Itto_ElementalBurst"],
          "modifierName": "Avatar_Itto_ElementalBurst_Camera_Handler"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["Itto_ElementalBurst"],
          "modifierName": "Avatar_Itto_ElementalBurst_Camera_PushTarget"
        },
        {
          "$type": "AttachToNormalizedTimeMixin",
          "stateID": "Itto_ElementalBurst",
          "modifierName": "Avatar_Itto_ElementalBurst_CameraBlur",
          "normalizeStart": 0.415,
          "normalizeEnd": 0.91
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["Itto_ElementalBurst", "Itto_ElementalBurst_AS"],
          "modifierName": "Avatar_Itto_ElementalBurst_EmotionControl"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["Itto_ElementalBurst"],
          "modifierName": "Avatar_Itto_ElementalBurst_WeatherChange_Pre"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["Itto_ElementalBurst", "Itto_ElementalBurst_AS"],
          "modifierName": "Avatar_Itto_ElementalBurst_Invincible"
        }
      ],
      "modifiers": {
        //大招初始化
        "Avatar_Itto_ElementalBurst_Initialize": {
          "onAdded": [
            {
              "$type": "RemoveUniqueModifier",
              "modifierName": "UNIQUE_Avatar_Itto_ElementalBurst_Buff"
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_Avatar_Itto_ElementalBurst_Buff"
            }
          ]
        },
        //控制镜头播放及障碍检测
        "Avatar_Itto_ElementalBurst_Camera_Handler": {
          "onAdded": [
            {
              //周围碰撞检测，近身有障碍时将不播放镜头动画
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByAttackNotHitScene",
                  "attackPattern": {
                    "$type": "ConfigAttackCircle",
                    "triggerType": "TriggerNoRepeat",
                    "height": 0.4,
                    "fanAngle": 30.0,
                    "radius": 1.4,
                    "born": {
                      "$type": "ConfigBornBySelf",
                      "offset": {
                        "x": 0.0,
                        "y": 1.5,
                        "z": 0.0
                      }
                    }
                  },
                  "checkWaterLayer": true
                },
                {
                  "$type": "ByAvatarInWaterDepth",
                  "compareType": "LessAndEqual",
                  "depth": 0.5
                }
              ],
              "successActions": [
                {
                  "$type": "AvatarEnterCameraShot",
                  "cameraMoveCfgPath": "Camera_Itto_ElementalBurst"
                },
                {
                  "$type": "AttachModifier",
                  "modifierName": "Avatar_Itto_ElementalBurst_CameraEffect"
                },
                {
                  "$type": "SetAnimatorInt",
                  "intID": "PRIVATE_SkinFlag", //控制自身材质变化
                  "value": 1
                }
              ],
              //人被挡了就播个第三人称视角？
              "failActions": [
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalBurst_Camera_Thirdparty"
                }
              ]
            },
            {
              "$type": "EnableHeadControl",
              "enable": false,
              "blend": false
            }
          ],
          "onRemoved": [
            {
              "$type": "AvatarExitCameraShot",
              "doOffStage": true
            },
            {
              "$type": "AvatarCameraParam",
              "cameraParam": {
                "forceRadius": 6,
                "forceRadiusDuration": 0.5,
                "shouldKeepForceRadius": true
              }
            },
            {
              "$type": "EnableHeadControl",
              "enable": true
            },
            {
              "$type": "SetAnimatorInt",
              "intID": "PRIVATE_SkinFlag", //自身材质恢复
              "value": 0,
              "doOffStage": true
            }
          ],
          //释放过程中换人也会重置镜头参数  （加层保护）
          "onAvatarOut": [
            {
              "$type": "AvatarExitCameraShot",
              "doOffStage": true
            },
            {
              "$type": "AvatarCameraParam",
              "doOffStage": true,
              "cameraParam": {
                "forceRadius": 6,
                "forceRadiusDuration": 0.5,
                "shouldKeepForceRadius": true
              }
            },
            {
              "$type": "EnableHeadControl",
              "enable": true
            },
            {
              "$type": "SetAnimatorInt",
              "intID": "PRIVATE_SkinFlag", //自身材质恢复
              "value": 0,
              "doOffStage": true
            }
          ],
          "modifierMixins": [
            {
              "$type": "EffectChangeAlphaMixin",
              "target": "Team",
              "startDuration": 0.1,
              "endDuration": 0.1
            }
          ]
        },
        //把怪推出镜头
        "Avatar_Itto_ElementalBurst_Camera_PushTarget": {
          "modifierMixins": [
            {
              "$type": "WindZoneMixin",
              "shapeName": "CircleR3",
              "strength": -3,
              "attenuation": 2,
              "born": {
                "$type": "ConfigBornByTarget"
              },
              "targetType": "Enemy",
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster", "Grass"]
                },
                {
                  "$type": "ByTargetWeight", //WindZoneLevel = 2
                  "logic": "LesserOrEqual", //WindZoneLevel = 2
                  "weight": 250.0 //WindZoneLevel = 2
                }
              ]
            }
          ]
        },
        //表情管理
        "Avatar_Itto_ElementalBurst_EmotionControl": {
          "onAdded": [
            {
              "$type": "ControlEmotion",
              "toggleBlink": false,
              "toggleEyeKey": false,
              "toggleEmoSync": false
            }
          ],
          "onRemoved": [
            {
              "$type": "ControlEmotion",
              "doOffStage": true,
              "toggleBlink": true,
              "toggleEyeKey": true,
              "toggleEmoSync": true
            }
          ],
          "onAvatarOut": [
            {
              "$type": "ControlEmotion",
              "doOffStage": true,
              "toggleBlink": true,
              "toggleEyeKey": true,
              "toggleEmoSync": true
            }
          ]
        },
        //镜头特效(注意不进镜头需要替换第三视角)
        "Avatar_Itto_ElementalBurst_CameraEffect": {
          "duration": 2.0,
          "onAdded": [
            {
              "$type": "DungeonFogEffects",
              "enable": true,
              "muteRemoteAction": true,
              "cameraFogEffectName": "Eff_Avatar_Male_Claymore_Itto_ElementalBurst_Fog"
            },
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalBurst_Body"
            },
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalBurst_Hand"
            }
          ],
          "onRemoved": [
            {
              "$type": "DungeonFogEffects",
              "cameraFogEffectName": "Eff_Avatar_Male_Claymore_Itto_ElementalBurst_Fog",
              "enable": false,
              "doOffStage": true
            }
          ]
        },
        //镜头模糊
        "Avatar_Itto_ElementalBurst_CameraBlur": {
          "onAdded": [
            {
              "$type": "ActCameraRadialBlur",
              "cameraRadialBlur": {
                "power": 1.5,
                "blurTime": 0.1,
                "fadeTime": 0.1
              }
            },
            {
              "$type": "TriggerSetShadowRamp", //材质球阴影颜色变更
              "useShadowRamp": false,
              "specialMats": [
                "Avatar_Male_Claymore_Itto_Mat_Body",
                "Avatar_Male_Claymore_Itto_Mat_Hair"
              ]
            }
          ],
          "onRemoved": [
            {
              "$type": "TriggerSetShadowRamp",
              "useShadowRamp": true,
              "doOffStage": true,
              "specialMats": [
                "Avatar_Male_Claymore_Itto_Mat_Body",
                "Avatar_Male_Claymore_Itto_Mat_Hair"
              ]
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalBurst_Burst" //出镜瞬间的爆发特效
            }
          ]
        },
        //大招技镜前的天气控制
        "Avatar_Itto_ElementalBurst_WeatherChange_Pre": {
          "modifierMixins": [
            {
              "$type": "TriggerWeatherMixin",
              "type": "Skill",
              "weatherPattern": "Weather_Itto_ElementalBurst_Pre",
              "transDuration": 0.2,
              "duration": 1.5
            }
          ]
        },
        //Buff持续期间的天气控制
        "Avatar_Itto_ElementalBurst_WeatherChange": {
          "modifierMixins": [
            {
              "$type": "TriggerWeatherMixin",
              "type": "Skill",
              "weatherPattern": "Weather_Itto_ElementalBurst",
              "transDuration": 0.2,
              "duration": 16.0
            }
          ]
        },
        //大招无敌保护
        "Avatar_Itto_ElementalBurst_Invincible": {
          "duration": 2.0, //加个限定时间，防止摆pose很久了还无敌
          "state": "Invincible",
          "onAdded": [
            {
              "$type": "AttachAbilityStateResistance",
              "resistanceListID": 11002
            }
          ]
        },
        //大招Buff效果
        "UNIQUE_Avatar_Itto_ElementalBurst_Buff": {
          "isUnique": true,
          "stacking": "Refresh",
          "duration": "%Buff_Duration+1.8",
          "elementDurability": 100,
          "isLimitedProperties": true,
          "properties": {
            "Animator_AttackSpeedRatio": "%Speed_Ratio",
            "Actor_AttackExtraDelta": "%FIGHT_PROP_NONEXTRA_DEFENSE*%Defence_Ratio",

            //减所有元素抗性+物理抗性
            "Actor_FireSubHurtDelta": "-1*%Debuff_SubHurtRatio",
            "Actor_ElecSubHurtDelta": "-1*%Debuff_SubHurtRatio",
            "Actor_WaterSubHurtDelta": "-1*%Debuff_SubHurtRatio",
            "Actor_GrassSubHurtDelta": "-1*%Debuff_SubHurtRatio",
            "Actor_WindSubHurtDelta": "-1*%Debuff_SubHurtRatio",
            "Actor_IceSubHurtDelta": "-1*%Debuff_SubHurtRatio",
            "Actor_RockSubHurtDelta": "-1*%Debuff_SubHurtRatio",
            "Actor_PhysicalSubHurtDelta": "-1*%Debuff_SubHurtRatio"
          },
          "modifierMixins": [
            {
              "$type": "ReplaceEventPatternMixin", //Eventpattern强制切换攻击属性及特效
              "oldPatterns": [
                "Itto_Attack01",
                "Itto_Attack02",
                "Itto_Attack03",
                "Itto_Attack04",
                "Itto_ExtraAttack",
                "Itto_ExtraAttack_01",
                "Itto_ExtraAttack_02",
                "Itto_ExtraAttack_03",
                "Itto_ExtraAttack_AS",
                "Itto_FallingAnthem_AS"
              ],
              "newPatterns": [
                "Itto_Attack01_Ghost",
                "Itto_Attack02_Ghost",
                "Itto_Attack03_Ghost",
                "Itto_Attack04_Ghost",
                "Itto_ExtraAttack_Ghost",
                "Itto_ExtraAttack_Ghost_01",
                "Itto_ExtraAttack_Ghost_02",
                "Itto_ExtraAttack_Ghost_03",
                "Itto_ExtraAttack_AS_Ghost",
                "Itto_FallingAnthem_AS_Ghost"
              ]
            }
          ],
          "onAdded": [
            {
              "$type": "AvatarSkillStart", //计算技能CD
              "skillID": 10575,
              "cdRatio": 1.0,
              "predicates": [
                {
                  "$type": "BySkillReady",
                  "skillID": 10575
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_Flag", //标记大招状态
              "value": 1,
              "doOffStage": true
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_PreSheath", //初始化GV参数，保证Buff不会秒断
              "value": 0,
              "doOffStage": true
            },
            {
              "$type": "SetAnimatorFloat", //控制状态机参数进入指定受击动作
              "floatID": "InSubWeapon",
              "value": 1
            },
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalBurst_Ghost_Body"
            }
          ],
          //退场直接清理Buff
          "onAvatarOut": [
            {
              "$type": "RemoveUniqueModifier",
              "modifierName": "UNIQUE_Avatar_Itto_ElementalBurst_Buff",
              "doOffStage": true
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_Flag",
              "value": 0,
              "doOffStage": true
            },
            {
              "$type": "SetAnimatorFloat",
              "floatID": "InSubWeapon",
              "value": 0,
              "doOffStage": true
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_WeaponTag",
              "value": 0,
              "doOffStage": true
            },
            {
              "$type": "RemoveModifier",
              "modifierName": "Avatar_Itto_ElementalBurst_WeatherChange",
              "doOffStage": true
            },
            {
              "$type": "TriggerAbility",
              "abilityName": "Avatar_Itto_Constellation_4",
              "predicates": [
                {
                  "$type": "ByUnlockTalentParam",
                  "talentParam": "Itto_Constellation_4"
                }
              ],
              "doOffStage": true
            }
          ],
          "thinkInterval": "%Buff_Duration+1.3", //用来续时间的trigger，必须比本身时长短（额外补1.2s技能延长）
          //确认是否结束Buff时长
          "onThinkInterval": [
            {
              "$type": "TriggerAbility",
              "abilityName": "Avatar_Itto_ElementalBurst_ChangeWeapon", //狼牙棒变成大刀，如果未处于指定动作中会直接结束Buff
              "doOffStage": true
            }
          ]
        }
      },
      "abilitySpecials": {
        "Buff_Duration": 0,
        "Speed_Ratio": 0,
        "Defence_Ratio": 0,
        "Debuff_SubHurtRatio": 0
      }
    }
  },

  //大招状态下处理武器替换逻辑
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_ElementalBurst_ChangeWeapon",
      //Buff结束通知狼牙棒替换状态结束
      "onAbilityStart": [
        {
          "$type": "Predicated",
          "targetPredicates": [
            {
              "$type": "ByTargetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_IsInBattleState",
              "value": 0,
              "compareType": "Equal"
            }
          ],
          //非持刀状态直接将Buff下掉
          "successActions": [
            {
              "$type": "RemoveUniqueModifier",
              "modifierName": "UNIQUE_Avatar_Itto_ElementalBurst_Buff",
              "doOffStage": true
            }
          ],
          //持刀状态需要等动作结束后再下掉Buff
          "failActions": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_PreSheath",
              "value": 1,
              "doOffStage": true
            },
            {
              "$type": "AttachModifier",
              "modifierName": "Avatar_Itto_ElementalBurst_Buff_AddDurability"
            }
          ]
        }
      ],
      //初始化GV
      "onAdded": [
        {
          "$type": "SetGlobalValue",
          "key": "_ABILITY_Itto_ElementalBurst_Flag", //标记大招状态 0：静默期  1：爆发中
          "value": 0
        },
        {
          "$type": "SetGlobalValue",
          "key": "_ABILITY_Itto_ElementalBurst_WeaponTag", //判断是否处于替换狼牙棒状态
          "value": 0
        },
        {
          "$type": "SetGlobalValue",
          "key": "_ABILITY_Itto_ElementalBurst_ShowOrSheath", //狼牙棒显示状态  0：收刀  1：拔刀
          "value": 0
        },
        {
          "$type": "SetGlobalValue",
          "key": "_ABILITY_Itto_ElementalBurst_IsInBattleState", //判断一斗是否处于持刀动作状态中
          "value": 0
        },
        {
          "$type": "SetGlobalValue",
          "key": "_ABILITY_Itto_ElementalBurst_PreSheath", //大招Buff结束时如果处于持刀动作则进入预备收刀阶段
          "value": 0
        }
      ],
      "abilityMixins": [
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["Itto_ElementalBurst"],
          "modifierName": "Avatar_Itto_ElementalBurst_AddWeaponTag"
        },
        {
          "$type": "AttachModifierToSelfGlobalValueMixin",
          "globalValueKey": "_ABILITY_Itto_ElementalBurst_WeaponTag",
          "valueSteps": [-0.5, 0.5, 1.5],
          "modifierNameSteps": [
            "Blank",
            "Avatar_Itto_ElementalBurst_ChangeWeapon_Handler"
          ]
        },
        {
          "$type": "AttachModifierToSelfGlobalValueMixin",
          "globalValueKey": "_ABILITY_Itto_ElementalBurst_ShowOrSheath",
          "valueSteps": [-0.5, 0.5, 1.5],
          "modifierNameSteps": ["Blank", "Weapon_Replace_FxHandler"]
        }
      ],
      "modifiers": {
        "Blank": {},
        //替换武器的标志位
        "Avatar_Itto_ElementalBurst_AddWeaponTag": {
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_WeaponTag",
              "value": 1
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_WeaponTag", //镜前过程断线重连做个保护
              "value": 0,
              "doOffStage": true,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_ElementalBurst_Flag",
                  "value": 0,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "DebugLog",
              "content": "+++"
            }
          ]
        },
        //大招状态下指定动作使用 ”大棒“
        "Avatar_Itto_ElementalBurst_ChangeWeapon_Handler": {
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "TriggerHideWeapon",
              "visible": false,
              "partNames": ["equip01", "equip02", "equip03", "sheathPoint"], //隐藏原武器
              "doOffStage": true
            }
          ],
          "onReconnect": [
            {
              "$type": "TriggerHideWeapon",
              "visible": false,
              "partNames": ["equip01", "equip02", "equip03", "sheathPoint"], //重连时需再次将武器隐藏
              "doOffStage": true
            }
          ],
          "onRemoved": [
            {
              "$type": "TriggerHideWeapon",
              "visible": true,
              "partNames": ["equip01", "equip02", "equip03", "sheathPoint"], //显示原武器
              "doOffStage": true
            }
          ],
          "modifierMixins": [
            {
              "$type": "AttachToStateIDMixin",
              "stateIDs": [
                "Attack01_BS",
                "Attack01",
                "Attack02",
                "Attack03",
                "Attack04",
                "ExtraAttack",
                "ExtraAttack_AS",
                "ExtraAttack1_BS",
                "ExtraAttack1",
                "ExtraAttack2",
                "ExtraAttack3",
                "Itto_ElementalBurst",
                "Itto_ElementalBurst_AS",
                "FallingAnthem_BS",
                "FallingAnthem_Loop",
                "FallingAnthem_AS_1",
                "FallingAnthem_AS_2"
              ],
              "modifierName": "Weapon_Replace_StateExit",
              "isCheckOnAttach": true
            },
            //------------------狼牙棒拔刀控制---------------//
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "Attack01_BS",
              "modifierName": "Weapon_Replace_Show",
              "normalizeStart": 0.0
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "Attack01",
              "modifierName": "Weapon_Replace_Show",
              "normalizeStart": 0.0
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "Attack02",
              "modifierName": "Weapon_Replace_Show",
              "normalizeStart": 0.0
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "Attack03",
              "modifierName": "Weapon_Replace_Show",
              "normalizeStart": 0.0
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "Attack04",
              "modifierName": "Weapon_Replace_Show",
              "normalizeStart": 0.0
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack1",
              "modifierName": "Weapon_Replace_Show",
              "normalizeStart": 0.0
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack2",
              "modifierName": "Weapon_Replace_Show",
              "normalizeStart": 0.0
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack3",
              "modifierName": "Weapon_Replace_Show",
              "normalizeStart": 0.0
            },
            {
              "$type": "AttachToStateIDMixin",
              "stateIDs": ["ExtraAttack", "ExtraAttack_AS"],
              "modifierName": "Weapon_Replace_Show"
            },
            {
              "$type": "AttachToStateIDMixin",
              "stateIDs": [
                "FallingAnthem_BS",
                "FallingAnthem_Loop",
                "FallingAnthem_AS_1",
                "FallingAnthem_AS_2"
              ],
              "modifierName": "Weapon_Replace_Show"
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "Itto_ElementalBurst",
              "modifierName": "Weapon_Replace_Show",
              "normalizeStart": 0.232
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "Itto_ElementalBurst",
              "modifierName": "Weapon_Trigger_Bling",
              "normalizeStart": 0.31
            },
            //------------------狼牙棒收刀控制---------------//
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "Attack01",
              "modifierName": "Weapon_Replace_Sheath",
              "normalizeStart": 0.52
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "Attack02",
              "modifierName": "Weapon_Replace_Sheath",
              "normalizeStart": 0.612
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "Attack03",
              "modifierName": "Weapon_Replace_Sheath",
              "normalizeStart": 0.465
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "Attack04",
              "modifierName": "Weapon_Replace_Sheath",
              "normalizeStart": 0.614
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack_AS",
              "modifierName": "Weapon_Replace_Sheath",
              "normalizeStart": 0.15
            },
            // {
            //     "$type": "AttachToNormalizedTimeMixin",
            //     "modifierName": "Weapon_Replace_Sheath",
            //     "normalizeStart": 0.99,
            // },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack1",
              "modifierName": "Weapon_Replace_Sheath",
              "normalizeStart": 0.604
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack2",
              "modifierName": "Weapon_Replace_Sheath",
              "normalizeStart": 0.568
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack3",
              "modifierName": "Weapon_Replace_Sheath",
              "normalizeStart": 0.191
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "FallingAnthem_AS_2",
              "modifierName": "Weapon_Replace_Sheath",
              "normalizeStart": 0.61
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "Itto_ElementalBurst_AS",
              "modifierName": "Weapon_Replace_Sheath",
              "normalizeStart": 0.592
            }
          ]
        },
        //Buff状态续1秒 +1+1+1
        "Avatar_Itto_ElementalBurst_Buff_AddDurability": {
          "duration": 3, //保护时间
          "onAdded": [
            {
              "$type": "AddElementDurability",
              "modifierName": "UNIQUE_Avatar_Itto_ElementalBurst_Buff",
              "value": 10
            }
          ],
          "thinkInterval": 0.5,
          "onThinkInterval": [
            {
              "$type": "AddElementDurability",
              "modifierName": "UNIQUE_Avatar_Itto_ElementalBurst_Buff",
              "value": 10
            }
          ]
        },
        //退出指定动画时被动收刀
        "Weapon_Replace_StateExit": {
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_IsInBattleState",
              "value": 1
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_ShowOrSheath",
              "value": 0,
              "doOffStage": true
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_IsInBattleState",
              "value": 0,
              "doOffStage": true
            }
          ]
        },
        //单次State主动拔刀
        "Weapon_Replace_Show": {
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_ShowOrSheath",
              "value": 1,
              "doOffStage": true
            }
          ],
          "onRemoved": [
            {
              "$type": "RemoveUniqueModifier",
              "modifierName": "UNIQUE_Avatar_Itto_ElementalBurst_Buff", //如果退出动作时已经进入预收刀阶段则需要替换原武器
              "doOffStage": true,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_ElementalBurst_PreSheath",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "RemoveModifier",
              "modifierName": "Avatar_Itto_ElementalBurst_Buff_AddDurability",
              "doOffStage": true,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_ElementalBurst_PreSheath",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_PreSheath",
              "value": 0,
              "doOffStage": true
            }
          ]
        },
        //单次State主动收刀
        "Weapon_Replace_Sheath": {
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_ShowOrSheath",
              "value": 0,
              "doOffStage": true
            }
          ]
        },
        //大棒持续特效
        "Weapon_Replace_FxHandler": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalBurst_Weapon"
            }
          ],
          "onRemoved": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalBurst_Weapon_Disappear"
            }
          ]
        },
        //大招亮相时大棒需要配合闪一下
        "Weapon_Trigger_Bling": {
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "effectPattern": "Eff_Avatar_Male_Claymore_Itto_ElementalBurst_Weapon",
              "type": "Trigger",
              "parameter": "Trigger_Bling"
            }
          ]
        }
      }
    }
  },

  ////////////////////////////////////////////////////////////////
  //
  //  空中攻击
  //
  ////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_FallingAnthem",
      "abilityMixins": [
        {
          "$type": "AvatarChangeSkillMixin",
          "priority": "AvatarCommon",
          "jumpSkillID": 5057010,
          "flySkillID": 5057010
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["FallingAnthem_BS"],
          "modifierName": "FallingAnthem_BS_Material"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["FallingAnthem_Loop"],
          "modifierName": "FallingAnthem_Loop_Normal"
        },
        {
          "$type": "AttachToAnimatorStateIDMixin",
          "stateIDs": [
            "FallingAnthem_BS_2",
            "FallingAnthem_Loop",
            "FallingAnthem_Loop_Low"
          ],
          "modifierName": "FallingAnthem_LoopDamage"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["FallingAnthem_BS"],
          "modifierName": "FallingAnthem_BS_VelocityForce_Initialize"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": [
            "FallingAnthem_BS",
            "FallingAnthem_Loop",
            "FallingAnthem_AS_1",
            "FallingAnthem_AS_2"
          ],
          "modifierName": "FallingAnthem_Height_Detect"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": [
            "FallingAnthem_BS",
            "FallingAnthem_Loop",
            "FallingAnthem_AS_1",
            "FallingAnthem_AS_2"
          ],
          "modifierName": "FallingAnthem_FallingDamageImmune_01"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["FallingAnthem_BS", "FallingAnthem_Loop"],
          "modifierName": "Inertia"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": [
            "FallingAnthem_BS",
            "FallingAnthem_Loop",
            "FallingAnthem_AS_1",
            "FallingAnthem_AS_2"
          ],
          "modifierName": "FallingAnthem_OverHead_Camera"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["FallingAnthem_BS"],
          "modifierName": "FallingAnthem_ClearVelocityForce"
        },
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["FallingAnthem_BS", "FallingAnthem_Loop"],
          "modifierName": "FallingAnthem_AttachSelfEffect"
        }
      ],
      "onAdded": [],
      "onAbilityStart": [
        {
          "$type": "Predicated",
          "targetPredicates": [
            {
              "$type": "ByTargetGlobalValue",
              "key": "_ABILITY_Itto_ElementalBurst_Flag",
              "value": 1,
              "compareType": "Equal"
            }
          ],
          //大棒状态
          "successActions": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_FallingAnthem_UseCamera",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ],
              //低空攻击
              "successActions": [
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_Avatar_Claymore_FallAnthem_Strike_01"
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackCircle",
                      "triggerType": "TriggerNoRepeat",
                      "scale": 1.0,
                      "height": 2.0,
                      "centerYOffset": 0.0,
                      "offsetZ": 0.0,
                      "fanAngle": 360.0,
                      "radius": 4.0,
                      "followRootNodeY": false,
                      "followTransformY": false,
                      "offsetAngle": 0.0,
                      "born": {
                        "$type": "ConfigBornByTarget",
                        "offset": {
                          "x": 0.0,
                          "y": -0.5,
                          "z": 1.0
                        }
                      }
                    },
                    "attackInfo": {
                      "attackTag": "FallingAttack",
                      "attackProperty": {
                        "damagePercentage": "%FallingAnthem_Normal_Rank_1_Damage",
                        "strikeType": "Blunt",
                        "overrideByWeapon": false, //该状态固定是岩元素
                        "attackType": "Melee",
                        "elementType": "Rock",
                        "elementDurability": 25,
                        "enBreak": 150
                      },
                      "hitPattern": {
                        "onHitEffectName": "none",
                        "hitImpulseType": "LV4",
                        "retreatType": "ByAttacker",
                        "reboundRatio": 0,
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0,
                        "hitHaltTimeScale": 0.1,
                        "muteHitText": false
                      },
                      "forceCameraShake": true,
                      "cameraShake": {
                        "shakeType": "CustomVector",
                        "shakeRange": 0.24,
                        "shakeTime": 0.12,
                        "shakeDistance": 30,
                        "shakeDir": {
                          "x": 0,
                          "y": 1,
                          "z": 0
                        },
                        "extension": {
                          "baseCycle": 0.24,
                          "cycleDamping": 0,
                          "rangeAttenuation": 0.3
                        }
                      }
                    }
                  }
                }
              ],
              //高空攻击
              "failActions": [
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_Avatar_Claymore_FallAnthem_Strike_02"
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackCircle",
                      "triggerType": "TriggerNoRepeat",
                      "scale": 1.0,
                      "height": 2.0,
                      "centerYOffset": 0.0,
                      "offsetZ": 0.0,
                      "fanAngle": 360.0,
                      "radius": 6.0,
                      "followRootNodeY": false,
                      "followTransformY": false,
                      "offsetAngle": 0.0,
                      "born": {
                        "$type": "ConfigBornByTarget",
                        "offset": {
                          "x": 0.0,
                          "y": -0.5,
                          "z": 1.0
                        }
                      }
                    },
                    "attackInfo": {
                      "attackTag": "FallingAttack",
                      "attackProperty": {
                        "damagePercentage": "%FallingAnthem_Normal_Rank_2_Damage",
                        "strikeType": "Blunt",
                        "overrideByWeapon": false, //该状态固定是岩元素
                        "attackType": "Melee",
                        "elementType": "Rock",
                        "elementDurability": 25,
                        "enBreak": 200
                      },
                      "hitPattern": {
                        "onHitEffectName": "none",
                        "hitImpulseType": "LV7",
                        "retreatType": "ByAttacker",
                        "reboundRatio": 0,
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0,
                        "hitHaltTimeScale": 0.1,
                        "muteHitText": false
                      },
                      "forceCameraShake": true,
                      "cameraShake": {
                        "shakeType": "CustomVector",
                        "shakeRange": 0.5,
                        "shakeTime": 0.2,
                        "shakeDistance": 30,
                        "shakeDir": {
                          "x": 0,
                          "y": 1,
                          "z": 1
                        },
                        "extension": {
                          "baseCycle": 0.4,
                          "cycleDamping": 0,
                          "rangeAttenuation": 0.3
                        }
                      }
                    }
                  }
                }
              ]
            }
          ],
          //普通状态
          "failActions": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_FallingAnthem_UseCamera",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ],
              //低空攻击
              "successActions": [
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_Avatar_Claymore_FallAnthem_Strike_01"
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackCircle",
                      "triggerType": "TriggerNoRepeat",
                      "scale": 1.0,
                      "height": 2.0,
                      "centerYOffset": 0.0,
                      "offsetZ": 0.0,
                      "fanAngle": 360.0,
                      "radius": 3.0,
                      "followRootNodeY": false,
                      "followTransformY": false,
                      "offsetAngle": 0.0,
                      "born": {
                        "$type": "ConfigBornByTarget",
                        "offset": {
                          "x": 0.0,
                          "y": -0.5,
                          "z": 1.0
                        }
                      }
                    },
                    "attackInfo": {
                      "attackTag": "FallingAttack",
                      "attackProperty": {
                        "damagePercentage": "%FallingAnthem_Normal_Rank_1_Damage",
                        "strikeType": "Blunt",
                        "overrideByWeapon": true,
                        "attackType": "Melee",
                        "elementType": "None",
                        "elementDurability": 25,
                        "enBreak": 150
                      },
                      "hitPattern": {
                        "onHitEffectName": "none",
                        "hitImpulseType": "LV4",
                        "retreatType": "ByAttacker",
                        "reboundRatio": 0,
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0,
                        "hitHaltTimeScale": 0.1,
                        "muteHitText": false
                      },
                      "forceCameraShake": true,
                      "cameraShake": {
                        "shakeType": "CustomVector",
                        "shakeRange": 0.24,
                        "shakeTime": 0.12,
                        "shakeDistance": 30,
                        "shakeDir": {
                          "x": 0,
                          "y": 1,
                          "z": 0
                        },
                        "extension": {
                          "baseCycle": 0.24,
                          "cycleDamping": 0,
                          "rangeAttenuation": 0.3
                        }
                      }
                    }
                  }
                }
              ],
              //高空攻击
              "failActions": [
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_Avatar_Claymore_FallAnthem_Strike_02"
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackCircle",
                      "triggerType": "TriggerNoRepeat",
                      "scale": 1.0,
                      "height": 2.0,
                      "centerYOffset": 0.0,
                      "offsetZ": 0.0,
                      "fanAngle": 360.0,
                      "radius": 5.0,
                      "followRootNodeY": false,
                      "followTransformY": false,
                      "offsetAngle": 0.0,
                      "born": {
                        "$type": "ConfigBornByTarget",
                        "offset": {
                          "x": 0.0,
                          "y": -0.5,
                          "z": 1.0
                        }
                      }
                    },
                    "attackInfo": {
                      "attackTag": "FallingAttack",
                      "attackProperty": {
                        "damagePercentage": "%FallingAnthem_Normal_Rank_2_Damage",
                        "strikeType": "Blunt",
                        "overrideByWeapon": true,
                        "attackType": "Melee",
                        "elementType": "None",
                        "elementDurability": 25,
                        "enBreak": 200
                      },
                      "hitPattern": {
                        "onHitEffectName": "none",
                        "hitImpulseType": "LV7",
                        "retreatType": "ByAttacker",
                        "reboundRatio": 0,
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0,
                        "hitHaltTimeScale": 0.1,
                        "muteHitText": false
                      },
                      "forceCameraShake": true,
                      "cameraShake": {
                        "shakeType": "CustomVector",
                        "shakeRange": 0.5,
                        "shakeTime": 0.2,
                        "shakeDistance": 30,
                        "shakeDir": {
                          "x": 0,
                          "y": 1,
                          "z": 1
                        },
                        "extension": {
                          "baseCycle": 0.4,
                          "cycleDamping": 0,
                          "rangeAttenuation": 0.3
                        }
                      }
                    }
                  }
                }
              ]
            }
          ]
        }
      ],
      "modifiers": {
        "FallingAnthem_AttachSelfEffect": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Avatar_Claymore_FallAnthem_Self_02"
            }
          ]
        },
        "FallingAnthem_BS_Material": {
          "onAdded": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Claymore_FallAnthem_Self"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Claymore_FallAnthem_BS"
            }
          ]
        },
        "FallingAnthem_BS_VelocityForce_Initialize": {
          "properties": {
            "Actor_AddGravityScale": -2
          },
          "onAdded": [
            {
              "$type": "RemoveVelocityForce",
              "forces": ["RushMoveType"]
            }
          ]
        },
        "FallingAnthem_LoopDamage": {
          "thinkInterval": 0.3,
          "onThinkInterval": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_ABILITY_Itto_ElementalBurst_Flag",
                  "value": 1,
                  "compareType": "Equal"
                }
              ],
              //大棒状态
              "successActions": [
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": 1.0,
                      "born": {
                        "$type": "ConfigBornBySelf",
                        "offset": {
                          "x": 0.0,
                          "y": 0.0,
                          "z": 1
                        }
                      }
                    },
                    "attackInfo": {
                      "attackTag": "FallingAttack",
                      "attackProperty": {
                        "damagePercentage": "%FallingAnthem_Normal_Loop_Damage",
                        "strikeType": "Slash",
                        "overrideByWeapon": false,
                        "attackType": "Melee",
                        "elementType": "Rock",
                        "elementDurability": 0,
                        "enBreak": 35
                      },
                      "hitPattern": {
                        "onHitEffectName": "default",
                        "hitImpulseType": "LV2",
                        "reboundRatio": 0,
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0,
                        "hitHaltTimeScale": 0.02,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ],
              //普通状态
              "failActions": [
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": 1.0,
                      "born": {
                        "$type": "ConfigBornBySelf",
                        "offset": {
                          "x": 0.0,
                          "y": 0.0,
                          "z": 1
                        }
                      }
                    },
                    "attackInfo": {
                      "attackTag": "FallingAttack",
                      "attackProperty": {
                        "damagePercentage": "%FallingAnthem_Normal_Loop_Damage",
                        "strikeType": "Slash",
                        "overrideByWeapon": true,
                        "attackType": "Melee",
                        "elementType": "None",
                        "elementDurability": 0,
                        "enBreak": 35
                      },
                      "hitPattern": {
                        "onHitEffectName": "default",
                        "hitImpulseType": "LV2",
                        "reboundRatio": 0,
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0,
                        "hitHaltTimeScale": 0.02,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ]
            }
          ]
        },
        "FallingAnthem_FallingDamageImmune_01": {
          "onAdded": [
            {
              "$type": "ClearGlobalValue",
              "key": "_ABILITY_FallingAttack_Altitude"
            },
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_FallingAttack_Altitude",
              "value": "%FallingAnthem_FallingDamageRatio_Lv0",
              "useLimitRange": true,
              "maxValue": "%FallingAnthem_FallingDamageRatio_Lv0",
              "minValue": "%FallingAnthem_FallingDamageRatio_Lv0",
              "predicates": [
                {
                  "$type": "ByTargetAltitude",
                  "value": "%FallingAnthem_Altitude_Lv0",
                  "logic": "LesserOrEqual"
                }
              ]
            }, //==================================================================================
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_FallingAttack_Altitude",
              "value": "%FallingAnthem_FallingDamageRatio_Lv1",
              "useLimitRange": true,
              "maxValue": "%FallingAnthem_FallingDamageRatio_Lv1",
              "minValue": "%FallingAnthem_FallingDamageRatio_Lv1",
              "predicates": [
                {
                  "$type": "ByTargetAltitude",
                  "value": "%FallingAnthem_Altitude_Lv1",
                  "logic": "LesserOrEqual"
                },
                {
                  "$type": "ByTargetAltitude",
                  "value": "%FallingAnthem_Altitude_Lv0",
                  "logic": "Greater"
                }
              ]
            }, //==================================================================================
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_FallingAttack_Altitude",
              "value": "%FallingAnthem_FallingDamageRatio_Lv2",
              "useLimitRange": true,
              "maxValue": "%FallingAnthem_FallingDamageRatio_Lv2",
              "minValue": "%FallingAnthem_FallingDamageRatio_Lv2",
              "predicates": [
                {
                  "$type": "ByTargetAltitude",
                  "value": "%FallingAnthem_Altitude_Lv2",
                  "logic": "LesserOrEqual"
                },
                {
                  "$type": "ByTargetAltitude",
                  "value": "%FallingAnthem_Altitude_Lv1",
                  "logic": "Greater"
                }
              ]
            }, //==================================================================================
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_FallingAttack_Altitude",
              "value": "%FallingAnthem_FallingDamageRatio_Lv3",
              "useLimitRange": true,
              "maxValue": "%FallingAnthem_FallingDamageRatio_Lv3",
              "minValue": "%FallingAnthem_FallingDamageRatio_Lv3",
              "predicates": [
                {
                  "$type": "ByTargetAltitude",
                  "value": "%FallingAnthem_Altitude_Lv3",
                  "logic": "LesserOrEqual"
                },
                {
                  "$type": "ByTargetAltitude",
                  "value": "%FallingAnthem_Altitude_Lv2",
                  "logic": "Greater"
                }
              ]
            }, //==================================================================================
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_FallingAttack_Altitude",
              "value": "%FallingAnthem_FallingDamageRatio_Lv4",
              "useLimitRange": true,
              "maxValue": "%FallingAnthem_FallingDamageRatio_Lv4",
              "minValue": "%FallingAnthem_FallingDamageRatio_Lv4",
              "predicates": [
                {
                  "$type": "ByTargetAltitude",
                  "value": "%FallingAnthem_Altitude_Lv3",
                  "logic": "Greater"
                }
              ]
            }, //==================================================================================

            {
              "$type": "AttachModifier",
              "modifierName": "FallingAnthem_FallingDamageImmune_02"
            }
          ]
        },
        "FallingAnthem_FallingDamageImmune_02": {
          "onAdded": [
            {
              "$type": "SetGlobalValueToOverrideMap",
              "globalValueKey": "_ABILITY_FallingAttack_Altitude",
              "overrideMapKey": "FallingAnthem_FallingDamageRatio"
            },
            {
              "$type": "AttachModifier",
              "modifierName": "FallingAnthem_FallingDamageImmune_03"
            }
          ]
        },
        "FallingAnthem_FallingDamageImmune_03": {
          "properties": {
            "Actor_FallingDamageRatio": "%FallingAnthem_FallingDamageRatio"
          }
        },
        "FallingAnthem_Loop_Normal": {
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "_ABILITY_FallingAnthem_UseCamera",
              "valueSteps": [-1, 0.5, 1.5],
              "removeAppliedModifier": true,
              "modifierNameSteps": [
                "FallingAnthem_Loop_Normal_Rank_1",
                "FallingAnthem_Loop_Normal_Rank_2"
              ]
            }
          ]
        },
        "FallingAnthem_Loop_Normal_Rank_1": {
          "onAdded": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_Avatar_Claymore_FallAnthem_Loop_01"
            }
          ]
        },
        "FallingAnthem_Loop_Normal_Rank_2": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Avatar_Claymore_FallAnthem_Loop_02"
            }
          ]
        },
        //水平惯性继承
        "Inertia": {
          "modifierMixins": [
            {
              "$type": "ApplyInertiaVelocityMixin",
              "damping": 0,
              "useXZ": false,
              "useY": false
            }
          ]
        },
        "FallingAnthem_Height_Detect": {
          "onAdded": [
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_FallingAnthem_UseCamera",
              "value": 0,
              "useLimitRange": true,
              "maxValue": 0,
              "minValue": 0,
              "predicates": [
                {
                  "$type": "ByTargetAltitude",
                  "value": 2.4,
                  "logic": "LesserOrEqual"
                }
              ]
            },
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_FallingAnthem_UseCamera",
              "value": 5,
              "useLimitRange": true,
              "maxValue": 1,
              "minValue": 0,
              "predicates": [
                {
                  "$type": "ByTargetAltitude",
                  "value": 2.4,
                  "logic": "Greater"
                }
              ]
            },
            {
              "$type": "SetAnimatorFloat",
              "floatID": "FallingAnthem_UseCamera",
              "value": 0,
              "predicates": [
                {
                  "$type": "ByTargetAltitude",
                  "value": 2.4,
                  "logic": "LesserOrEqual"
                }
              ]
            },
            {
              "$type": "SetAnimatorFloat",
              "floatID": "FallingAnthem_UseCamera",
              "value": 1,
              "predicates": [
                {
                  "$type": "ByTargetAltitude",
                  "value": 2.4,
                  "logic": "Greater"
                }
              ]
            }
          ],
          "onRemoved": [
            {
              "$type": "SetAnimatorFloat",
              "floatID": "FallingAnthem_UseCamera",
              "value": 0
            },
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_FallingAnthem_UseCamera",
              "value": 0,
              "useLimitRange": true,
              "maxValue": 0,
              "minValue": 0
            }
          ]
        },
        "FallingAnthem_OverHead_Camera": {
          "onAdded": [
            {
              "$type": "AvatarCameraParam",
              "lockParam": false,
              "cameraParam": {
                "forceRadius": 4.5,
                "forceRadiusDuration": 0.2,
                "shouldKeepForceRadius": true
              },
              "predicates": [
                {
                  "$type": "ByAnimatorFloat",
                  "parameter": "FallingAnthem_UseCamera",
                  "value": 1,
                  "logic": "Equal"
                }
              ]
            }
          ]
        },
        "FallingAnthem_OverHead_Camera_Remover": {
          "onAdded": [
            {
              "doOffStage": true,
              "$type": "AvatarExitCameraShot"
            }
          ]
        },
        "FallingAnthem_Landed_Camera": {
          "onAdded": [
            {
              "$type": "AvatarCameraParam",
              "lockParam": false,
              "cameraParam": {
                "forceRadius": 6.0,
                "forceRadiusDuration": 0.1,
                "shouldKeepForceRadius": true
              },
              "predicates": [
                {
                  "$type": "ByAnimatorFloat",
                  "parameter": "FallingAnthem_UseCamera",
                  "value": 1,
                  "logic": "Equal"
                }
              ]
            }
          ]
        },
        "FallingAnthem_ClearVelocityForce": {
          "onAdded": [
            {
              "$type": "RemoveVelocityForce",
              "forces": ["RushMoveType", "InertiaType"]
            }
          ]
        }
      },
      "abilitySpecials": {
        "FallingAnthem_Normal_Loop_Damage": 0,
        "FallingAnthem_Normal_Rank_1_Damage": 0,
        "FallingAnthem_Normal_Rank_2_Damage": 0,

        "FallingAnthem_Altitude_Lv0": 20,
        "FallingAnthem_Altitude_Lv1": 40,
        "FallingAnthem_Altitude_Lv2": 60,
        "FallingAnthem_Altitude_Lv3": 100,
        "FallingAnthem_Altitude_Lv4": 200,

        "FallingAnthem_FallingDamageRatio_Lv0": -1,
        "FallingAnthem_FallingDamageRatio_Lv1": -1,
        "FallingAnthem_FallingDamageRatio_Lv2": -0.9,
        "FallingAnthem_FallingDamageRatio_Lv3": -0.8,
        "FallingAnthem_FallingDamageRatio_Lv4": -0.6,

        "FallingAnthem_FallingDamageRatio": 0
      }
    }
  },

  ///////////////////////////////////////////////////////////////
  //
  //  普攻&重击伤害管理
  //
  ////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_Attack_DamageHandler",
      "abilityMixins": [
        {
          "$type": "ModifyDamageMixin",
          "animEventNames": ["ATK01", "ATK01_Ghost"],
          "damagePercentage": "%NormalAttack_01_DamagePercentage"
        },
        {
          "$type": "ModifyDamageMixin",
          "animEventNames": ["ATK02", "ATK02_Ghost"],
          "damagePercentage": "%NormalAttack_02_DamagePercentage"
        },
        {
          "$type": "ModifyDamageMixin",
          "animEventNames": ["ATK03", "ATK03_Ghost"],
          "damagePercentage": "%NormalAttack_03_DamagePercentage"
        },
        {
          "$type": "ModifyDamageMixin",
          "animEventNames": ["ATK04", "ATK04_Ghost"],
          "damagePercentage": "%NormalAttack_04_DamagePercentage"
        },
        {
          "$type": "ModifyDamageMixin",
          "animEventNames": ["ExtraAttack", "ExtraAttack_Ghost"],
          "damagePercentage": "%ExtraAttack_DamagePercentage"
        },
        // {
        //     "$type": "ModifyDamageMixin",
        //     "animEventNames": ["ExtraAttack_01", "ExtraAttack_01_Ghost"],
        //     "damagePercentage": "%ExtraAttack_01_DamagePercentage",
        // },
        // {
        //     "$type": "ModifyDamageMixin",
        //     "animEventNames": ["ExtraAttack_02", "ExtraAttack_02_Ghost"],
        //     "damagePercentage": "%ExtraAttack_02_DamagePercentage",
        // },
        {
          "$type": "ModifyDamageMixin",
          "animEventNames": ["ExtraAttack_03", "ExtraAttack_03_Ghost"],
          "damagePercentage": "%ExtraAttack_03_DamagePercentage"
        }
      ],
      "abilitySpecials": {
        "NormalAttack_01_DamagePercentage": 0, //普攻第一段
        "NormalAttack_02_DamagePercentage": 0, //普攻第二段
        "NormalAttack_03_DamagePercentage": 0, //普攻第三段
        "NormalAttack_04_DamagePercentage": 0, //普攻第四段

        "ExtraAttack_DamagePercentage": 0, //普通重击第一段
        // "ExtraAttack_01_DamagePercentage": 0,    //特殊重击第一段
        // "ExtraAttack_02_DamagePercentage": 0,    //特殊重击第二段
        "ExtraAttack_03_DamagePercentage": 0 //特殊重击第三段
      }
    }
  },

  ///////////////////////////////////////////////////////////////
  //
  //  突破1 PermanentSkill_1
  //  特殊重击带霸体，特殊重击越打越快
  //
  ////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_PermanentSkill_1",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "modifierName": "Avatar_Itto_ExtraAttack_AddEndure"
        },
        {
          "$type": "AttachModifier",
          "modifierName": "Avatar_Itto_ExtraAttack_ComboSpeed_Handler"
        }
      ],
      "modifiers": {
        //特殊重击增加抗打断
        "Avatar_Itto_ExtraAttack_AddEndure": {
          "modifierMixins": [
            {
              "$type": "AttachToStateIDMixin",
              "stateIDs": ["ExtraAttack1", "ExtraAttack2", "ExtraAttack3"],
              "modifierName": "ExtraAttack_AddEndure"
            }
          ]
        },
        //爷霸体了
        "ExtraAttack_AddEndure": {
          "isLimitedProperties": true,
          "properties": {
            "Actor_EndureDelta": 0
          }
        },
        //重击越打越快（我要打10个
        "Avatar_Itto_ExtraAttack_ComboSpeed_Handler": {
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "_ABILITY_Itto_SpecialExtra_Combo",
              "valueSteps": [-0.5, 0.5, 100],
              "modifierNameSteps": [
                "Blank",
                "Avatar_Itto_ExtraAttack_ComboSpeed"
              ]
            }
          ]
        },
        "Blank": {},
        //处理重击加速逻辑（处理加速区间）
        "Avatar_Itto_ExtraAttack_ComboSpeed": {
          "modifierMixins": [
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack1",
              "normalizeStart": 0.0,
              "normalizeEnd": 1.0,
              "modifierName": "ExtraAttack_SpeedUp"
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack2",
              "normalizeStart": 0.0,
              "normalizeEnd": 1.0,
              "modifierName": "ExtraAttack_SpeedUp"
            },
            {
              "$type": "AttachToNormalizedTimeMixin",
              "stateID": "ExtraAttack3",
              "normalizeStart": 0.0,
              "normalizeEnd": 1.0,
              "modifierName": "ExtraAttack_SpeedUp"
            }
          ]
        },
        //计算重击加速度
        "ExtraAttack_SpeedUp": {
          "onAdded": [
            {
              "$type": "SetGlobalValueToOverrideMap",
              "globalValueKey": "_ABILITY_Itto_SpecialExtra_Combo",
              "overrideMapKey": "ExtraAttack_Combo"
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_SpeedCombo_Level",
              "value": "%ExtraAttack_Combo",
              "useLimitRange": true,
              "minValue": 0,
              "maxValue": 4
            },
            {
              "$type": "SetGlobalValueToOverrideMap",
              "globalValueKey": "_ABILITY_Itto_SpeedCombo_Level",
              "overrideMapKey": "ExtraAttack_Combo"
            },

            {
              "$type": "RemoveModifier",
              "modifierName": "ExtraAttack_SpeedUp_Buff"
            },
            {
              "$type": "AttachModifier",
              "modifierName": "ExtraAttack_SpeedUp_Buff"
            }
          ]
        },
        //真正执行更改Propertity
        "ExtraAttack_SpeedUp_Buff": {
          "isLimitedProperties": true,
          "properties": {
            "Animator_OverallSpeedRatio": "0.1*%ExtraAttack_Combo-0.1"
          }
        }
      },
      "abilitySpecials": {
        "ExtraAttack_Combo": 0 //OverrideMapKey 不导表
      }
    }
  },

  ///////////////////////////////////////////////////////////////
  //
  //  突破2 PermanentSkill_2
  //  特殊重击伤害提升，数值基于自身防御力
  //
  ////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_PermanentSkill_2",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "modifierName": "Avatar_Itto_ExtraAttack_DamageUp"
        }
      ],
      "modifiers": {
        //特殊重击伤害提升
        "Avatar_Itto_ExtraAttack_DamageUp": {
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": ["ExtraAttack"],
              "damageExtra": "%FIGHT_PROP_CUR_DEFENSE*%Defence_Ratio",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "_ABILITY_Itto_SpecialExtra_Combo", //用于判断角色处于特殊重击Combo
                  "value": 0,
                  "compareType": "MoreThan"
                }
              ]
            }
          ]
        }
      },
      "abilitySpecials": {
        "Defence_Ratio": 0 //防御增伤比值
      }
    }
  },

  ///////////////////////////////////////////////////////////////
  //
  //  命之座1 Constellation_1
  //  释放大招瞬间恢复2层，此后间隔XX秒回复一层，总共回复X次
  //
  ////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_Constellation_1",
      "isDynamicAbility": true,
      "abilityMixins": [
        {
          "$type": "AttachToNormalizedTimeMixin",
          "stateID": "Itto_ElementalBurst",
          "modifierName": "Avatar_Itto_Constellation_SymbolBurst",
          "normalizeStart": 0,
          "normalizeEnd": 0.91
        }
      ],
      "modifiers": {
        //施放元素爆发瞬间印记叠满
        "Avatar_Itto_Constellation_SymbolBurst": {
          "onRemoved": [
            {
              "$type": "Repeated",
              "repeatTimes": "%Revive_Instant",
              "doOffStage": true,
              "actions": [
                {
                  "$type": "AddGlobalValue",
                  "key": "_ABILITY_Itto_Symbol",
                  "value": 1,
                  "useLimitRange": true,
                  "minValue": 0,
                  "maxValue": 5,
                  "doOffStage": true
                }
              ]
            },
            {
              "$type": "TriggerAbility",
              "abilityName": "Avatar_Itto_Mask_Timer",
              "doOffStage": true
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "Avatar_Itto_Constellation_HotReviveSymbol_Delay",
              "doOffStage": true
            }
          ]
        },
        //延迟XX秒恢复印记
        "Avatar_Itto_Constellation_HotReviveSymbol_Delay": {
          "duration": "%Revive_Delay",
          "onRemoved": [
            {
              "$type": "ApplyModifier",
              "modifierName": "Avatar_Itto_Constellation_HotReviveSymbol",
              "doOffStage": true
            }
          ]
        },
        //释放大招后的Hot回复印记
        "Avatar_Itto_Constellation_HotReviveSymbol": {
          "duration": "%Revive_Hot*%Revive_Hot_Time+0.3-%Revive_Hot",
          "thinkInterval": "%Revive_Hot",
          "onAdded": [
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_Itto_Symbol",
              "value": 1,
              "useLimitRange": true,
              "minValue": 0,
              "maxValue": 5,
              "doOffStage": true
            },
            {
              "$type": "TriggerAbility",
              "abilityName": "Avatar_Itto_Mask_Timer",
              "doOffStage": true
            }
          ],
          "onThinkInterval": [
            {
              "$type": "AddGlobalValue",
              "key": "_ABILITY_Itto_Symbol",
              "value": 1,
              "useLimitRange": true,
              "minValue": 0,
              "maxValue": 5,
              "doOffStage": true
            },
            {
              "$type": "TriggerAbility",
              "abilityName": "Avatar_Itto_Mask_Timer",
              "doOffStage": true
            }
          ]
        }
      },
      "abilitySpecials": {
        "Revive_Instant": 0,
        "Revive_Delay": 0,
        "Revive_Hot": 0,
        "Revive_Hot_Time": 0
      }
    }
  },

  ///////////////////////////////////////////////////////////////
  //
  //  命之座2 Constellation_2
  //  释放元素爆发后，基于队内岩元素角色数量减少自身大招冷却时间，至多减少XX秒
  //  同时会根据队内岩元素角色数量回复对应元素能量
  //
  ////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_Constellation_2",
      "isDynamicAbility": true,
      "abilityMixins": [
        {
          "$type": "AttachToStateIDMixin",
          "stateIDs": ["Itto_ElementalBurst"],
          "modifierName": "Avatar_Itto_Constellation_CalculateRockAvatar"
        }
      ],
      "modifiers": {
        //计算队内岩元素角色数量
        "Avatar_Itto_Constellation_CalculateRockAvatar": {
          "onAdded": [
            {
              "$type": "ApplyModifier",
              "modifierName": "Avatar_Itto_Constellation_ReduceCD"
            }
          ]
        },
        "Avatar_Itto_Constellation_ReduceCD": {
          "duration": 1.25,
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Constellation_RockAvatar_Amount",
              "value": 1,
              "doOffStage": true,
              "predicates": [
                {
                  "$type": "ByBigTeamHasElementType",
                  "elementType": "Rock",
                  "number": 1,
                  "logic": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Constellation_RockAvatar_Amount",
              "value": 2,
              "doOffStage": true,
              "predicates": [
                {
                  "$type": "ByBigTeamHasElementType",
                  "elementType": "Rock",
                  "number": 2,
                  "logic": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "_ABILITY_Itto_Constellation_RockAvatar_Amount",
              "value": 3,
              "doOffStage": true,
              "predicates": [
                {
                  "$type": "ByBigTeamHasElementType",
                  "elementType": "Rock",
                  "number": 3,
                  "logic": "GreaterOrEqual"
                }
              ]
            },
            {
              "$type": "SetGlobalValueToOverrideMap",
              "globalValueKey": "_ABILITY_Itto_Constellation_RockAvatar_Amount",
              "overrideMapKey": "RockAvatar_Amount",
              "doOffStage": true
            },
            {
              "$type": "ModifyAvatarSkillCD",
              "skillSlot": [5],
              "cdDelta": "-1*%RockAvatar_Amount*%ReduceCD_Minus", //减CD
              "doOffStage": true
            },
            {
              "$type": "ReviveElemEnergy",
              "value": "%RockAvatar_Amount*%Revive_Energy", //回能
              "doOffStage": true
            }
          ]
        }
      },
      "abilitySpecials": {
        "RockAvatar_Amount": 0, //队内岩元素角色数量, Override不导表

        "ReduceCD_Minus": 0, //每层减少冷却时间值
        "Revive_Energy": 0 //每层回复元素能量
      }
    }
  },

  ///////////////////////////////////////////////////////////////
  //
  //  命之座4 Constellation_4
  //  元素爆发状态结束时（包含时间到、自身死亡、换人），为全队提供防御力+攻击力Buff加成
  //
  ////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_Constellation_4",
      "isDynamicAbility": true,
      "onAbilityStart": [
        {
          "$type": "RemoveUniqueModifier",
          "modifierName": "UNIQUE_Itto_Constellation_4_DefAndAtkBuff",
          "target": "AllPlayerAvatars",
          "predicates": [
            {
              "$type": "ByTargetPositionToSelfPosition",
              "compareType": "XZ",
              "value": 40,
              "logic": "LesserOrEqual"
            }
          ],
          "doOffStage": true
        },
        {
          "$type": "AttachModifier",
          "modifierName": "UNIQUE_Itto_Constellation_4_DefAndAtkBuff",
          "target": "AllPlayerAvatars",
          "predicates": [
            {
              "$type": "ByTargetPositionToSelfPosition",
              "compareType": "XZ",
              "value": 40,
              "logic": "LesserOrEqual"
            }
          ],
          "doOffStage": true
        }
      ],
      "modifiers": {
        //防御力与攻击力提升XX%
        "UNIQUE_Itto_Constellation_4_DefAndAtkBuff": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%Buff_Duration",
          "state": "DefenseUp",
          "isLimitedProperties": true,
          "properties": {
            "Actor_DefenceRatio": "%Def_Ratio",
            "Actor_AttackRatio": "%Atk_Ratio"
          }
        }
      },
      "abilitySpecials": {
        "Def_Ratio": 0, //防御力提升
        "Atk_Ratio": 0, //攻击力提升
        "Buff_Duration": 0 //Buff持续时间
      }
    }
  },

  ///////////////////////////////////////////////////////////////
  //
  //  命之座6 Constellation_6
  //  重击所造成的暴击伤害提升XX%
  //  每次释放特殊重击时有XX%概率不消耗印记（这块写在前面的消耗逻辑里）
  //
  ////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "Avatar_Itto_Constellation_6",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "modifierName": "Avatar_Itto_Constellation_CritDamageUp"
        }
      ],
      "modifiers": {
        //重击的暴击伤害提升
        "Avatar_Itto_Constellation_CritDamageUp": {
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": ["ExtraAttack"],
              "bonusCriticalHurt": "%CritDamage_Ratio"
            }
          ]
        }
      },
      "abilitySpecials": {
        "CritDamage_Ratio": 0 //暴击伤害提升
      }
    }
  }
]
