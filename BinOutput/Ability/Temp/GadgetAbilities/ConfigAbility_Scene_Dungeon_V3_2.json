[
  /////////////////////////////////////////////////////////////////
  //
  // 散兵工厂 运输装置
  //
  /////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Common_Property_Ani_Prop_MachineCarrier_01",
      "abilityMixins": [
        {
          "$type": "AttachModifierToSelfGlobalValueMixin",
          "globalValueKey": "SGV_MachineCarrier_State", //转向
          "valueSteps": [-0.5, 0.5, 1.5, 2.5],
          "modifierNameSteps": [
            "MachineCarrier_Default",
            "MachineCarrier_State_1",
            "MachineCarrier_State_2"
          ]
        },
        {
          "$type": "AttachModifierToSelfGlobalValueMixin",
          "globalValueKey": "MachineCarrier_PlayerState", //转向
          "valueSteps": [-0.5, 0.5, 1.5],
          "modifierNameSteps": [
            "MachineCarrier_DetectPlayer",
            "MachineCarrier_PlayerIn"
          ]
        },
        {
          "$type": "PlatformMoveMixin",
          "isLogicMove": false,
          "moveModifiers": ["MachineCarrier_Sound"]
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "MachineCarrier_StartDetectPlayer"
        }
      ],
      "onAdded": [
        {
          "$type": "SetGlobalValue",
          "key": "MachineCarrier_PlayerState",
          "value": 0
        }
      ],
      "modifiers": {
        "MachineCarrier_Sound": {
          //开始移动
          "onAdded": [
            {
              "$type": "TriggerAudio",
              "responder": "Caster",
              "operation": {
                "$type": "ConfigAudioEventOp",
                "operation": {
                  "text": "Play_amb_sceneObj_gear_MachineCarrier_01_move"
                }
              }
            }
          ],
          //停止移动
          "onRemoved": [
            {
              "$type": "TriggerAudio",
              "responder": "Caster",
              "operation": {
                "$type": "ConfigAudioEventOp",
                "operation": {
                  "text": "Stop_amb_sceneObj_gear_MachineCarrier_01_move"
                }
              }
            }
          ]
        },
        "MachineCarrier_PlayerIn": {},
        "MachineCarrier_DetectPlayer": {
          "thinkInterval": 0.2,
          "onThinkInterval": [
            {
              "$type": "Predicated",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR1",
                "centerBasedOn": "Self",
                "campTargetType": "Enemy",
                "campBasedOn": "Self",
                "sortType": "Default"
                //"topLimit": 1,
              },
              "targetPredicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Avatar"]
                }
              ],
              "successActions": [
                {
                  "$type": "ExecuteGadgetLua",
                  "param1": 201
                },
                {
                  "$type": "ServerLuaCall", //如果在停车状态下 上车，通知Group开车
                  "luaCallType": "FromGroup",
                  "funcName": "SLC_MachineCarrier_Player_In"
                },
                {
                  "$type": "SetGlobalValue",
                  "key": "MachineCarrier_PlayerState",
                  "target": "Self",
                  "value": 1
                }
              ]
            }
          ]
        },
        "MachineCarrier_Default": {
          "onAdded": [
            {
              "$type": "SetAnimatorInt",
              "intID": "GadgetState",
              "value": 0
            }
          ]
        },
        "MachineCarrier_State_1": {
          "onAdded": [
            {
              "$type": "SetAnimatorInt",
              "intID": "GadgetState",
              "value": 201
            }
          ]
        },
        "MachineCarrier_State_2": {
          "onAdded": [
            {
              "$type": "SetAnimatorInt",
              "intID": "GadgetState",
              "value": 101
            }
          ]
        },
        "MachineCarrier_StartDetectPlayer": {
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "MachineCarrier_PlayerState",
              "target": "Self",
              "value": 0
            }
          ]
        }
      },
      /*"onFieldEnter": 
			[
				{
					"$type": "ExecuteGadgetLua",
                    "param1": 201,
				},
                {
                    "$type": "ServerLuaCall",
                    "luaCallType": "FromGroup",
                    "funcName": "SLC_MachineCarrier_Player_In",
                }
			],  */
      "onFieldExit": [
        {
          "$type": "ExecuteGadgetLua",
          "param1": 0
        }
      ]
    }
  },
  /////////////////////////////////////////////////////////////////
  //
  // 草神地城传送门
  //
  /////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Common_Property_Prop_DreamPortal_01",
      "abilitySpecials": {
        "AmberMuteTime": 5.5
      },
      "onAdded": [
        {
          "$type": "AttachEffect",
          "effectPattern": "Eff_SceneObj_DreamPortal_01",
          "born": {
            "$type": "ConfigBornBySelf",
            "offset": {
              "x": 0,
              "y": 1.35,
              "z": 0
            }
          }
        },
        {
          "$type": "SendEffectTrigger",
          "effectPattern": "Eff_SceneObj_DreamPortal_01",
          "canBeHandledOnRecover": true,
          "type": "Int",
          "parameter": "GadgetState",
          "value": 0,
          "doAfterDie": true,
          "doOffStage": true,
          "predicates": [
            {
              "$type": "ByTargetGadgetState",
              "target": "Self",
              "gadgetState": 0
            }
          ]
        },
        {
          "$type": "SendEffectTrigger",
          "effectPattern": "Eff_SceneObj_DreamPortal_01",
          "canBeHandledOnRecover": true,
          "type": "Int",
          "parameter": "GadgetState",
          "value": 201,
          "doAfterDie": true,
          "doOffStage": true,
          "predicates": [
            {
              "$type": "ByTargetGadgetState",
              "target": "Self",
              "gadgetState": 201
            }
          ]
        }
      ],
      "onFieldEnter": [
        {
          //防穿帮 移除创生物
          "$type": "ClearLocalGadgets"
        },
        {
          //防穿帮逃课 短暂移除玩家身上琥珀buff
          "$type": "ApplyModifier",
          "modifierName": "DreamPortal_MuteAmberEff_1",
          "target": "Target",
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "TargetTeam",
              "key": "_HAS_AMBER",
              "value": 1,
              "compareType": "Equal"
            },
            {
              "$type": "ByTargetGlobalValue",
              "value": 0,
              "target": "Self",
              "key": "SGV_DreamPortal_KillAmberBuff", //是否永久移除
              "compareType": "NoneOrEqual"
            }
          ]
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "DreamPortal_MuteAmberEff_2",
          "target": "Target",
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "TargetTeam",
              "key": "_HAS_AMBER",
              "value": 2,
              "compareType": "Equal"
            },
            {
              "$type": "ByTargetGlobalValue",
              "value": 0,
              "target": "Self",
              "key": "SGV_DreamPortal_KillAmberBuff",
              "compareType": "NoneOrEqual"
            }
          ]
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "DreamPortal_MuteAmberEff_3",
          "target": "Target",
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "TargetTeam",
              "key": "_HAS_AMBER",
              "value": 3,
              "compareType": "Equal"
            },
            {
              "$type": "ByTargetGlobalValue",
              "value": 0,
              "target": "Self",
              "key": "SGV_DreamPortal_KillAmberBuff",
              "compareType": "NoneOrEqual"
            }
          ]
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "DreamPortal_ClearAmberEff",
          "target": "Target",
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "TargetTeam",
              "key": "_HAS_AMBER",
              "value": 0,
              "compareType": "MoreThan"
            },
            {
              "$type": "ByTargetGlobalValue",
              "value": 0,
              "target": "Self",
              "key": "SGV_DreamPortal_KillAmberBuff",
              "compareType": "MoreThan"
            }
          ]
        },
        {
          "$type": "ChangeGadgetState",
          "state": 0
        },
        {
          "$type": "ServerLuaCall",
          "funcName": "SLC_TeleportHotSpot_NeedRemove",
          "luaCallType": "FromGroup"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "DreamPortal_StateRecover",
          "target": "Self"
        },
        {
          "$type": "ServerLuaTriggerEvent",
          "luaCallType": "FromGroup",
          "sourceName": "DreamPortalEnter"
        }
      ],
      "abilityMixins": [
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "DreamPortal_DefaultState"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 201,
          "modifierName": "DreamPortal_OpenState"
        }
      ],
      "modifiers": {
        "DreamPortal_ClearAmberEff": {
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "TargetTeam",
              "key": "_HAS_AMBER",
              "value": 0
            }
          ]
        },
        "DreamPortal_MuteAmberEff_1": {
          "duration": "%AmberMuteTime",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "TargetTeam",
              "key": "_HAS_AMBER",
              "value": 0
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "TargetTeam",
              "key": "_HAS_AMBER",
              "value": 1
            }
          ]
        },
        "DreamPortal_MuteAmberEff_2": {
          "duration": "%AmberMuteTime",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "TargetTeam",
              "key": "_HAS_AMBER",
              "value": 0
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "TargetTeam",
              "key": "_HAS_AMBER",
              "value": 2
            }
          ]
        },
        "DreamPortal_MuteAmberEff_3": {
          "duration": "%AmberMuteTime",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "TargetTeam",
              "key": "_HAS_AMBER",
              "value": 0
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "TargetTeam",
              "key": "_HAS_AMBER",
              "value": 3
            }
          ]
        },
        "DreamPortal_StateRecover": {
          "duration": 5,
          "onRemoved": [
            {
              "$type": "ChangeGadgetState",
              "state": 201
            }
          ]
        },
        "DreamPortal_DefaultState": {
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "effectPattern": "Eff_SceneObj_DreamPortal_01",
              "canBeHandledOnRecover": true,
              "type": "Int",
              "parameter": "GadgetState",
              "value": 0,
              "doAfterDie": true,
              "doOffStage": true
            }
          ]
        },
        "DreamPortal_OpenState": {
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "effectPattern": "Eff_SceneObj_DreamPortal_01",
              "canBeHandledOnRecover": true,
              "type": "Int",
              "parameter": "GadgetState",
              "value": 201,
              "doAfterDie": true,
              "doOffStage": true
            }
          ]
        }
      }
    }
  },
  /////////////////////////////////////////////////////////////////
  //
  // 瀑布1
  //
  /////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Common_Property_Water_Waterfall_01",
      "onAdded": [
        {
          "$type": "AttachEffect",
          "effectPattern": "Eff_SceneObj_Common_WaterFlow_01_Vo_02"
        }
      ],
      "abilityMixins": [
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "Waterfall_DefaultState"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 201,
          "modifierName": "Waterfall_OpenState"
        }
      ],
      "modifiers": {
        "Waterfall_DefaultState": {
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "effectPattern": "Eff_SceneObj_Common_WaterFlow_01_Vo_02",
              "type": "Int",
              "parameter": "GadgetState",
              "value": 0
            }
          ]
        },
        "Waterfall_OpenState": {
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "effectPattern": "Eff_SceneObj_Common_WaterFlow_01_Vo_02",
              "type": "Int",
              "parameter": "GadgetState",
              "value": 201
            }
          ]
        }
      }
    }
  },
  /////////////////////////////////////////////////////////////////
  //
  // 瀑布2
  //
  /////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Common_Property_Water_Waterfall_02",
      "onAdded": [
        {
          "$type": "AttachEffect",
          "effectPattern": "Eff_SceneObj_Common_WaterFlow_01_Vo_01"
        }
      ],
      "abilityMixins": [
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "Waterfall_DefaultState"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 201,
          "modifierName": "Waterfall_OpenState"
        }
      ],
      "modifiers": {
        "Waterfall_DefaultState": {
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "effectPattern": "Eff_SceneObj_Common_WaterFlow_01_Vo_01",
              "type": "Int",
              "parameter": "GadgetState",
              "value": 0
            }
          ]
        },
        "Waterfall_OpenState": {
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "effectPattern": "Eff_SceneObj_Common_WaterFlow_01_Vo_01",
              "type": "Int",
              "parameter": "GadgetState",
              "value": 201
            }
          ]
        }
      }
    }
  },
  /////////////////////////////////////////////////////////////////
  //
  // 瀑布3
  //
  /////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Common_Property_Water_Waterfall_03",
      "onAdded": [
        {
          "$type": "AttachEffect",
          "effectPattern": "Eff_SceneObj_Common_WaterFlow_01_Vo"
        }
      ],
      "abilityMixins": [
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "Waterfall_DefaultState"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 201,
          "modifierName": "Waterfall_OpenState"
        }
      ],
      "modifiers": {
        "Waterfall_DefaultState": {
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "effectPattern": "Eff_SceneObj_Common_WaterFlow_01_Vo",
              "type": "Int",
              "parameter": "GadgetState",
              "value": 0
            }
          ]
        },
        "Waterfall_OpenState": {
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "effectPattern": "Eff_SceneObj_Common_WaterFlow_01_Vo",
              "type": "Int",
              "parameter": "GadgetState",
              "value": 201
            }
          ]
        }
      }
    }
  },
  /////////////////////////////////////////////////////////////////
  //
  // 机关电梯 电梯井特效
  //
  /////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Common_Property_Ani_Build_Elevator_Disc_03",
      "abilityMixins": [
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 201,
          "modifierName": "Elevator_Disc_Effect_On"
        }
      ],
      "modifiers": {
        "Elevator_Disc_Effect_On": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_Build_Elevator_Disc_01_Cover_Loop"
            }
          ],
          "onRemoved": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_Build_Elevator_Disc_01_Cover_Diss"
            }
          ]
        }
      }
    }
  },
  /////////////////////////////////////////////////////////////////
  //
  // 机关电梯 圆盘
  //
  /////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Common_Property_Ani_Build_Elevator_Disc_02",
      /*"onAdded": 
            [
                {
                    "$type": "AttachEffect",
                    "effectPattern": "Eff_SceneObj_DreamPortal_01",
                }
            ],*/
      "abilityMixins": [
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "Elevator_Disc_On1"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 108,
          "modifierName": "Elevator_Disc_On2"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 116,
          "modifierName": "Elevator_Disc_On3"
        }
      ],
      "modifiers": {
        "Elevator_Disc_Emission": {
          "onAdded": [
            {
              "$type": "SetMaterialParamFloatByTransform",
              "canBeHandledOnRecover": true,
              "matName": "Disc",
              "patternName": "_EmissionStrength",
              "lerpTime": 0.5,
              "value": 6
            }
          ],
          "onRemoved": [
            {
              "$type": "SetMaterialParamFloatByTransform",
              "canBeHandledOnRecover": true,
              "matName": "Disc",
              "patternName": "_EmissionStrength",
              "lerpTime": 0.5,
              "value": 0
            }
          ]
        },
        "Elevator_Disc_EmissionTimer": {
          "duration": 1, //等待旋转完成
          "onRemoved": [
            {
              "$type": "ApplyModifier",
              "modifierName": "Elevator_Disc_Emission"
            }
          ]
        },
        "Elevator_Disc_On1": {
          "onAdded": [
            {
              "$type": "AttachModifier",
              "modifierName": "Elevator_Disc_EmissionTimer"
            }
          ],
          "onRemoved": [
            {
              "$type": "RemoveModifier",
              "modifierName": "Elevator_Disc_Emission"
            }
          ]
        },
        "Elevator_Disc_On2": {
          "onAdded": [
            {
              "$type": "AttachModifier",
              "modifierName": "Elevator_Disc_EmissionTimer"
            }
          ],
          "onRemoved": [
            {
              "$type": "RemoveModifier",
              "modifierName": "Elevator_Disc_Emission"
            }
          ]
        },
        "Elevator_Disc_On3": {
          "onAdded": [
            {
              "$type": "AttachModifier",
              "modifierName": "Elevator_Disc_EmissionTimer"
            }
          ],
          "onRemoved": [
            {
              "$type": "RemoveModifier",
              "modifierName": "Elevator_Disc_Emission"
            }
          ]
        }
      }
    }
  },
  /////////////////////////////////////////////////////////////////
  //
  // 机关电梯
  //
  /////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Common_Property_Ani_Build_Elevator_Disc_01",
      "abilityMixins": [
        {
          "$type": "PlatformMoveMixin",
          "isLogicMove": true, //false偶现中间点位停顿误触发
          "moveModifiers": ["Elevator_Disc_Effect"]
        }
      ],
      "modifiers": {
        "Elevator_Disc_Effect": {
          "onAdded": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_Build_Elevator_Disc_01_08_Door_Active"
            },
            {
              "$type": "AttachModifier",
              "modifierName": "Delay_MovingEffect"
            },
            {
              "$type": "EnableSceneTransformByName",
              "canBeHandledOnRecover": true,
              "transformNames": ["Collider_Moving"],
              "setEnable": true
            }
          ],
          "onRemoved": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_Build_Elevator_Disc_01_08_Door_Diss"
            },
            {
              "$type": "RemoveModifier",
              "modifierName": "MovingEffect"
            },
            {
              "$type": "EnableSceneTransformByName",
              "canBeHandledOnRecover": true,
              "transformNames": ["Collider_Moving"],
              "setEnable": false
            }
          ]
        },
        "Delay_MovingEffect": {
          "duration": 1,
          "onRemoved": [
            {
              "$type": "ApplyModifier",
              "modifierName": "MovingEffect"
            }
          ]
        },
        "MovingEffect": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_Build_Elevator_Disc_01_08_Door_Loop"
            }
          ]
        }
      }
    }
  },
  ///////////////////////////////////////////////////
  //
  //  琥珀激活机关
  //
  ///////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Xm_Property_Prop_AmberKeyGear_01",
      "abilityMixins": [
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "DefaultState"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 201,
          "modifierName": "OpenState"
        }
      ],
      "onAdded": [],
      "modifiers": {
        "DefaultState": {
          //0
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_AmberKeyGear_Idle",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "EffectNode1"
              }
            }
          ],
          //检查是不是有玩家接近了这个门，是则需要把琥珀安到门上
          "thinkInterval": 0.5,
          "onThinkInterval": [
            {
              "$type": "Predicated",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR3H3",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Avatar"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "TargetTeam",
                  "key": "_HAS_AMBER",
                  "value": 0,
                  "compareType": "MoreThan"
                },
                {
                  //只能算接近的第一次
                  "$type": "ByTargetGlobalValue",
                  "key": "IN_TRIGGRE",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ],
              "successActions": [
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_AmberKeyGear_Add_2_Avatar1",
                  "target": "Other"
                },
                {
                  "$type": "ExecuteGadgetLua",
                  "param1": 201,
                  "target": "Self"
                }
              ]
            }
          ]
        },
        "OpenState": {
          //201
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_AmberKeyGear_Active",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "EffectNode2"
              }
            }
          ]
        },
        "UNIQUE_AmberKeyGear_Add_2_Avatar1": {
          //0 到 901
          "stacking": "Unique",
          "isUnique": true,
          "duration": 1,
          "onRemoved": [
            {
              "$type": "AddGlobalValue",
              "doOffStage": true,
              "key": "IN_TRIGGRE",
              "value": 0,
              "useLimitRange": true,
              "maxValue": 0,
              "minValue": 0
            }
          ],
          "onAdded": [
            {
              "$type": "AddGlobalValue",
              "key": "IN_TRIGGRE",
              "value": 1,
              "useLimitRange": true,
              "maxValue": 1,
              "minValue": 1
            },
            {
              "$type": "Predicated",
              "target": "Team",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_HAS_AMBER",
                  "value": 0,
                  "compareType": "MoreThan"
                }
              ],
              "successActions": [
                {
                  "$type": "AddGlobalValue",
                  "key": "_HAS_AMBER",
                  "target": "Team",
                  "value": -1,
                  "useLimitRange": true,
                  "maxValue": 3,
                  "minValue": 0
                }
              ]
            }
          ]
        }
      }
    }
  },
  //////////////////////////////////////////////////////////////////////////////////////////////////
  //
  //	大树地城循环远景
  //
  //////////////////////////////////////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Area_Common_Property_Prop_LoopFarView_01",
      "abilityMixins": [
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "MoveType_1"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 201,
          "modifierName": "MoveType_2"
        }
      ],
      "modifiers": {
        "MoveType_1": {
          "onAdded": [
            {
              "$type": "SetAnimatorInt",
              "intID": "GadgetState",
              "canBeHandledOnRecover": true,
              "value": 0
            },
            {
              //开启City的tick跟随
              "$type": "SectorCityManeuver",
              "attachPointName": "FollowNode",
              "canBeHandledOnRecover": true,
              "start": true
            }
          ]
        },
        "MoveType_2": {
          "onAdded": [
            {
              "$type": "SetAnimatorInt",
              "intID": "GadgetState",
              "canBeHandledOnRecover": true,
              "value": 201
            },
            {
              //开启City的tick跟随
              "$type": "SectorCityManeuver",
              "attachPointName": "FollowNode",
              "canBeHandledOnRecover": true,
              "start": true
            }
          ]
        }
      }
    }
  },
  /////////////////////////////////////////////////////////////////
  //
  // 雨生花
  //
  /////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Xm_Property_Ani_Prop_RainFlower_01",
      "abilityMixins": [
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 201,
          "modifierName": "RainFlower_On"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "RainFlower_Off"
        }
      ],
      "modifiers": {
        "RainFlower_On": {
          "onAdded": [
            {
              "$type": "SetMaterialParamFloatByTransform",
              "matName": "Dissolve",
              "patternName": "_DitherAlpha",
              "canBeHandledOnRecover": true,
              "value": 1
            },
            {
              "$type": "SetMaterialParamFloatByTransform",
              "matName": "Dissolve",
              "patternName": "_DitherAlpha",
              "value": 0,
              "lerpTime": 4,
              "useCurve": true,
              "lerpCurveIndex": 0
            },
            {
              "$type": "EnableSceneTransformByName",
              "canBeHandledOnRecover": true,
              "transformNames": ["Collider"],
              "setEnable": false
            },
            {
              //开启音效
              "$type": "TriggerAudio",
              "responder": "Caster",
              "operation": {
                "$type": "ConfigAudioEventOp",
                "operation": { "text": "Play_amb_sceneObj_gear_rainFlower_01" }
              }
            }
          ]
        },
        "RainFlower_Off": {
          "onAdded": [
            {
              "$type": "SetMaterialParamFloatByTransform",
              "matName": "Dissolve",
              "patternName": "_DitherAlpha",
              "value": 1,
              "lerpTime": 4,
              "useCurve": true,
              "lerpCurveIndex": 0
            },
            {
              "$type": "EnableSceneTransformByName",
              "canBeHandledOnRecover": true,
              "transformNames": ["Collider"],
              "setEnable": true
            },
            {
              //关闭音效
              "$type": "TriggerAudio",
              "responder": "Caster",
              "operation": {
                "$type": "ConfigAudioEventOp",
                "operation": { "text": "Play_amb_sceneObj_gear_rainFlower_01" }
              }
            }
          ]
        }
      }
    }
  },
  ///////////////////////////////////////////////////////////////////
  //
  // 散兵工厂操作台
  //
  ///////////////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_Operator_Invisible_LuaTriggerOperator_01",
      "abilityMixins": [
        {
          "$type": "WidgetMpSupportMixin",
          "succActions": [
            {
              "$type": "ApplyModifier",
              "modifierName": "LuaTriggerOperator_Intee"
            }
          ]
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "Operator_On"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 202,
          "modifierName": "Operator_Off"
        }
      ],
      "onAdded": [
        {
          "$type": "EnableGadgetIntee",
          "enable": true,
          "predicates": [
            {
              "$type": "ByTargetGadgetState",
              "gadgetState": 0,
              "target": "Self"
            }
          ]
        },
        {
          "$type": "SetMaterialParamFloatByTransform",
          "canBeHandledOnRecover": true,
          "matName": "Emission",
          "patternName": "_EmissionStrength",
          "value": 0.5,
          "predicates": [
            {
              "$type": "ByTargetGadgetState",
              "gadgetState": 202,
              "target": "Self"
            }
          ]
        },
        {
          "$type": "SetMaterialParamFloatByTransform",
          "canBeHandledOnRecover": true,
          "matName": "Emission",
          "patternName": "_EmissionStrength",
          "value": 4,
          "predicates": [
            {
              "$type": "ByTargetGadgetState",
              "gadgetState": 0,
              "target": "Self"
            }
          ]
        }
      ],
      "modifiers": {
        "Operator_On": {
          "onAdded": [
            {
              "$type": "SetMaterialParamFloatByTransform",
              "matName": "Emission",
              "patternName": "_EmissionStrength",
              "value": 4,
              "useCurve": true,
              "lerpCurveIndex": 0,
              "lerpTime": 0.5
            }
          ]
        },
        "Operator_Off": {
          "onAdded": [
            {
              "$type": "ApplyModifier",
              "modifierName": "Operator_OffDelay"
            }
          ]
        },
        "Operator_OffDelay": {
          "duration": 1,
          "onRemoved": [
            {
              "$type": "SetMaterialParamFloatByTransform",
              "matName": "Emission",
              "patternName": "_EmissionStrength",
              "value": 0.5,
              "useCurve": true,
              "lerpCurveIndex": 0,
              "lerpTime": 0.5
            }
          ]
        },
        "LuaTriggerOperator_Intee": {
          "duration": 1.5,
          "onAdded": [
            {
              "$type": "EnableGadgetIntee",
              "enable": false
            },
            {
              "$type": "SetAnimatorTrigger",
              "triggerID": "Active"
            },
            {
              "$type": "ServerLuaTriggerEvent",
              "luaCallType": "FromGroup",
              "sourceName": "FactoryOperator"
            }
          ],
          "onRemoved": [
            {
              "$type": "EnableGadgetIntee",
              "enable": true,
              "predicates": [
                {
                  "$type": "ByTargetGadgetState",
                  "gadgetState": 0,
                  "target": "Self"
                }
              ]
            }
          ]
        }
      }
    }
  },
  /////////////////////////////////////////////////////////////////
  //
  // 大树地城氛围特效 分平台灯光
  //
  /////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Other_Property_Prop_BigTreeDungeonEff_01",
      "abilityMixins": [
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 201,
          "modifierName": "BigTreeDungeonEff_On"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "BigTreeDungeonEff_Off"
        }
      ],
      "onAdded": [
        {
          "$type": "AttachEffect",
          "effectPattern": "Eff_Level_FCdungeon_BigTree_Light_01",
          "isPlatformDependent": true
        }
      ],
      "modifiers": {
        "BigTreeDungeonEff_On": {
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "GV_GadgetState",
              "value": 201
            }
          ]
        },
        "BigTreeDungeonEff_Off": {
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "GV_GadgetState",
              "value": 0
            }
          ]
        }
      }
    }
  },
  /////////////////////////////////////////////////////////////////
  //
  // 船舵
  //
  /////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Xm_Property_Ani_Prop_Rudder_01",
      "abilityMixins": [
        {
          "$type": "AttachToAnimatorStateIDMixin",
          "stateIDs": ["Active"],
          "modifierName": "Rudder_On"
        }
      ],
      "modifiers": {
        "Rudder_On": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_Rubber_Active",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "EffectNode"
              }
            }
          ]
        }
      }
    }
  }
]
