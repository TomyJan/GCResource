[
  /////////////////////////////////////////////////////////////////////////////////
  //塔防2.0
  /////////////////////////////////////////////////////////////////////////////////
  //////////////////////////////////////////////////////////////////
  //
  // 塔防雷炮塔
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_Electric",
      //基础属性值
      "abilitySpecials": {
        "Electric_Attack_Range": 15
      },
      "onAdded": [
        //管理模型
        {
          "$type": "ApplyModifier",
          "modifierName": "ModelController"
        },
        //管理攻击逻辑
        {
          "$type": "ApplyModifier",
          "modifierName": "TowerAttackController"
        },
        //管理升级逻辑
        {
          "$type": "ApplyModifier",
          "modifierName": "UpgradeController"
        },
        //找不到目标的时候标记为0不触发闪电攻击，在此初始化
        {
          "$type": "SetGlobalValue",
          "key": "Can_Trigger_Thunder",
          "value": 0
        },
        //标记自己是塔，给增幅器用
        {
          "$type": "SetGlobalValue",
          "key": "IS_TOWER",
          "value": 1
        },
        //周围敌人数量
        {
          "$type": "SetGlobalValue",
          "key": "NUM_TARGETS",
          "value": 0
        }
      ],
      "modifiers": {
        //调整模型显示
        "ModelController": {
          "onAdded": [
            {
              "$type": "TriggerSetRenderersEnable",
              "doOffStage": true,
              "renderNames": ["Property_Ani_Prop_Tower"],
              "setEnable": false
            },
            {
              "$type": "TriggerSetRenderersEnable",
              "doOffStage": true,
              "renderNames": ["Property_Ani_Prop_TowerFire_02_Lod0"],
              "setEnable": true
            }
          ]
        },
        "TowerAttackController": {
          //监听攻速、射程globalvalue
          "modifierMixins": [
            {
              //管理塔普攻
              "$type": "TDPlayMixinV2",
              "towerType": "Electric",
              "baseCD": 4,
              "baseAttackRange": 15,
              "bulletID": 0,
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint"
              },
              //根据普攻升级使用特效
              "onFireActions": [
                //攻击特效
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_TowerElectric_Fire",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                },
                //攻击传进来的目标
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ElectricAttack",
                  "target": "SelfAttackTarget"
                },
                //根据SGV升级选额外1个目标
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ElectricAttack",
                  "otherTargets": {
                    "$type": "SelectTargetsByShape",
                    "shapeName": "CircleR30",
                    "centerBasedOn": "Self",
                    "campTargetType": "All",
                    "campBasedOn": "Self",
                    "topLimit": 1,
                    "sortType": "Nearest" //从近开始选
                  },
                  "predicates": [
                    //升级为1级
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_ExtraTargets",
                      "target": "Self",
                      "value": 1,
                      "compareType": "Equal"
                    },
                    {
                      "$type": "ByEntityTypes",
                      "entityTypes": ["Monster"]
                    },
                    {
                      //比较是否在射程内
                      "$type": "ByTargetPositionToSelfPosition",
                      "compareType": "XZ",
                      "value": "%Electric_Attack_Range",
                      "logic": "LesserOrEqual"
                    },
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "GV_BeAttacked",
                      "target": "Target",
                      "value": 0,
                      "compareType": "NoneOrEqual"
                    }
                  ]
                },
                //根据SGV升级选额外额外2个目标
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ElectricAttack",
                  "otherTargets": {
                    "$type": "SelectTargetsByShape",
                    "shapeName": "CircleR30",
                    "centerBasedOn": "Self",
                    "campTargetType": "All",
                    "campBasedOn": "Self",
                    "topLimit": 2,
                    "sortType": "Nearest" //从近开始选
                  },
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_ExtraTargets",
                      "target": "Self",
                      "value": 2,
                      "compareType": "MoreThanAndEqual"
                    },
                    {
                      "$type": "ByEntityTypes",
                      "entityTypes": ["Monster"]
                    },
                    {
                      //比较是否在射程内
                      "$type": "ByTargetPositionToSelfPosition",
                      "compareType": "XZ",
                      "value": "%Electric_Attack_Range",
                      "logic": "LesserOrEqual"
                    },
                    {
                      //排除已经被自己攻击过的单位
                      "$type": "ByTargetGlobalValue",
                      "key": "GV_BeAttacked",
                      "target": "Target",
                      "value": 0,
                      "compareType": "NoneOrEqual"
                    }
                  ]
                },
                //攻击完成，重置怪物可以被攻击
                {
                  "$type": "SetGlobalValue",
                  "key": "GV_BeAttacked",
                  "value": 0,
                  "otherTargets": {
                    "$type": "SelectTargetsByShape",
                    "shapeName": "CircleR30",
                    "centerBasedOn": "Self",
                    "campTargetType": "All",
                    "campBasedOn": "Self",
                    "sortType": "Nearest" //从近开始选
                  },
                  "predicates": [
                    {
                      "$type": "ByEntityTypes",
                      "entityTypes": ["Monster"]
                    }
                  ]
                },
                //触发怒意狂击V1
                {
                  "$type": "ApplyModifier",
                  "modifierName": "FurySwipeLv1",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_FurySwipe",
                      "target": "Self",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ]
                },
                //触发怒意狂击V2
                {
                  "$type": "ApplyModifier",
                  "modifierName": "FurySwipeLv2",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_FurySwipe",
                      "target": "Self",
                      "value": 2,
                      "compareType": "Equal"
                    }
                  ]
                },
                //筛选周围的敌人数量
                {
                  "$type": "Predicated",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_UpgradeNormalAttack",
                      "target": "Self",
                      "value": 1,
                      "compareType": "MoreThanAndEqual"
                    }
                  ],
                  "successActions": [
                    {
                      "$type": "ApplyModifier",
                      "modifierName": "TargetCounter",
                      "otherTargets": {
                        "$type": "SelectTargetsByShape",
                        "shapeName": "CircleR30",
                        "centerBasedOn": "Self",
                        "campTargetType": "All",
                        "campBasedOn": "Self",
                        "sortType": "Nearest" //从近开始选
                      },
                      "predicates": [
                        {
                          "$type": "ByEntityTypes",
                          "entityTypes": ["Monster"]
                        },
                        {
                          //比较是否在射程内
                          "$type": "ByTargetPositionToSelfPosition",
                          "compareType": "XZ",
                          "value": "%Electric_Attack_Range",
                          "logic": "LesserOrEqual"
                        }
                      ]
                    }
                  ]
                },
                //根据GV给自己加攻击力,周围只有一个目标
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_PowerAttackByOneLv1",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_UpgradeNormalAttack",
                      "target": "Self",
                      "value": 1,
                      "compareType": "Equal"
                    },
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "NUM_TARGETS",
                      "target": "Self",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ]
                },
                //根据GV给自己加攻击力,没有升级分叉
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_PowerAttackByOneLv1",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_UpgradeNormalAttack",
                      "target": "Self",
                      "value": 1,
                      "compareType": "Equal"
                    },
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_ExtraTargets",
                      "target": "Self",
                      "value": 0,
                      "compareType": "Equal"
                    }
                  ]
                },
                //根据GV给自己加攻击力,周围只有一个目标
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_PowerAttackByOneLv2",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_UpgradeNormalAttack",
                      "target": "Self",
                      "value": 2,
                      "compareType": "Equal"
                    },
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "NUM_TARGETS",
                      "target": "Self",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ]
                },
                //根据GV给自己加攻击力,没有升级分叉
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_PowerAttackByOneLv2",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_UpgradeNormalAttack",
                      "target": "Self",
                      "value": 2,
                      "compareType": "Equal"
                    },
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_ExtraTargets",
                      "target": "Self",
                      "value": 0,
                      "compareType": "Equal"
                    }
                  ]
                },
                //攻击完成后将周围的单位数量刷新为0
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ResetTargetNums",
                  "target": "Self"
                }
              ]
            }
          ]
        },
        "UpgradeController": {
          "modifierMixins": [
            {
              //添加雷脉冲
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_ElectricImpulse",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["ElectricImpulseLv1", "ElectricImpulseLv2"]
            },
            {
              //添加攻击力强化效果
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_UpgradeNormalAttack",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["PowerAttackLv1", "PowerAttackLv2"]
            },
            {
              //外挂额外闪电
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_ExtraThunder",
              "valueSteps": [0.5, 20],
              "modifierNameSteps": ["ExtraThunder"]
            },
            {
              //感电伤害提升
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_UpgradeElectricRecation",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["UpgradeShockLv1", "UpgradeShockLv2"]
            },
            {
              //超载伤害提升
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_UpgradeElectricRecation",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["UpgradeExplodeLv1", "UpgradeExplodeLv2"]
            },
            {
              //超导降低物理抗性
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_ReducePhysicalResistance",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": [
                "ReducePhysicalResistanceBySConductLv1",
                "ReducePhysicalResistanceBySConductLv2"
              ]
            },
            {
              //提升攻击范围
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_RangeLevel",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["AttackRangeLv1", "AttackRangeLv2"]
            }
          ]
        },
        //对目标使用闪电链攻击
        "ElectricAttack": {
          "duration": 0.3,
          "onAdded": [
            //增加GV标记被攻击
            {
              "$type": "SetGlobalValue",
              "key": "GV_BeAttacked",
              "value": 1,
              "target": "Self"
            },
            //根据SGV选择受击特效
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_UpgradeNormalAttack",
                  "target": "Applier",
                  "value": 0,
                  "compareType": "Equal"
                }
              ],
              "successActions": [
                {
                  "$type": "AttachEffect",
                  "effectPattern": "Eff_SceneObj_TowerElectric_01",
                  "target": "Self",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint",
                    "attachPointTargetType": "Applier",
                    "offset": {
                      "x": 0,
                      "y": 0,
                      "z": 0
                    }
                  }
                }
              ],
              "failActions": [
                {
                  "$type": "AttachEffect",
                  "effectPattern": "Eff_SceneObj_TowerElectric_01_Up",
                  "target": "Self",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint",
                    "attachPointTargetType": "Applier",
                    "offset": {
                      "x": 0,
                      "y": 0,
                      "z": 0
                    }
                  }
                }
              ]
            },

            //打伤害
            {
              "$type": "TriggerAttackEvent",
              "target": "Caster",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackBox",
                  "triggerType": "TriggerNoRepeat",
                  "size": {
                    "x": 0.1,
                    "y": 0.1,
                    "z": 0.6
                  },
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointTargetType": "Self",
                    "attachPointName": "RootNode",
                    "offset": {
                      "x": 0.0,
                      "y": 0.2,
                      "z": 0.0
                    }
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.8,
                    "strikeType": "Default",
                    "elementType": "Electric",
                    "elementDurability": 50,
                    "elementRank": 1.5,
                    "enBreak": 10
                  },
                  "hitPattern": {
                    "onHitEffectName": "Eff_SceneObj_TowerElectric_01_Hit",
                    "hitImpulseType": "LV1",
                    "reboundRatio": 0,
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.05,
                    "muteHitText": false
                  }
                }
              }
            },
            //打盾牌
            {
              "$type": "DamageByAttackValue",
              "attacker": "Caster",
              "otherTargets": {
                "$type": "SelectTargetsByEquipParts",
                "equipPartNames": ["equip01", "equip02"]
              },

              "attackInfo": {
                "attackProperty": {
                  "damagePercentage": 0.8,
                  "strikeType": "Default",
                  "elementType": "Electric",
                  "elementDurability": 50,
                  "elementRank": 1.5,
                  "enBreak": 10
                },
                "hitPattern": {
                  "onHitEffectName": "Eff_SceneObj_TowerElectric_01_Hit",
                  "hitImpulseType": "LV1",
                  "reboundRatio": 0,
                  "hitHaltTime": 0.0,
                  "hitHaltTimeScale": 0.05,
                  "muteHitText": false
                }
              }
            },
            //受击次数增加
            {
              "$type": "AddGlobalValue",
              "key": "GV_ConfineTimes",
              "value": 1,
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_Confine",
                  "target": "Applier",
                  "value": 0,
                  "compareType": "MoreThan"
                }
              ]
            },
            //根据升级增加禁锢debuff
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_ConfineSelf",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "GV_ConfineTimes",
                  "target": "Self",
                  "value": 7,
                  "compareType": "MoreThan"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_Confine",
                  "target": "Applier",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_ConfineSelf",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "GV_ConfineTimes",
                  "target": "Self",
                  "value": 3,
                  "compareType": "MoreThan"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_Confine",
                  "target": "Applier",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            }
          ]
        },
        //召唤闪电
        "ExtraThunder": {
          "thinkInterval": 8,
          "onThinkInterval": [
            {
              //筛选一个最近的目标
              "$type": "ApplyModifier",
              "modifierName": "Thunder_Fall_Target",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR15",
                "centerBasedOn": "Self",
                "campTargetType": "Enemy",
                "campBasedOn": "Self",
                "topLimit": 1,
                "sortType": "Nearest"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                }
              ]
            },
            //落雷特效
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerElectric_04",
              "born": {
                "$type": "ConfigBornByGlobalValue",
                "positionKey": "Thunder_Pos"
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "Can_Trigger_Thunder",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            //落雷攻击事件
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": 2.5,
                  "born": {
                    "$type": "ConfigBornByGlobalValue",
                    "positionKey": "Thunder_Pos"
                  }
                },
                "attackInfo": {
                  "attackTag": "ExtraThunderAttack",
                  "attackProperty": {
                    "damagePercentage": 1.0,
                    "strikeType": "Default",
                    "elementType": "Electric",
                    "elementDurability": 50,
                    "enBreak": 30.0
                  },
                  "hitPattern": {
                    "onHitEffectName": "Eff_SceneObj_TowerElectric_01_Hit",
                    "hitImpulseType": "LV1",
                    "reboundRatio": 0,
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.05,
                    "muteHitText": false
                  }
                }
              },
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "Can_Trigger_Thunder",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "Can_Trigger_Thunder",
              "value": 0
            }
          ],
          "onAttackLanded": [
            {
              "$type": "ApplyModifier",
              "modifierName": "UpgradgeElemMasteryByThunderLv1",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": ["ExtraThunderAttack"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_ExtraThunder",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "UpgradgeElemMasteryByThunderLv2",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": ["ExtraThunderAttack"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_ExtraThunder",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            }
          ]
        },
        //落雷目标特效
        "Thunder_Fall_Target": {
          "duration": 0.5,
          "onAdded": [
            {
              "$type": "SetGlobalPos",
              "target": "Applier",
              "key": "Thunder_Pos",
              "born": {
                "$type": "ConfigBornBySelf"
              }
            },
            {
              "$type": "SetGlobalValue",
              "target": "Applier",
              "key": "Can_Trigger_Thunder",
              "value": 1
            }
          ]
        },
        //每次攻击后一段时间提高攻击力，怒意狂击效果
        "FurySwipeLv1": {
          "duration": 20.0,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 5
          },
          "properties": {
            "Actor_AttackRatio": 0.05
          }
        },
        "FurySwipeLv2": {
          "duration": 20.0,
          "stacking": "MultipleAllRefresh",
          "onAdded": [
            {
              "$type": "RemoveModifier",
              "modifierName": "FurySwipeLv1"
            }
          ],
          "stackingOption": {
            "maxModifierNumForMultipleType": 5
          },
          "properties": {
            "Actor_AttackRatio": 0.1
          }
        },
        //禁锢效果
        "UNIQUE_ConfineSelf": {
          "isUnique": true,
          "duration": 0.5,
          "stacking": "Refresh",
          // "state":"Paralyze",  //无效的state，于2.5版本删除
          "target": "Self",
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerTrap_01_Confined",
              "target": "Self",
              "born": {
                "$type": "ConfigBornBySelf",
                "onGround": true
              }
            },
            {
              "$type": "SetGlobalValue",
              "target": "Self",
              "key": "GV_ConfineTimes",
              "value": 0
            }
          ],
          "properties": {
            "Animator_MoveSpeedRatio": -1
          }
        },
        //雷脉冲V1
        "ElectricImpulseLv1": {
          "thinkInterval": 20,
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerElectric_Halo_01_Loop",
              "target": "Self"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerElectric_Halo_01_Once",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint",
                "offset": {
                  "x": 0.0,
                  "y": -1.4,
                  "z": 0.0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": 12,
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "strikeType": "Default",
                    "elementType": "Electric",
                    "elementDurability": 200,
                    "ignoreAttackerProperty": true
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV3",
                    "overrideHitImpulse": {
                      "hitLevel": "Heavy",
                      "hitImpulseX": 50,
                      "hitImpulseY": 800
                    },
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.05,
                    "muteHitText": false
                  }
                }
              }
            }
          ],
          "onThinkInterval": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerElectric_Halo_01_Once",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint",
                "offset": {
                  "x": 0.0,
                  "y": -1.4,
                  "z": 0.0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": 12,
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "strikeType": "Default",
                    "elementType": "Electric",
                    "elementDurability": 200,
                    "ignoreAttackerProperty": true
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV3",
                    "overrideHitImpulse": {
                      "hitLevel": "Heavy",
                      "hitImpulseX": 50,
                      "hitImpulseY": 800
                    },
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.05,
                    "muteHitText": false
                  }
                }
              }
            }
          ]
        },
        //雷脉冲V2
        "ElectricImpulseLv2": {
          "thinkInterval": 10,
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerElectric_Halo_01_Loop",
              "target": "Self"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerElectric_Halo_01_Once",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint",
                "offset": {
                  "x": 0.0,
                  "y": -1.4,
                  "z": 0.0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": 12,
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "strikeType": "Default",
                    "elementType": "Electric",
                    "elementDurability": 200,
                    "ignoreAttackerProperty": true
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV3",
                    "overrideHitImpulse": {
                      "hitLevel": "Heavy",
                      "hitImpulseX": 50,
                      "hitImpulseY": 800
                    },
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.05,
                    "muteHitText": false
                  }
                }
              }
            }
          ],
          "onThinkInterval": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerElectric_Halo_01_Once",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint",
                "offset": {
                  "x": 0.0,
                  "y": -1.4,
                  "z": 0.0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": 12,
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "strikeType": "Default",
                    "elementType": "Electric",
                    "elementDurability": 200,
                    "ignoreAttackerProperty": true
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV3",
                    "overrideHitImpulse": {
                      "hitLevel": "Heavy",
                      "hitImpulseX": 50,
                      "hitImpulseY": 800
                    },
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.05,
                    "muteHitText": false
                  }
                }
              }
            }
          ]
        },
        //攻击力提升
        "PowerAttackLv1": {
          "stacking": "Refresh",
          "properties": {
            "Actor_AttackRatio": 1.0
          }
        },
        //攻击力提升
        "PowerAttackLv2": {
          "stacking": "Refresh",
          "properties": {
            "Actor_AttackRatio": 2.0
          }
        },
        //单目标攻击力提升
        "UNIQUE_PowerAttackByOneLv1": {
          "duration": 1,
          "isUnique": true,
          "stacking": "Refresh",
          "properties": {
            "Actor_AddHurtDelta": 1.5
          }
        },
        "UNIQUE_PowerAttackByOneLv2": {
          "duration": 1,
          "isUnique": true,
          "stacking": "Refresh",
          "properties": {
            "Actor_AddHurtDelta": 3
          }
        },
        "TargetCounter": {
          "duration": 1,
          "onAdded": [
            {
              "$type": "AddGlobalValue",
              "key": "NUM_TARGETS",
              "target": "Applier",
              "value": 1
            }
          ]
        },
        //提升感电反应伤害
        "UpgradeShockLv1": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactElectricDelta": 1
          }
        },
        "UpgradeShockLv2": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactElectricDelta": 2
          }
        },
        //提升超载反应伤害
        "UpgradeExplodeLv1": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactExplodeDelta": 1
          }
        },
        "UpgradeExplodeLv2": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactExplodeDelta": 2
          }
        },
        //控制普攻距离
        "AttackRangeLv1": {
          "onAdded": [
            {
              "$type": "SetOverrideMapValue",
              "target": "Self",
              "overrideMapKey": "Electric_Attack_Range",
              "value": 23
            }
          ]
        },
        "AttackRangeLv2": {
          "onAdded": [
            {
              "$type": "SetOverrideMapValue",
              "target": "Self",
              "overrideMapKey": "Electric_Attack_Range",
              "value": 31
            }
          ]
        },
        //落雷增加精通
        "UpgradgeElemMasteryByThunderLv1": {
          "duration": 10.0,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 10
          },
          "properties": {
            "Actor_ElemMasteryDelta": 125
          }
        },
        "UpgradgeElemMasteryByThunderLv2": {
          "duration": 10.0,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 10
          },
          "properties": {
            "Actor_ElemMasteryDelta": 250
          }
        },
        //超导降低物理抗性
        "ReducePhysicalResistanceBySConductLv1": {
          "modifierMixins": [
            {
              "$type": "DoActionByElementReactionMixin",
              "range": 20, //这个就是默认值
              "entityTypes": ["Monster"],
              "reactionTypes": ["Superconductor"],
              "actions": [
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_ReducePhysicResistenceLv1",
                  "target": "Target"
                }
              ]
            }
          ]
        },
        "ReducePhysicalResistanceBySConductLv2": {
          "modifierMixins": [
            {
              "$type": "DoActionByElementReactionMixin",
              "range": 20, //这个就是默认值
              "entityTypes": ["Monster"],
              "reactionTypes": ["Superconductor"],
              "actions": [
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_ReducePhysicResistenceLv2",
                  "target": "Target"
                }
              ]
            }
          ]
        },
        "UNIQUE_ReducePhysicResistenceLv1": {
          "duration": 12,
          "isUnique": true,
          "stacking": "Refresh",
          "properties": {
            "Actor_PhysicalSubHurtDelta": -0.4
          }
        },
        "UNIQUE_ReducePhysicResistenceLv2": {
          "duration": 12,
          "isUnique": true,
          "stacking": "Refresh",
          "onAdded": [
            {
              "$type": "RemoveModifier",
              "modifierName": "UNIQUE_ReducePhysicResistenceLv1"
            }
          ],
          "properties": {
            "Actor_PhysicalSubHurtDelta": -0.8
          }
        },
        //重置周围人数
        "ResetTargetNums": {
          "duration": 0.3,
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "NUM_TARGETS",
              "value": 0
            }
          ]
        }
      }
    }
  },
  ///////////////////////////////
  //
  // 无属性炮塔
  //
  ////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_Physics",
      "onAdded": [
        //控制模型
        {
          "$type": "ApplyModifier",
          "modifierName": "ModelController"
        },
        //监听升级
        {
          "$type": "ApplyModifier",
          "modifierName": "UpgradeController"
        },
        //控制物理塔锁头方向
        {
          "$type": "EnablePartControl",
          "partRootNames": ["ShootControl"],
          "enable": true
        },
        {
          "$type": "EnablePartControl",
          "partRootNames": ["DirControl"],
          "enable": true
        },
        {
          "$type": "SetPartControlTarget",
          "partRootNames": ["ShootControl"],
          "target": "Target"
        },
        //标记自己是塔，给增幅器用
        {
          "$type": "SetGlobalValue",
          "key": "IS_TOWER",
          "value": 1
        }
      ],
      "abilitySpecials": {
        "None_Attack_Range": 24
      },
      "modifiers": {
        //调整模型
        "ModelController": {
          "onAdded": [
            {
              "$type": "TriggerSetRenderersEnable",
              "doOffStage": true,
              "renderNames": ["Property_Ani_Prop_TowerPhysics_02_Lod0"],
              "setEnable": true
            }
          ]
        },
        "UpgradeController": {
          "modifierMixins": [
            {
              //管理标记升级
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_WantedSign",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["WantedSignLv1", "WantedSignLv2"]
            },
            {
              //管理物理炮塔升级
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_RangeLevel",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["AttackRangeLv1", "AttackRangeLv2"]
            },
            {
              //管理物理炮塔子弹替换升级
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_EnergyBallAttack",
              "valueSteps": [-0.5, 0.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": [
                "NormalBulletController",
                "EnergyBulletController"
              ]
            }
          ]
        },
        //随机标记敌人降低物理抗性
        "WantedSignLv1": {
          "thinkInterval": 5,
          "onThinkInterval": [
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_ReducePhysicResistenceByMarkLv1",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR40",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "topLimit": 1,
                "campBasedOn": "Self",
                "sortType": "Random"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  //比较是否在射程内
                  "$type": "ByTargetPositionToSelfPosition",
                  "compareType": "XZ",
                  "value": "%None_Attack_Range",
                  "logic": "LesserOrEqual"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "GV_BeMarked",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ]
            }
          ]
        },
        "WantedSignLv2": {
          "thinkInterval": 5,
          "onThinkInterval": [
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_ReducePhysicResistenceByMarkLv2",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR40",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "topLimit": 1,
                "campBasedOn": "Self",
                "sortType": "Random"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  //比较是否在射程内
                  "$type": "ByTargetPositionToSelfPosition",
                  "compareType": "XZ",
                  "value": "%None_Attack_Range",
                  "logic": "LesserOrEqual"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "GV_BeMarked",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ]
            }
          ]
        },
        //降低物理抗性
        "UNIQUE_ReducePhysicResistenceByMarkLv1": {
          "duration": 15,
          "isUnique": true,
          "stacking": "Refresh",
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerPhysics_03_Mark",
              "attachPointName": "Fx_HeadNode"
            },
            {
              "$type": "SetGlobalValue",
              "key": "GV_ExtraMarkBuildPoint",
              "target": "Self",
              "value": 25
            },
            {
              "$type": "SetGlobalValue",
              "key": "GV_BeMarked",
              "target": "Self",
              "value": 1
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "GV_ExtraMarkBuildPoint",
              "target": "Self",
              "value": 0
            },
            {
              "$type": "SetGlobalValue",
              "key": "GV_BeMarked",
              "target": "Self",
              "value": 0
            }
          ],
          "properties": {
            "Actor_SubHurtDelta": -0.75
          }
        },
        //降低物理抗性
        "UNIQUE_ReducePhysicResistenceByMarkLv2": {
          "duration": 15,
          "isUnique": true,
          "stacking": "Refresh",
          "onAdded": [
            {
              "$type": "RemoveModifier",
              "modifierName": "UNIQUE_ReducePhysicResistenceByMarkLv1"
            },
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerPhysics_03_Mark",
              "attachPointName": "Fx_HeadNode"
            },
            {
              "$type": "SetGlobalValue",
              "key": "GV_ExtraMarkBuildPoint",
              "target": "Self",
              "value": 50
            },
            {
              "$type": "SetGlobalValue",
              "key": "GV_BeMarked",
              "target": "Self",
              "value": 1
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "GV_ExtraMarkBuildPoint",
              "target": "Self",
              "value": 0
            },
            {
              "$type": "SetGlobalValue",
              "key": "GV_BeMarked",
              "target": "Self",
              "value": 0
            }
          ],

          "properties": {
            "Actor_SubHurtDelta": -1.5
          }
        },
        //普通子弹
        "NormalBulletController": {
          //监听攻速、射程globalvalue
          "modifierMixins": [
            {
              "$type": "TDPlayMixinV2",
              "towerType": "Default",
              "baseCD": 2,
              "baseAttackRange": 24,
              "bulletID": 70350289,
              "partRootNames": ["ShootControl", "DirControl"],
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint"
              },
              "onFireActions": []
            }
          ]
        },
        //能量子弹
        "EnergyBulletController": {
          //监听攻速、射程globalvalue
          "modifierMixins": [
            {
              "$type": "TDPlayMixinV2",
              "towerType": "Default",
              "baseCD": 2,
              "baseAttackRange": 24,
              "bulletID": 70350304,
              "partRootNames": ["ShootControl", "DirControl"],
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint"
              },
              "onFireActions": []
            }
          ]
        },
        //修改物理炮塔射程
        "AttackRangeLv1": {
          "onAdded": [
            {
              "$type": "SetOverrideMapValue",
              "target": "Self",
              "overrideMapKey": "None_Attack_Range",
              "value": 32
            }
          ]
        },
        "AttackRangeLv2": {
          "onAdded": [
            {
              "$type": "SetOverrideMapValue",
              "target": "Self",
              "overrideMapKey": "None_Attack_Range",
              "value": 40
            }
          ]
        }
      }
    }
  },

  //////////////////////////////////////////////////////////////////
  //
  // 无属性炮塔子弹
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_PhysicsBullet",
      "onAdded": [
        {
          "$type": "ApplyModifier",
          "modifierName": "NormalBullet"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "DamageController",
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_DamageByTime",
              "value": 1,
              "compareType": "Equal"
            }
          ]
        }
      ],
      "onAbilityStart": [
        {
          //没有升级时播普通特效
          "$type": "FireEffect",
          "effectPattern": "Eff_SceneObj_TowerPhysics_02_Hit",
          "born": {
            "$type": "ConfigBornByCollisionPoint"
          }
        },
        {
          //播爆炸特效1
          "$type": "FireEffect",
          "effectPattern": "Eff_SceneObj_TowerPhysics_Explo_01",
          "born": {
            "$type": "ConfigBornByCollisionPoint"
          },
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_HitExplosion",
              "value": 1,
              "compareType": "Equal"
            }
          ]
        },
        {
          //播爆炸特效2
          "$type": "FireEffect",
          "effectPattern": "Eff_SceneObj_TowerPhysics_Explo_02",
          "born": {
            "$type": "ConfigBornByCollisionPoint"
          },
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_HitExplosion",
              "value": 2,
              "compareType": "Equal"
            }
          ]
        },
        //造成单体伤害
        {
          "$type": "DamageByAttackValue",
          "target": "Target",
          "attacker": "Caster",
          "attackInfo": {
            "attackProperty": {
              "damagePercentage": 0.75,
              "strikeType": "Blunt",
              "elementType": "None",
              "elementRank": 1.5,
              "enBreak": 120
            },
            "hitPattern": {
              "hitImpulseType": "LV2",
              "onHitEffectName": "none",
              "overrideHitImpulse": {
                "hitLevel": "Light", //hitlevel = 2
                "hitImpulseX": 0, //hitlevel = 2
                "hitImpulseY": 0 //hitlevel = 2
              },
              "reboundRatio": 0,
              "hitHaltTime": 0.0,
              "hitHaltTimeScale": 0.05,
              "muteHitText": false
            }
          }
        },
        //升级额外的爆炸伤害2
        {
          "$type": "TriggerAttackEvent",
          "targetType": "Enemy",
          "attackEvent": {
            "attackPattern": {
              "$type": "ConfigAttackSphere",
              "triggerType": "TriggerNoRepeat",
              "radius": 2,
              "born": {
                "$type": "ConfigBornByCollisionPoint"
              }
            },
            "attackInfo": {
              "attackProperty": {
                "damagePercentage": 0.25,
                "strikeType": "Default",
                "elementType": "None",
                "elementDurability": 0,
                "enBreak": 30.0
              },
              "hitPattern": {
                "onHitEffectName": "Eff_SceneObj_TowerPhysics_02_Hit",
                "hitImpulseType": "LV1",
                "reboundRatio": 0,
                "hitHaltTime": 0.0,
                "hitHaltTimeScale": 0.05,
                "muteHitText": false
              }
            }
          },
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_HitExplosion",
              "value": 1,
              "compareType": "Equal"
            }
          ]
        },
        //升级额外的爆炸伤害4
        {
          "$type": "TriggerAttackEvent",
          "targetType": "Enemy",
          "attackEvent": {
            "attackPattern": {
              "$type": "ConfigAttackSphere",
              "triggerType": "TriggerNoRepeat",
              "radius": 4,
              "born": {
                "$type": "ConfigBornByCollisionPoint"
              }
            },
            "attackInfo": {
              "attackProperty": {
                "damagePercentage": 0.25,
                "strikeType": "Default",
                "elementType": "None",
                "elementDurability": 0,
                "enBreak": 30.0
              },
              "hitPattern": {
                "onHitEffectName": "Eff_SceneObj_TowerPhysics_02_Hit",
                "hitImpulseType": "LV1",
                "reboundRatio": 0,
                "hitHaltTime": 0.0,
                "hitHaltTimeScale": 0.05,
                "muteHitText": false
              }
            }
          },
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_HitExplosion",
              "value": 2,
              "compareType": "Equal"
            }
          ]
        }
      ],
      "modifiers": {
        //普通子弹特效
        "NormalBullet": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerPhysics_02"
            }
          ]
        },
        "DamageUpgraderLv1": {
          "duration": 5.0,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 10
          },
          "properties": {
            "Actor_AttackRatio": 0.05
          }
        },
        "DamageUpgraderLv2": {
          "duration": 5.0,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 10
          },
          "properties": {
            "Actor_AttackRatio": 0.1
          }
        },
        //跟随时间提升伤害
        "DamageController": {
          "duration": 5,
          "thinkInterval": 0.5,
          "onThinkInterval": [
            {
              "$type": "ApplyModifier",
              "modifierName": "DamageUpgraderLv1",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_DamageByTime",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "DamageUpgraderLv2",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_DamageByTime",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            }
          ]
        }
      }
    }
  },

  //////////////////////////////////////////////////////////////////
  //
  // 无属性炮塔能量子弹
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_PhysicsEnergyBullet",
      "onAdded": [
        {
          "$type": "ApplyModifier",
          "modifierName": "EnergyBullet"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "DamageControllerEnergy"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "DamageController",
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_DamageByTime",
              "value": 1,
              "compareType": "Equal"
            }
          ]
        }
      ],
      "onAbilityStart": [
        {
          //能量球升级命中特效
          "$type": "FireEffect",
          "effectPattern": "Eff_SceneObj_TowerPhysics_03_Hit",
          "born": {
            "$type": "ConfigBornByCollisionPoint"
          }
        },
        {
          //播爆炸特效1
          "$type": "FireEffect",
          "effectPattern": "Eff_SceneObj_TowerPhysics_Explo_01",
          "born": {
            "$type": "ConfigBornByCollisionPoint"
          },
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_HitExplosion",
              "value": 1,
              "compareType": "Equal"
            }
          ]
        },
        {
          //播爆炸特效2
          "$type": "FireEffect",
          "effectPattern": "Eff_SceneObj_TowerPhysics_Explo_02",
          "born": {
            "$type": "ConfigBornByCollisionPoint"
          },
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_HitExplosion",
              "value": 2,
              "compareType": "Equal"
            }
          ]
        },
        //造成范围攻击
        {
          "$type": "TriggerAttackEvent",
          "targetType": "Enemy",
          "attackEvent": {
            "attackPattern": {
              "$type": "ConfigAttackSphere",
              "triggerType": "TriggerNoRepeat",
              "radius": 1.5,
              "born": {
                "$type": "ConfigBornByCollisionPoint"
              }
            },
            "attackInfo": {
              "attackProperty": {
                "damagePercentage": 0.75,
                "strikeType": "Blunt",
                "elementType": "None",
                "elementRank": 1.5,
                "enBreak": 120
              },
              "hitPattern": {
                "hitImpulseType": "LV2",
                "onHitEffectName": "none",
                "overrideHitImpulse": {
                  "hitLevel": "Light", //hitlevel = 2
                  "hitImpulseX": 0, //hitlevel = 2
                  "hitImpulseY": 0 //hitlevel = 2
                },
                "reboundRatio": 0,
                "hitHaltTime": 0.0,
                "hitHaltTimeScale": 0.05,
                "muteHitText": false
              }
            }
          }
        },
        //升级额外的爆炸伤害2
        {
          "$type": "TriggerAttackEvent",
          "targetType": "Enemy",
          "attackEvent": {
            "attackPattern": {
              "$type": "ConfigAttackSphere",
              "triggerType": "TriggerNoRepeat",
              "radius": 2.5,
              "born": {
                "$type": "ConfigBornByCollisionPoint"
              }
            },
            "attackInfo": {
              "attackProperty": {
                "damagePercentage": 0.25,
                "strikeType": "Default",
                "elementType": "None",
                "elementDurability": 0,
                "enBreak": 30.0
              },
              "hitPattern": {
                "onHitEffectName": "Eff_SceneObj_TowerPhysics_02_Hit",
                "hitImpulseType": "LV1",
                "reboundRatio": 0,
                "hitHaltTime": 0.0,
                "hitHaltTimeScale": 0.05,
                "muteHitText": false
              }
            }
          },
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_HitExplosion",
              "value": 1,
              "compareType": "Equal"
            }
          ]
        },
        //升级额外的爆炸伤害4
        {
          "$type": "TriggerAttackEvent",
          "targetType": "Enemy",
          "attackEvent": {
            "attackPattern": {
              "$type": "ConfigAttackSphere",
              "triggerType": "TriggerNoRepeat",
              "radius": 4,
              "born": {
                "$type": "ConfigBornByCollisionPoint"
              }
            },
            "attackInfo": {
              "attackProperty": {
                "damagePercentage": 0.25,
                "strikeType": "Default",
                "elementType": "None",
                "elementDurability": 0,
                "enBreak": 30.0
              },
              "hitPattern": {
                "onHitEffectName": "Eff_SceneObj_TowerPhysics_02_Hit",
                "hitImpulseType": "LV1",
                "reboundRatio": 0,
                "hitHaltTime": 0.0,
                "hitHaltTimeScale": 0.05,
                "muteHitText": false
              }
            }
          },
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_HitExplosion",
              "value": 2,
              "compareType": "Equal"
            }
          ]
        }
      ],
      "modifiers": {
        //能量子弹特效
        "EnergyBullet": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerPhysics_03_Bullet"
            }
          ]
        },
        "DamageUpgraderLv1": {
          "duration": 5.0,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 10
          },
          "properties": {
            "Actor_AttackRatio": 0.05
          }
        },
        "DamageUpgraderLv2": {
          "duration": 5.0,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 10
          },
          "properties": {
            "Actor_AttackRatio": 0.1
          }
        },
        "DamageUpgraderEnergyLv1": {
          "duration": 5.0,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 12
          },
          "properties": {
            "Actor_AttackRatio": 0.15
          }
        },
        "DamageUpgraderEnergyLv2": {
          "duration": 5.0,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 12
          },
          "properties": {
            "Actor_AttackRatio": 0.3
          }
        },
        //跟随时间提升伤害
        "DamageController": {
          "duration": 10,
          "thinkInterval": 0.5,
          "onThinkInterval": [
            {
              "$type": "ApplyModifier",
              "modifierName": "DamageUpgraderLv1",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_DamageByTime",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "DamageUpgraderLv2",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_DamageByTime",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            }
          ]
        },
        "DamageControllerEnergy": {
          "duration": 10,
          "thinkInterval": 0.5,
          "onThinkInterval": [
            {
              "$type": "ApplyModifier",
              "modifierName": "DamageUpgraderEnergyLv1",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_EnergyBallAttack",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "DamageUpgraderEnergyLv2",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_EnergyBallAttack",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            }
          ]
        }
      }
    }
  },
  //////////////////////////////////////////////////////////////////
  //
  // 塔防风炮塔
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_Wind",
      "onAdded": [
        //调整模型
        {
          "$type": "ApplyModifier",
          "modifierName": "ModelController"
        },
        //风炮塔升级管理
        {
          "$type": "ApplyModifier",
          "modifierName": "UpgradeController"
        },
        //风炮塔蓄力管理
        {
          "$type": "ApplyModifier",
          "modifierName": "ChargeController"
        },
        //标记自己是塔
        {
          "$type": "SetGlobalValue",
          "key": "IS_TOWER",
          "value": 1
        },
        //初始化蓄力次数
        {
          "$type": "SetGlobalValue",
          "key": "GV_ChargeTimes",
          "value": 0
        }
      ],
      "modifiers": {
        //调整模型
        "ModelController": {
          "onAdded": [
            {
              "$type": "TriggerSetRenderersEnable",
              "doOffStage": true,
              "renderNames": ["Property_Ani_Prop_Tower"],
              "setEnable": false
            },
            {
              "$type": "TriggerSetRenderersEnable",
              "doOffStage": true,
              "renderNames": ["Property_Ani_Prop_TowerFire_02_Lod0"],
              "setEnable": true
            },
            {
              //基础特效
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerWind_04_Charge",
              "attachPointName": "ShootPoint"
            }
          ]
        },
        //攻击事件处理
        "AttackManager": {
          //监听射程、攻速
          "modifierMixins": [
            {
              //攻击管理
              "$type": "TDPlayMixinV2",
              "towerType": "Wind",
              "baseCD": 4,
              "baseAttackRange": 10,
              "bulletID": 0,
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint"
              },
              "onFireActions": [
                //击退普攻V1
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackBox",
                      "triggerType": "TriggerNoRepeat",
                      "size": {
                        "x": 8,
                        "y": 4,
                        "z": 10
                      },
                      "born": {
                        "$type": "ConfigBornBySelf",
                        "direction": {
                          "$type": "ConfigDirectionByDefault",
                          "angleOffset": {
                            "x": 0.0,
                            "y": 0.0,
                            "z": 0.0
                          }
                        }
                      }
                    },
                    "attackInfo": {
                      "attackTag": "WindTowerAttack",
                      "attackProperty": {
                        "damagePercentage": 0.75,
                        "elementType": "Wind",
                        "strikeType": "Default",
                        "elementDurability": 50,
                        "enBreak": 75
                      },
                      "hitPattern": {
                        "onHitEffectName": "default",
                        "hitImpulseType": "LV7",
                        "overrideHitImpulse": {
                          "hitLevel": "Air",
                          "hitImpulseX": 800,
                          "hitImpulseY": 600
                        },
                        "reboundRatio": 0,
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                },
                {
                  "$type": "SendEffectTrigger",
                  "target": "Self",
                  "parameter": "ChargeOff",
                  "effectPattern": "Eff_SceneObj_TowerWind_04_Charge"
                },
                {
                  //攻击特效
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_TowerWind_03_Attack",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "RemoveDamageUp",
                  "target": "Self"
                },
                //重置蓄力次数
                {
                  "$type": "SetGlobalValue",
                  "key": "GV_ChargeTimes",
                  "value": 0
                }
              ]
            }
          ],
          //普攻命中后减抗性
          "onAttackLanded": [
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_ReduceWindResistanceLv1",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": ["WindTowerAttack"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_ReduceWindResistance",
                  "value": 1,
                  "compareType": "Equal"
                },
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_ReduceWindResistanceLv2",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": ["WindTowerAttack"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_ReduceWindResistance",
                  "value": 2,
                  "compareType": "Equal"
                },
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                }
              ]
            }
          ]
        },
        //风刃事件处理
        "BulletManager": {
          //监听射程、攻速
          "modifierMixins": [
            {
              //攻击管理
              "$type": "TDPlayMixinV2",
              "towerType": "Wind",
              "baseCD": 4,
              "baseAttackRange": 20,
              "bulletID": 70350287,
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint"
              },
              "onFireActions": [
                {
                  "$type": "SendEffectTrigger",
                  "target": "Self",
                  "parameter": "ChargeOff",
                  "effectPattern": "Eff_SceneObj_TowerWind_04_Charge"
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "RemoveDamageUp",
                  "target": "Self"
                },
                //重置蓄力次数
                {
                  "$type": "SetGlobalValue",
                  "key": "GV_ChargeTimes",
                  "value": 0
                },
                //发射风刃特效
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_TowerWind_AirBlade_01",
                  "target": "Self",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                }
              ]
            }
          ],
          //普攻命中后减抗性
          "onAttackLanded": [
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_ReduceWindResistanceLv1",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": ["WindTowerAttack"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_ReduceWindResistance",
                  "value": 1,
                  "compareType": "Equal"
                },
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_ReduceWindResistanceLv2",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": ["WindTowerAttack"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_ReduceWindResistance",
                  "value": 2,
                  "compareType": "Equal"
                },
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                }
              ]
            }
          ]
        },
        //升级管理器
        "UpgradeController": {
          "modifierMixins": [
            {
              //管理替换子弹
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_ShootBullet",
              "valueSteps": [-0.5, 0.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["AttackManager", "BulletManager"]
            },
            {
              //管理吸引目标升级
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_TowUnits",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["WindZoneLv1", "WindZoneLv2"]
            },
            {
              //管理脉冲发生器
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_WindImpulse",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["WindImpulseLv1", "WindImpulseLv2"]
            },
            {
              //管理替换子弹伤害升级
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_ShootBullet",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["BulletDamageUpLv1", "BulletDamageUpLv2"]
            },
            {
              //管理替额外伤害
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_ExtraDamageByHp",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["ExtraDamageByHPLv1", "ExtraDamageByHPLv2"]
            }
          ]
        },
        //风脉冲V1
        "WindImpulseLv1": {
          "thinkInterval": 6,
          "onThinkInterval": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerWind_Halo_01_Once",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint",
                "offset": {
                  "x": 0.0,
                  "y": -1.8,
                  "z": 0.0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": 4,
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint",
                    "offset": {
                      "x": 0.0,
                      "y": -1.4,
                      "z": 0.0
                    }
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "strikeType": "Default",
                    "elementType": "Wind",
                    "elementDurability": 20,
                    "ignoreAttackerProperty": true
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV3",
                    "overrideHitImpulse": {
                      "hitLevel": "Heavy",
                      "hitImpulseX": 50,
                      "hitImpulseY": 800
                    },
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.05,
                    "muteHitText": false
                  }
                }
              }
            }
          ]
        },
        //风脉冲V2
        "WindImpulseLv2": {
          "thinkInterval": 3,
          "onThinkInterval": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerWind_Halo_01_Once",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint",
                "offset": {
                  "x": 0.0,
                  "y": -1.8,
                  "z": 0.0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": 4,
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint",
                    "offset": {
                      "x": 0.0,
                      "y": -1.4,
                      "z": 0.0
                    }
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "strikeType": "Default",
                    "elementType": "Wind",
                    "elementDurability": 20,
                    "ignoreAttackerProperty": true
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV3",
                    "overrideHitImpulse": {
                      "hitLevel": "Heavy",
                      "hitImpulseX": 50,
                      "hitImpulseY": 800
                    },
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.05,
                    "muteHitText": false
                  }
                }
              }
            }
          ]
        },
        //吸引周围敌人
        "WindZoneLv1": {
          "modifierMixins": [
            {
              "$type": "WindZoneMixin",
              "shapeName": "CircleR3",
              "strength": 2,
              "attenuation": 1,
              "born": {
                "$type": "ConfigBornBySelf",
                "offset": {
                  "x": 0.0,
                  "y": 0.0,
                  "z": 1.5
                }
              },
              "targetType": "Enemy",
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster", "Grass"]
                }
              ]
            }
          ]
        },
        //吸引周围敌人
        "WindZoneLv2": {
          "modifierMixins": [
            {
              "$type": "WindZoneMixin",
              "shapeName": "CircleR3",
              "strength": 4,
              "attenuation": 1,
              "born": {
                "$type": "ConfigBornBySelf",
                "offset": {
                  "x": 0.0,
                  "y": 0.0,
                  "z": 1.5
                }
              },
              "targetType": "Enemy",
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster", "Grass"]
                }
              ]
            }
          ]
        },
        //普攻蓄力
        "ChargeController": {
          "thinkInterval": 5,
          "onThinkInterval": [
            //蓄力提升伤害
            {
              "$type": "ApplyModifier",
              "modifierName": "DamageUpLv1",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_CanCharge",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            //蓄力提升伤害
            {
              "$type": "ApplyModifier",
              "modifierName": "DamageUpLv2",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_CanCharge",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            },
            //增加记录的蓄力次数
            {
              "$type": "AddGlobalValue",
              "key": "GV_ChargeTimes",
              "value": 1,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_CanCharge",
                  "value": 0,
                  "compareType": "MoreThan"
                }
              ]
            },
            //蓄力特效
            {
              "$type": "SendEffectTrigger",
              "target": "Self",
              "parameter": "LevelUp1",
              "effectPattern": "Eff_SceneObj_TowerWind_04_Charge",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "GV_ChargeTimes",
                  "value": 1,
                  "compareType": "Equal"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_CanCharge",
                  "value": 0,
                  "compareType": "MoreThan"
                }
              ]
            },
            {
              "$type": "SendEffectTrigger",
              "target": "Self",
              "parameter": "LevelUp2",
              "effectPattern": "Eff_SceneObj_TowerWind_04_Charge",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "GV_ChargeTimes",
                  "value": 1,
                  "compareType": "MoreThan"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_CanCharge",
                  "value": 0,
                  "compareType": "MoreThan"
                }
              ]
            }
          ]
        },
        //蓄力提升攻击
        "DamageUpLv1": {
          "duration": 10,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 2
          },
          "properties": {
            "Actor_AttackRatio": 2.25
          }
        },
        "DamageUpLv2": {
          "duration": 10,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 2
          },
          "properties": {
            "Actor_AttackRatio": 4.5
          },
          "onAdded": [
            {
              "$type": "RemoveModifier",
              "modifierName": "DamageUpLv1",
              "target": "Self"
            }
          ]
        },
        "RemoveDamageUp": {
          "duration": 0.5,
          "onRemoved": [
            {
              "$type": "RemoveModifier",
              "modifierName": "DamageUpLv1",
              "target": "Self"
            },
            {
              "$type": "RemoveModifier",
              "modifierName": "DamageUpLv2",
              "target": "Self"
            }
          ]
        },
        //降低风元素抗性
        "UNIQUE_ReduceWindResistanceLv1": {
          "duration": 10,
          "isUnique": true,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 3
          },
          "properties": {
            "Actor_WindSubHurtDelta": -0.1
          }
        },
        //降低风元素抗性
        "UNIQUE_ReduceWindResistanceLv2": {
          "duration": 10,
          "isUnique": true,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 6
          },
          "properties": {
            "Actor_WindSubHurtDelta": -0.1
          },
          "onAdded": [
            {
              "$type": "RemoveModifier",
              "modifierName": "UNIQUE_ReduceWindResistanceLv1"
            }
          ]
        },
        //风刃伤害提升
        "BulletDamageUpLv1": {
          "properties": {
            "Actor_AttackRatio": 1.0
          }
        },
        "BulletDamageUpLv2": {
          "properties": {
            "Actor_AttackRatio": 2.0
          }
        },
        //血量高于50%的敌人额外伤害
        "ExtraDamageByHPLv1": {
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "damagePercentageRatio": 0.25,
              "ignoreEventInfo": true,
              "predicates": [
                {
                  "$type": "ByTargetHPRatio",
                  "HPRatio": 0.5,
                  "target": "Target",
                  "logic": "Greater"
                }
              ]
            }
          ]
        },
        //血量高于50%的敌人额外伤害
        "ExtraDamageByHPLv2": {
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "damagePercentageRatio": 0.5,
              "ignoreEventInfo": true,
              "predicates": [
                {
                  "$type": "ByTargetHPRatio",
                  "HPRatio": 0.5,
                  "target": "Target",
                  "logic": "Greater"
                }
              ]
            }
          ]
        }
      }
    }
  },

  //////////////////////////////////////////////////////////////////
  //
  // 塔防风炮塔子弹
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_WindBullet",
      "onAbilityStart": [
        {
          //击退攻击事件
          "$type": "DamageByAttackValue",
          "target": "Target",
          "attacker": "Caster",
          "born": {
            "$type": "ConfigBornByHitPoint",
            "offset": {
              "x": 0,
              "y": 1.6,
              "z": 0
            }
          },
          "attackInfo": {
            "attackTag": "WindTowerAttack",
            "attackProperty": {
              "damagePercentage": 0.75,
              "elementType": "Wind",
              "strikeType": "Default",
              "elementDurability": 50,
              "elementRank": 600,
              "enBreak": 75
            },
            "hitPattern": {
              "onHitEffectName": "default",
              "hitImpulseType": "LV7",
              "overrideHitImpulse": {
                "hitLevel": "Air",
                "hitImpulseX": 800,
                "hitImpulseY": 600
              },
              "reboundRatio": 0,
              "canBeDefenceHalt": false,
              "hitHaltTime": 0.0,
              "hitHaltTimeScale": 0.05,
              "muteHitText": false
            }
          }
        }
      ]
    }
  },
  ////////////////////////////////////////////////////////////////////
  //
  //	塔防 建造值增幅器
  //
  //
  ////////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Common_Property_Prop_TowerAbsorberV2",
      "onAdded": [
        {
          "$type": "AttachModifier",
          "modifierName": "RangeController"
        }
      ],
      "modifiers": {
        "RangeController": {
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_RangeLevel",
              "valueSteps": [-0.5, 0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": [
                "AbsorbRangeLv1",
                "AbsorbRangeLv2",
                "AbsorbRangeLv3"
              ]
            }
          ]
        },
        "UNIQUE_SlowBuffLv1": {
          "duration": 2,
          "isUnique": true,
          "stacking": "Refresh",
          "state": "SpeedDown",
          "properties": {
            "Animator_MoveSpeedRatio": -0.2
          }
        },
        "UNIQUE_SlowBuffLv2": {
          "duration": 2,
          "isUnique": true,
          "stacking": "Refresh",
          "state": "SpeedDown",
          "properties": {
            "Animator_MoveSpeedRatio": -0.4
          }
        },
        "UNIQUE_SlowBuffLv3": {
          "duration": 2,
          "isUnique": true,
          "stacking": "Refresh",
          "state": "SpeedDown",
          "properties": {
            "Animator_MoveSpeedRatio": -0.6
          }
        },

        "UNIQUE_TowerAbsorberBuff": {
          "duration": 1.5,
          "isUnique": true,
          "stacking": "Refresh",
          "thinkInterval": 1,
          "onThinkInterval": [
            {
              "$type": "SetGlobalValue",
              "key": "GV_ExtraBuildPoint",
              "target": "Self",
              "value": 20,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_AuroKillPointBonus",
                  "target": "Applier",
                  "value": 0,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "GV_ExtraBuildPoint",
              "target": "Self",
              "value": 30,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_AuroKillPointBonus",
                  "target": "Applier",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "GV_ExtraBuildPoint",
              "target": "Self",
              "value": 40,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_AuroKillPointBonus",
                  "target": "Applier",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            }
          ],
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "GV_ExtraBuildPoint",
              "target": "Self",
              "value": 20,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_AuroKillPointBonus",
                  "target": "Applier",
                  "value": 0,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "GV_ExtraBuildPoint",
              "target": "Self",
              "value": 30,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_AuroKillPointBonus",
                  "target": "Applier",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "SetGlobalValue",
              "key": "GV_ExtraBuildPoint",
              "target": "Self",
              "value": 40,
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_AuroKillPointBonus",
                  "target": "Applier",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "GV_ExtraBuildPoint",
              "target": "Self",
              "value": 0
            }
          ],
          "onKill": [
            {
              "$type": "FireEffect",
              "target": "Applier",
              "effectPattern": "Eff_SceneObj_TowerAbsorber_01_Absorber"
            }
          ]
        },

        "AbsorbRangeLv1": {
          "thinkInterval": 1,
          "onThinkInterval": [
            {
              //添加回收BUFF
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_TowerAbsorberBuff",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR8",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                }
              ]
            },
            {
              //添加减速效果1
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_SlowBuffLv1",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR8",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_SlowLevel",
                  "target": "Self",
                  "value": 0,
                  "compareType": "Equal"
                }
              ]
            },
            {
              //添加减速效果2
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_SlowBuffLv2",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR8",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_SlowLevel",
                  "target": "Self",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              //添加减速效果3
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_SlowBuffLv3",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR8",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_SlowLevel",
                  "target": "Self",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            }
          ],
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerAbsorber_01_Ring",
              "born": {
                "$type": "ConfigBornBySelf",
                "onGround": true
              }
            }
          ]
        },
        "AbsorbRangeLv2": {
          "thinkInterval": 1,
          "onThinkInterval": [
            {
              //添加回收BUFF
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_TowerAbsorberBuff",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR10",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                }
              ]
            },
            {
              //添加减速效果1
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_SlowBuffLv1",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR10",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_SlowLevel",
                  "target": "Self",
                  "value": 0,
                  "compareType": "Equal"
                }
              ]
            },
            {
              //添加减速效果2
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_SlowBuffLv2",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR10",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_SlowLevel",
                  "target": "Self",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              //添加减速效果3
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_SlowBuffLv3",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR10",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_SlowLevel",
                  "target": "Self",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            }
          ],
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerAbsorber_02_Ring",
              "born": {
                "$type": "ConfigBornBySelf",
                "onGround": true
              }
            }
          ]
        },
        "AbsorbRangeLv3": {
          "thinkInterval": 1,
          "onThinkInterval": [
            {
              //添加回收BUFF
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_TowerAbsorberBuff",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR12",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                }
              ]
            },
            {
              //添加减速效果1
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_SlowBuffLv1",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR12",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_SlowLevel",
                  "target": "Self",
                  "value": 0,
                  "compareType": "Equal"
                }
              ]
            },
            {
              //添加减速效果2
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_SlowBuffLv2",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR12",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_SlowLevel",
                  "target": "Self",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              //添加减速效果3
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_SlowBuffLv3",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR12",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_SlowLevel",
                  "target": "Self",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            }
          ],
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerAbsorber_03_Ring",
              "born": {
                "$type": "ConfigBornBySelf",
                "onGround": true
              }
            }
          ]
        }
      }
    }
  },

  ////////////////////////////////////////////////////////////////////
  //
  //	塔防 炮塔增幅器
  //
  //
  ////////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Common_Property_Prop_TowerEnhancerV2",
      "onAdded": [
        {
          "$type": "ApplyModifier",
          "modifierName": "RangeController"
        }
      ],
      "modifiers": {
        "RangeController": {
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_RangeLevel",
              "valueSteps": [-0.5, 0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": [
                "EnhanceControllerLv1",
                "EnhanceControllerLv2",
                "EnhanceControllerLv3"
              ]
            }
          ]
        },
        "UNIQUE_ElemMasteryUpLv1": {
          "duration": 7.0,
          "isUnique": true,
          "stacking": "Refresh",
          "properties": {
            "Actor_ElemMasteryDelta": 25
          }
        },
        "UNIQUE_ElemMasteryUpLv2": {
          "duration": 7.0,
          "isUnique": true,
          "stacking": "Refresh",
          "properties": {
            "Actor_ElemMasteryDelta": 50
          }
        },
        "UNIQUE_TowerAtkBuffLv0": {
          "duration": 7.0,
          "isUnique": true,
          "stacking": "Refresh",
          "state": "AttackUp",
          "properties": {
            "Actor_AttackRatio": 0.5
          },
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerEnhancer_01_BuffAttack"
            }
          ]
        },
        "UNIQUE_TowerAtkBuffLv1": {
          "duration": 7.0,
          "isUnique": true,
          "stacking": "Refresh",
          "state": "AttackUp",
          "properties": {
            "Actor_AttackRatio": 0.6
          },
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerEnhancer_01_BuffAttack"
            }
          ]
        },
        "UNIQUE_TowerAtkBuffLv2": {
          "duration": 7.0,
          "isUnique": true,
          "stacking": "Refresh",
          "state": "AttackUp",
          "properties": {
            "Actor_AttackRatio": 0.7
          },
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerEnhancer_01_BuffAttack"
            }
          ]
        },
        "EnhanceControllerLv1": {
          "thinkInterval": 5,
          "onThinkInterval": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerEnhancer_01_BuffWave_02"
            },
            {
              "$type": "Predicated",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR6",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "IS_TOWER",
                  "value": 1,
                  "compareType": "Equal"
                }
              ],
              "successActions": [
                //提升精通等级
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_ElemMasteryUpLv1",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeMasteryLevel",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_ElemMasteryUpLv2",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeMasteryLevel",
                      "value": 2,
                      "compareType": "Equal"
                    }
                  ]
                },
                //提升攻击力
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_TowerAtkBuffLv0",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeAttackLevel",
                      "value": 0,
                      "compareType": "Equal"
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_TowerAtkBuffLv1",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeAttackLevel",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_TowerAtkBuffLv2",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeAttackLevel",
                      "value": 2,
                      "compareType": "Equal"
                    }
                  ]
                }
              ],
              "failActions": []
            }
          ]
        },
        "EnhanceControllerLv2": {
          "thinkInterval": 5,
          "onThinkInterval": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerEnhancer_01_BuffWave_01"
            },
            {
              "$type": "Predicated",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR9",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "IS_TOWER",
                  "value": 1,
                  "compareType": "Equal"
                }
              ],
              "successActions": [
                //提升精通等级
                {
                  "$type": "ApplyModifier",
                  "target": "Target",
                  "modifierName": "UNIQUE_ElemMasteryUpLv1",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeMasteryLevel",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_ElemMasteryUpLv2",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeMasteryLevel",
                      "value": 2,
                      "compareType": "Equal"
                    }
                  ]
                },
                //提升攻击力
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_TowerAtkBuffLv0",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeAttackLevel",
                      "value": 0,
                      "compareType": "Equal"
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_TowerAtkBuffLv1",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeAttackLevel",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_TowerAtkBuffLv2",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeAttackLevel",
                      "value": 2,
                      "compareType": "Equal"
                    }
                  ]
                }
              ],
              "failActions": []
            }
          ]
        },
        "EnhanceControllerLv3": {
          "thinkInterval": 5,
          "onThinkInterval": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerEnhancer_01_BuffWave_03"
            },
            {
              "$type": "Predicated",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR12",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self"
              },
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "IS_TOWER",
                  "value": 1,
                  "compareType": "Equal"
                }
              ],
              "successActions": [
                //提升精通等级
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_ElemMasteryUpLv1",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeMasteryLevel",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_ElemMasteryUpLv2",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeMasteryLevel",
                      "value": 2,
                      "compareType": "Equal"
                    }
                  ]
                },
                //提升攻击力
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_TowerAtkBuffLv0",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeAttackLevel",
                      "value": 0,
                      "compareType": "Equal"
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_TowerAtkBuffLv1",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeAttackLevel",
                      "value": 1,
                      "compareType": "Equal"
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_TowerAtkBuffLv2",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_UpgradeAttackLevel",
                      "value": 2,
                      "compareType": "Equal"
                    }
                  ]
                }
              ],
              "failActions": []
            }
          ]
        }
      }
    }
  },
  //////////////////////////////////////////////////////////////////
  //
  // 塔防水炮塔
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_Water",
      "abilitySpecials": {
        "Water_Element_Durability": 50,
        "Water_Attack_Range_Lv1": 6,
        "Water_Attack_Range_Lv2": 8,
        "Water_Attack_Range_Lv3": 10,
        "Water_Attack_Ratio": 0.6,

        "Bubble_Interval_Lv1": 5,
        "Bubble_Interval_Lv2": 2.5,

        "Impulse_Range": 12,
        "Impulse_Interval_Lv1": 20,
        "Impulse_Interval_Lv2": 10,
        "Impulse_Element_Durability": 200,

        "Wet_Bonus_Lv1": 0.5,
        "Wet_Bonus_Lv2": 1,

        "Aoe_Ratio_Lv1": 2.25,
        "Aoe_Ratio_Lv2": 3.5,
        "Aoe_Range_Lv1": 2,
        "Aoe_Range_Lv2": 4,
        "Aoe_Range_Lv3": 6,

        "Dot_Time": 12,
        "Dot_Interval": 4,

        "Dot_Element_Durability": 50,
        "Dot_Damage_Lv1": 0.75,
        "Dot_Damage_Lv2": 1.5,
        "Dot_Damage_Range": 6
      },
      "onAdded": [
        {
          "$type": "ApplyModifier",
          "modifierName": "TowerDefenceV2_Water"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "SpecialAbilitiesController"
        },
        //标记自己是塔，给增幅器用
        {
          "$type": "SetGlobalValue",
          "key": "IS_TOWER",
          "value": 1
        }
      ],
      "modifiers": {
        //基础炮塔mixin
        "TowerDefenceV2_Water": {
          "modifierMixins": [
            {
              "$type": "TDPlayMixinV2",
              "towerType": "Water",
              "baseCD": 4,
              "baseAttackRange": 6,
              "bulletID": 0,
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint"
              },
              "onFireActions": [
                {
                  "$type": "Predicated",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_TargetAOE",
                      "value": 0,
                      "compareType": "LessAndEqual"
                    }
                  ],
                  "successActions": [
                    {
                      "$type": "DebugLog",
                      "content": "TD: Water Tower: BASE ATTACK"
                    },
                    //判断是否是targetAOE攻击模式，若不是，则执行正常的攻击

                    //范围攻击特效1
                    {
                      "$type": "FireEffect",
                      "effectPattern": "Eff_SceneObj_TowerWater_01_Burst",
                      "born": {
                        "$type": "ConfigBornBySelf",
                        "onGround": true
                      },
                      "predicates": [
                        {
                          "$type": "ByTargetGlobalValue",
                          "key": "SGV_RangeLevel",
                          "value": 0,
                          "compareType": "Equal"
                        }
                      ]
                    },
                    {
                      "$type": "TriggerAttackEvent",
                      "targetType": "Enemy",
                      "attackEvent": {
                        "attackPattern": {
                          "$type": "ConfigAttackSphere",
                          "triggerType": "TriggerNoRepeat",
                          "radius": "%Water_Attack_Range_Lv1",
                          "born": {
                            "$type": "ConfigBornBySelf",
                            "onGround": true
                          }
                        },
                        "attackInfo": {
                          "attackTag": "Water_Base_Attack",
                          "attackProperty": {
                            "damagePercentage": "%Water_Attack_Ratio",
                            "strikeType": "Default",
                            "elementType": "Water",
                            "elementDurability": "%Water_Element_Durability",
                            "enBreak": 10
                          },
                          "hitPattern": {
                            "hitImpulseType": "LV3",
                            "overrideHitImpulse": {
                              "hitLevel": "Heavy",
                              "hitImpulseX": 50,
                              "hitImpulseY": 800
                            },
                            "hitHaltTime": 0.0,
                            "hitHaltTimeScale": 0.05,
                            "muteHitText": false
                          }
                        }
                      },
                      "predicates": [
                        {
                          "$type": "ByTargetGlobalValue",
                          "key": "SGV_RangeLevel",
                          "value": 0,
                          "compareType": "Equal"
                        }
                      ]
                    },
                    //范围攻击特效2
                    {
                      "$type": "FireEffect",
                      "effectPattern": "Eff_SceneObj_TowerWater_02_Burst",
                      "born": {
                        "$type": "ConfigBornBySelf",
                        "onGround": true
                      },
                      "predicates": [
                        {
                          "$type": "ByTargetGlobalValue",
                          "key": "SGV_RangeLevel",
                          "value": 1,
                          "compareType": "Equal"
                        }
                      ]
                    },
                    {
                      "$type": "TriggerAttackEvent",
                      "targetType": "Enemy",
                      "attackEvent": {
                        "attackPattern": {
                          "$type": "ConfigAttackSphere",
                          "triggerType": "TriggerNoRepeat",
                          "radius": "%Water_Attack_Range_Lv2",
                          "born": {
                            "$type": "ConfigBornBySelf",
                            "onGround": true
                          }
                        },
                        "attackInfo": {
                          "attackTag": "Water_Base_Attack",
                          "attackProperty": {
                            "damagePercentage": "%Water_Attack_Ratio",
                            "strikeType": "Default",
                            "elementType": "Water",
                            "elementDurability": "%Water_Element_Durability",
                            "enBreak": 10
                          },
                          "hitPattern": {
                            "hitImpulseType": "LV3",
                            "overrideHitImpulse": {
                              "hitLevel": "Heavy",
                              "hitImpulseX": 50,
                              "hitImpulseY": 800
                            },
                            "hitHaltTime": 0.0,
                            "hitHaltTimeScale": 0.05,
                            "muteHitText": false
                          }
                        }
                      },
                      "predicates": [
                        {
                          "$type": "ByTargetGlobalValue",
                          "key": "SGV_RangeLevel",
                          "value": 1,
                          "compareType": "Equal"
                        }
                      ]
                    },
                    //范围攻击特效3
                    {
                      "$type": "FireEffect",
                      "effectPattern": "Eff_SceneObj_TowerWater_03_Burst",
                      "born": {
                        "$type": "ConfigBornBySelf",
                        "onGround": true
                      },
                      "predicates": [
                        {
                          "$type": "ByTargetGlobalValue",
                          "key": "SGV_RangeLevel",
                          "value": 2,
                          "compareType": "MoreThanAndEqual"
                        }
                      ]
                    },
                    {
                      "$type": "TriggerAttackEvent",
                      "targetType": "Enemy",
                      "attackEvent": {
                        "attackPattern": {
                          "$type": "ConfigAttackSphere",
                          "triggerType": "TriggerNoRepeat",
                          "radius": "%Water_Attack_Range_Lv3",
                          "born": {
                            "$type": "ConfigBornBySelf",
                            "onGround": true
                          }
                        },
                        "attackInfo": {
                          "attackTag": "Water_Base_Attack",
                          "attackProperty": {
                            "damagePercentage": "%Water_Attack_Ratio",
                            "strikeType": "Default",
                            "elementType": "Water",
                            "elementDurability": "%Water_Element_Durability",
                            "enBreak": 10
                          },
                          "hitPattern": {
                            "hitImpulseType": "LV3",
                            "overrideHitImpulse": {
                              "hitLevel": "Heavy",
                              "hitImpulseX": 50,
                              "hitImpulseY": 800
                            },
                            "hitHaltTime": 0.0,
                            "hitHaltTimeScale": 0.05,
                            "muteHitText": false
                          }
                        }
                      },
                      "predicates": [
                        {
                          "$type": "ByTargetGlobalValue",
                          "key": "SGV_RangeLevel",
                          "value": 2,
                          "compareType": "Equal"
                        }
                      ]
                    }
                  ],
                  "failActions": [
                    {
                      "$type": "DebugLog",
                      "content": "TD: Water Tower: Target aoe lv1!",
                      "predicates": [
                        {
                          "$type": "ByTargetGlobalValue",
                          "target": "Self",
                          "key": "SGV_TargetAOE",
                          "value": 1
                        }
                      ]
                    },
                    {
                      "$type": "DebugLog",
                      "content": "TD: Water Tower: Target aoe lv2!",
                      "predicates": [
                        {
                          "$type": "ByTargetGlobalValue",
                          "target": "Self",
                          "key": "SGV_TargetAOE",
                          "value": 2
                        }
                      ]
                    },
                    //判断等级，造成一次以目标为中心的aoe伤害
                    {
                      "$type": "ApplyModifier",
                      "target": "SelfAttackTarget",
                      "modifierName": "TargetAOE_Lv1",
                      "predicates": [
                        {
                          "$type": "ByTargetGlobalValue",
                          "target": "Self",
                          "key": "SGV_TargetAOE",
                          "value": 1
                        }
                      ]
                    },
                    {
                      "$type": "ApplyModifier",
                      "target": "SelfAttackTarget",
                      "modifierName": "TargetAOE_Lv2",
                      "predicates": [
                        {
                          "$type": "ByTargetGlobalValue",
                          "target": "Self",
                          "key": "SGV_TargetAOE",
                          "value": 2
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },

        "TargetAOE_Lv1": {
          //蓄力表现时间
          "duration": 0.5,
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerWater_04_Charge",
              "target": "Applier"
            }
          ],
          "onRemoved": [
            {
              "$type": "DebugLog",
              "content": "TD: Water Tower: TARGET AOE ATTACK Lv1"
            },
            //根据警戒范围，选一个范围内的随机敌方目标 LV1
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_RangeLevel",
                  "value": 0,
                  "compareType": "Equal"
                }
              ],
              "successActions": [
                {
                  "$type": "SetGlobalPos",
                  "target": "Self",
                  "key": "Water_Target_Aoe_Pos",
                  "setTarget": false,
                  "born": {
                    "$type": "ConfigBornByTarget"
                  }
                },

                //发出攻击特效
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_TowerWater_04_Hit_01",
                  "born": {
                    "$type": "ConfigBornByGlobalValue",
                    "positionKey": "Water_Target_Aoe_Pos"
                  }
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "target": "Applier",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%Aoe_Range_Lv1",
                      "born": {
                        "$type": "ConfigBornByGlobalValue",
                        "positionKey": "Water_Target_Aoe_Pos"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Water_Base_Attack",
                      "attackProperty": {
                        "damagePercentage": "%Aoe_Ratio_Lv1",
                        "strikeType": "Default",
                        "elementType": "Water",
                        "elementDurability": "%Water_Element_Durability",
                        "enBreak": 10
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV3",
                        "overrideHitImpulse": {
                          "hitLevel": "Heavy",
                          "hitImpulseX": 50,
                          "hitImpulseY": 800
                        },
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ]
            },
            //根据警戒范围，选一个范围内的随机敌方目标 LV2
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_RangeLevel",
                  "value": 1,
                  "compareType": "Equal"
                }
              ],
              "successActions": [
                {
                  "$type": "SetGlobalPos",
                  "target": "Self",
                  "key": "Water_Target_Aoe_Pos",
                  "setTarget": false,
                  "born": {
                    "$type": "ConfigBornByTarget"
                  }
                },

                //发出攻击特效
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_TowerWater_04_Hit_01",
                  "born": {
                    "$type": "ConfigBornByGlobalValue",
                    "positionKey": "Water_Target_Aoe_Pos"
                  }
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "target": "Applier",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%Aoe_Range_Lv2",
                      "born": {
                        "$type": "ConfigBornByGlobalValue",
                        "positionKey": "Water_Target_Aoe_Pos"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Water_Base_Attack",
                      "attackProperty": {
                        "damagePercentage": "%Aoe_Ratio_Lv1",
                        "strikeType": "Default",
                        "elementType": "Water",
                        "elementDurability": "%Water_Element_Durability",
                        "enBreak": 10
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV3",
                        "overrideHitImpulse": {
                          "hitLevel": "Heavy",
                          "hitImpulseX": 50,
                          "hitImpulseY": 800
                        },
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ]
            },
            //根据警戒范围，选一个范围内的随机敌方目标 LV3
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_RangeLevel",
                  "value": 2,
                  "compareType": "Equal"
                }
              ],
              "successActions": [
                {
                  "$type": "SetGlobalPos",
                  "target": "Self",
                  "key": "Water_Target_Aoe_Pos",
                  "setTarget": false,
                  "born": {
                    "$type": "ConfigBornByTarget"
                  }
                },

                //发出攻击特效
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_TowerWater_04_Hit_01",
                  "born": {
                    "$type": "ConfigBornByGlobalValue",
                    "positionKey": "Water_Target_Aoe_Pos"
                  }
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "target": "Applier",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%Aoe_Range_Lv3",
                      "born": {
                        "$type": "ConfigBornByGlobalValue",
                        "positionKey": "Water_Target_Aoe_Pos"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Water_Base_Attack",
                      "attackProperty": {
                        "damagePercentage": "%Aoe_Ratio_Lv1",
                        "strikeType": "Default",
                        "elementType": "Water",
                        "elementDurability": "%Water_Element_Durability",
                        "enBreak": 10
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV3",
                        "overrideHitImpulse": {
                          "hitLevel": "Heavy",
                          "hitImpulseX": 50,
                          "hitImpulseY": 800
                        },
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ]
            }
          ]
        },
        "TargetAOE_Lv2": {
          //蓄力表现时间
          "duration": 0.5,
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerWater_04_Charge",
              "target": "Applier"
            }
          ],
          "onRemoved": [
            {
              "$type": "DebugLog",
              "content": "TD: Water Tower: TARGET AOE ATTACK Lv2"
            },
            //根据警戒范围，选一个范围内的随机敌方目标 LV1
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_RangeLevel",
                  "value": 0,
                  "compareType": "Equal"
                }
              ],
              "successActions": [
                {
                  "$type": "SetGlobalPos",
                  "target": "Self",
                  "key": "Water_Target_Aoe_Pos",
                  "setTarget": false,
                  "born": {
                    "$type": "ConfigBornByTarget"
                  }
                },

                //发出攻击特效
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_TowerWater_04_Hit_01",
                  "born": {
                    "$type": "ConfigBornByGlobalValue",
                    "positionKey": "Water_Target_Aoe_Pos"
                  }
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "target": "Applier",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%Aoe_Range_Lv1",
                      "born": {
                        "$type": "ConfigBornByGlobalValue",
                        "positionKey": "Water_Target_Aoe_Pos"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Water_Base_Attack",
                      "attackProperty": {
                        "damagePercentage": "%Aoe_Ratio_Lv2",
                        "strikeType": "Default",
                        "elementType": "Water",
                        "elementDurability": "%Water_Element_Durability",
                        "enBreak": 10
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV3",
                        "overrideHitImpulse": {
                          "hitLevel": "Heavy",
                          "hitImpulseX": 50,
                          "hitImpulseY": 800
                        },
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ]
            },
            //根据警戒范围，选一个范围内的随机敌方目标 LV2
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_RangeLevel",
                  "value": 1,
                  "compareType": "Equal"
                }
              ],
              "successActions": [
                {
                  "$type": "SetGlobalPos",
                  "target": "Self",
                  "key": "Water_Target_Aoe_Pos",
                  "setTarget": false,
                  "born": {
                    "$type": "ConfigBornByTarget"
                  }
                },

                //发出攻击特效
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_TowerWater_04_Hit_01",
                  "born": {
                    "$type": "ConfigBornByGlobalValue",
                    "positionKey": "Water_Target_Aoe_Pos"
                  }
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "target": "Applier",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%Aoe_Range_Lv2",
                      "born": {
                        "$type": "ConfigBornByGlobalValue",
                        "positionKey": "Water_Target_Aoe_Pos"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Water_Base_Attack",
                      "attackProperty": {
                        "damagePercentage": "%Aoe_Ratio_Lv2",
                        "strikeType": "Default",
                        "elementType": "Water",
                        "elementDurability": "%Water_Element_Durability",
                        "enBreak": 10
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV3",
                        "overrideHitImpulse": {
                          "hitLevel": "Heavy",
                          "hitImpulseX": 50,
                          "hitImpulseY": 800
                        },
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ]
            },
            //根据警戒范围，选一个范围内的随机敌方目标 LV3
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_RangeLevel",
                  "value": 2,
                  "compareType": "Equal"
                }
              ],
              "successActions": [
                {
                  "$type": "SetGlobalPos",
                  "target": "Self",
                  "key": "Water_Target_Aoe_Pos",
                  "setTarget": false,
                  "born": {
                    "$type": "ConfigBornByTarget"
                  }
                },

                //发出攻击特效
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_TowerWater_04_Hit_01",
                  "born": {
                    "$type": "ConfigBornByGlobalValue",
                    "positionKey": "Water_Target_Aoe_Pos"
                  }
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "target": "Applier",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%Aoe_Range_Lv3",
                      "born": {
                        "$type": "ConfigBornByGlobalValue",
                        "positionKey": "Water_Target_Aoe_Pos"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Water_Base_Attack",
                      "attackProperty": {
                        "damagePercentage": "%Aoe_Ratio_Lv2",
                        "strikeType": "Default",
                        "elementType": "Water",
                        "elementDurability": "%Water_Element_Durability",
                        "enBreak": 10
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV3",
                        "overrideHitImpulse": {
                          "hitLevel": "Heavy",
                          "hitImpulseX": 50,
                          "hitImpulseY": 800
                        },
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ]
            }
          ]
        },

        //用于根据SGV上各种附加能力
        "SpecialAbilitiesController": {
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Bubble",
              "valueSteps": [0.5, 1.5, 2.5],
              "modifierNameSteps": [
                "BubbleControllerLv1",
                "BubbleControllerLv2"
              ]
            },
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_WaterImpulse",
              "valueSteps": [0.5, 1.5, 2.5],
              "modifierNameSteps": [
                "ImpulseControllerLv1",
                "ImpulseControllerLv2"
              ]
            },
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Wet",
              "valueSteps": [0.5, 2.5],
              "modifierNameSteps": ["WetBonusController"]
            },
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Dot",
              "valueSteps": [0.5, 2.5],
              "modifierNameSteps": ["DotController"]
            },
            {
              //提升感电伤害
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_UpgradeElectricRecation",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["UpgradeShockLv1", "UpgradeShockLv2"]
            },
            {
              //提升蒸发伤害
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Evaporate",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["UpgradeSteamLv1", "UpgradeSteamLv2"]
            }
          ]
        },
        //泡泡发射器Lv1。每隔一段时间向10m内随机敌人发射一个泡泡
        "BubbleControllerLv1": {
          "thinkInterval": "%Bubble_Interval_Lv1",
          "onThinkInterval": [
            {
              "$type": "DebugLog",
              "content": "TD: Water Tower: SHOOTING BUBBLE LV1"
            },
            {
              "$type": "SetSelfAttackTarget",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR10",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self",
                "topLimit": 1,
                "sortType": "Nearest" //从近开始选
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                }
              ]
            },
            {
              "$type": "TriggerBullet",
              "bulletID": 70350291,
              "ownerIs": "Self",
              "trackTarget": "SelfAttackTarget",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode",
                "direction": {
                  "$type": "ConfigDirectionByAttackTarget",
                  "angleOffset": {
                    "x": 0.0,
                    "y": 0.0, //角度偏移
                    "z": 0.0
                  }
                }
              },
              "predicates": [
                {
                  "$type": "ByHasAttackTarget"
                }
              ]
            }
          ]
        },
        //泡泡发射器Lv2。每隔一段时间向10m内随机敌人发射一个泡泡
        "BubbleControllerLv2": {
          "thinkInterval": "%Bubble_Interval_Lv2",
          "onThinkInterval": [
            {
              "$type": "DebugLog",
              "content": "TD: Water Tower: SHOOTING BUBBLE LV2"
            },
            {
              "$type": "SetSelfAttackTarget",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR10",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self",
                "topLimit": 1,
                "sortType": "Nearest" //从近开始选
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                }
              ]
            },
            {
              "$type": "TriggerBullet",
              "bulletID": 70350291,
              "ownerIs": "Self",
              "trackTarget": "SelfAttackTarget",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode",
                "direction": {
                  "$type": "ConfigDirectionByAttackTarget",
                  "angleOffset": {
                    "x": 0.0,
                    "y": 0.0, //角度偏移
                    "z": 0.0
                  }
                }
              },
              "predicates": [
                {
                  "$type": "ByHasAttackTarget"
                }
              ]
            }
          ]
        },
        //脉冲发射器Lv1。每隔一段时间对周围敌人造成一次无伤害的水属性脉冲
        "ImpulseControllerLv1": {
          "thinkInterval": "%Impulse_Interval_Lv1",
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerWater_Halo_01_Loop",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode",
                "onGround": true
              }
            }
          ],
          "onThinkInterval": [
            {
              "$type": "DebugLog",
              "content": "TD: Water Tower: WATER IMPULSE LV1"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerWater_Halo_01_Once",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode",
                "offset": {
                  "x": 0,
                  "y": -0.75,
                  "z": 0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": "%Impulse_Range",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "strikeType": "Default",
                    "elementType": "Water",
                    "elementDurability": "%Impulse_Element_Durability",
                    "ignoreAttackerProperty": true
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV1",
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.0,
                    "muteHitText": false
                  }
                }
              }
            }
          ]
        },
        //脉冲发射器Lv2。每隔一段时间对周围敌人造成一次无伤害的水属性脉冲
        "ImpulseControllerLv2": {
          "thinkInterval": "%Impulse_Interval_Lv2",
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerWater_Halo_01_Loop",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode",
                "onGround": true
              }
            }
          ],
          "onThinkInterval": [
            {
              "$type": "DebugLog",
              "content": "TD: Water Tower: WATER IMPULSE LV2"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerWater_Halo_01_Once",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode",
                "offset": {
                  "x": 0,
                  "y": -0.75,
                  "z": 0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": "%Impulse_Range",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "strikeType": "Default",
                    "elementType": "Water",
                    "elementDurability": "%Impulse_Element_Durability",
                    "ignoreAttackerProperty": true
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV1",
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.0,
                    "muteHitText": false
                  }
                }
              }
            }
          ]
        },
        //潮湿增伤控制器。对潮湿状态的敌人造成额外伤害
        "WetBonusController": {
          "onAdded": [
            {
              "$type": "DebugLog",
              "content": "TD: Water Tower: WET BONUS"
            }
          ],
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "ignoreEventInfo": true,
              "damagePercentageRatio": "%Wet_Bonus_Lv1",
              "predicates": [
                {
                  "$type": "ByHasElement",
                  "element": "Water"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_Wet",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "ModifyDamageMixin",
              "ignoreEventInfo": true,
              "damagePercentageRatio": "%Wet_Bonus_Lv2",
              "predicates": [
                {
                  "$type": "ByHasElement",
                  "element": "Water"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_Wet",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            }
          ]
        },

        //水塔Dot控制器。攻击敌人时挂上水塔dot
        "DotController": {
          "onAdded": [
            {
              "$type": "DebugLog",
              "content": "TD: Water Tower: DOT CONTROLLER"
            }
          ],
          "onAttackLanded": [
            {
              "$type": "ApplyModifier",
              "target": "Target",
              "modifierName": "WaterDot",
              "predicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": ["Water_Base_Attack"]
                },
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                }
              ]
            }
          ]
        },
        //水塔dot实现。每隔一段时间爆炸，对附近敌人造成伤害
        "WaterDot": {
          "stacking": "Refresh",
          "duration": "%Dot_Time",
          "thinkInterval": "%Dot_Interval",
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerWater_Debuff_01_Loop",
              "born": {
                "$type": "ConfigBornBySelf",
                "offset": {
                  "x": 0,
                  "y": -1,
                  "z": 0
                }
              }
            }
          ],
          "onThinkInterval": [
            {
              "$type": "DebugLog",
              "content": "TD: Water Tower: WATER DOT DAMAGE"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerWater_Debuff_01_Once",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "Fx_ChestNode",
                "onGround": true
              },
              "predicates": [
                {
                  "$type": "ByEntityIsAlive",
                  "target": "Applier"
                }
              ]
            },

            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_Dot",
                  "value": 1,
                  "compareType": "LessAndEqual"
                }
              ],
              "successActions": [
                {
                  "$type": "TriggerAttackEvent",
                  "target": "Applier",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%Dot_Damage_Range",
                      "born": {
                        "$type": "ConfigBornBySelf"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Water_Dot_Attack",
                      "attackProperty": {
                        "damagePercentage": "%Dot_Damage_Lv1",
                        "strikeType": "Default",
                        "elementType": "Water",
                        "elementDurability": "%Dot_Element_Durability",
                        "enBreak": 10
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV3",
                        "overrideHitImpulse": {
                          "hitLevel": "Heavy",
                          "hitImpulseX": 50,
                          "hitImpulseY": 800
                        },
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  },
                  "predicates": [
                    {
                      "$type": "ByEntityIsAlive",
                      "target": "Applier"
                    }
                  ]
                }
              ],
              "failActions": [
                {
                  "$type": "TriggerAttackEvent",
                  "target": "Applier",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%Dot_Damage_Range",
                      "born": {
                        "$type": "ConfigBornBySelf"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Water_Dot_Attack",
                      "attackProperty": {
                        "damagePercentage": "%Dot_Damage_Lv2",
                        "strikeType": "Default",
                        "elementType": "Water",
                        "elementDurability": "%Dot_Element_Durability",
                        "enBreak": 10
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV3",
                        "overrideHitImpulse": {
                          "hitLevel": "Heavy",
                          "hitImpulseX": 50,
                          "hitImpulseY": 800
                        },
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  },
                  "predicates": [
                    {
                      "$type": "ByEntityIsAlive",
                      "target": "Applier"
                    }
                  ]
                }
              ]
            },

            //如果塔没了，把这个dot也下掉
            {
              "$type": "RemoveModifier",
              "modifierName": "WaterDot",
              "predicates": [
                {
                  "$type": "ByNot",
                  "predicates": [
                    {
                      "$type": "ByEntityIsAlive",
                      "target": "Applier"
                    }
                  ]
                }
              ]
            }
          ]
        },
        //提升感电伤害
        "UpgradeShockLv1": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactElectricDelta": 1
          }
        },
        "UpgradeShockLv2": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactElectricDelta": 2
          }
        },
        //提升蒸发伤害
        "UpgradeSteamLv1": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactSteamDelta": 0.5
          }
        },
        "UpgradeSteamLv2": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactSteamDelta": 1
          }
        }
      }
    }
  },

  //////////////////////////////////////////////////////////////////
  //
  // 水塔 水泡
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_Water_Bubble",
      "abilitySpecials": {
        "StruggleTime": 3,
        "DamageRatio": 0.15
      },
      "onAbilityStart": [
        {
          "$type": "DamageByAttackValue",
          "target": "Target",
          "attacker": "Caster",
          "born": {
            "$type": "ConfigBornByHitPoint",
            "offset": {
              "x": 0,
              "y": 0,
              "z": 0
            }
          },
          "attackInfo": {
            "attackProperty": {
              "damagePercentage": "%DamageRatio",
              "strikeType": "Default",
              "elementType": "Water",
              "elementDurability": 50,
              "elementRank": 1.5,
              "enBreak": 200
            },
            "hitPattern": {
              "onHitEffectName": "none",
              "hitImpulseType": "LV1",
              "hitHaltTime": 0.0,
              "hitHaltTimeScale": 0.05,
              "muteHitText": false
            }
          },
          "predicates": [
            {
              "$type": "ByEntityTypes",
              "target": "Target",
              "entityTypes": ["Monster"]
            }
          ]
        },
        {
          "$type": "ApplyModifier",
          "target": "Target",
          "modifierName": "Blister",
          "predicates": [
            {
              "$type": "ByEntityTypes",
              "target": "Target",
              "entityTypes": ["Monster"]
            },
            {
              "$type": "ByTargetWeight",
              "target": "Target",
              "logic": "Lesser",
              "weight": 100
            }
          ]
        },
        {
          "$type": "SetGlobalValue",
          "target": "Owner",
          "key": "Bubble_Pos1",
          "value": 0
        }
      ],
      "onKill": [
        {
          "$type": "FireEffect",
          "effectPattern": "Eff_SceneObj_TowerWater_03_Bubble_Die"
        }
      ],
      "onAdded": [
        {
          "$type": "ApplyModifier",
          "modifierName": "BubbleMaterial"
        },
        {
          "$type": "SetGlobalValue",
          "target": "Owner",
          "key": "Bubble_Pos1",
          "value": 1
        }
      ],
      "modifiers": {
        "BubbleMaterial": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerWater_03_Bubble",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode"
              }
            }
          ]
        },
        "Blister": {
          "duration": "%StruggleTime",
          "state": "Struggle",
          "stacking": "Refresh",
          "properties": {
            "Actor_AddGravityScale": -2
          },
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerWater_03_Bubble"
            }
          ],
          "onRemoved": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerWater_03_Bubble_Die"
            }
          ]
        }
      }
    }
  },

  //////////////////////////////////////////////////////////////////
  //
  // 塔防火炮塔
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_Fire",
      "abilitySpecials": {
        "Fire_Element_Durability": 50,

        "Impulse_Range": 12,
        "Impulse_Interval_Lv1": 20,
        "Impulse_Interval_Lv2": 10,
        "Impulse_Element_Durability": 200,

        "Melt_Bonus_Lv1": 0.5,
        "Melt_Bonus_Lv2": 1,

        "Missile_Bonus_Lv1": 2.0,
        "Missile_Bonus_Lv2": 3.0,
        //修改减防值，记得和灼热地面一起修改
        "Defensedown_Lv1": -0.1,
        "Defensedown_Lv2": -0.2,
        "Defensedown_Stack_Num": 3,
        "Defensedown_Duration": 20
      },
      "onAdded": [
        {
          "$type": "ApplyModifier",
          "modifierName": "TowerDefenceV2_Fire"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "SpecialAbilitiesController"
        },
        //标记自己是塔，给增幅器用
        {
          "$type": "SetGlobalValue",
          "key": "IS_TOWER",
          "value": 1
        }
      ],
      "modifiers": {
        //基础炮塔mixin
        "TowerDefenceV2_Fire": {
          "modifierMixins": [
            {
              "$type": "TDPlayMixinV2",
              "towerType": "Fire",
              "baseCD": 5,
              "baseAttackRange": 20,
              "bulletID": 70350295,
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint",
                "offset": {
                  "x": 0.0,
                  "y": 0.0,
                  "z": 0.0
                },
                "direction": {
                  "$type": "ConfigDirectionByAttackTarget"
                }
              },
              "onFireActions": [
                //如果不打子弹了，则走发射导弹的逻辑
                {
                  "$type": "Predicated",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "GV_IsShootBullet",
                      "value": 0
                    }
                  ],
                  "successActions": [
                    {
                      "$type": "FireEffect",
                      "effectPattern": "Eff_SceneObj_TowerFire_04_Fire",
                      "born": {
                        "$type": "ConfigBornByAttachPoint",
                        "attachPointName": "ShootPoint"
                      }
                    },
                    //在目标头上高空召一个导弹发射器，距离20m
                    {
                      "$type": "CreateGadget",
                      "propOwnerIs": "Caster",
                      "ownerIs": "Caster",
                      "target": "SelfAttackTarget",
                      //"otherTargets":
                      //{
                      //    "$type": "SelectTargetsByShape",
                      //    "shapeName": "CircleR20",
                      //    "centerBasedOn": "Self",
                      //    "campTargetType": "Enemy",
                      //    "campBasedOn": "Self",
                      //    "entityTypePriority":
                      //    [
                      //      "Monster",
                      //    ],
                      //    "topLimit" : 1,
                      //    "sortType": "Nearest", //从近开始选
                      //},
                      "gadgetID": 70350300,
                      "born": {
                        "$type": "ConfigBornByTarget",
                        "offset": {
                          "x": 0,
                          "y": 5,
                          "z": 0
                        }
                      }
                      //"predicates":
                      //[
                      //    {
                      //        "$type" : "ByTargetGlobalValue",
                      //        "target": "Self",
                      //        "key": "SGV_RangeLevel",
                      //        "value": 0,
                      //    }
                      //]
                    }
                    ////在目标头上高空召一个导弹发射器，距离30m
                    //{
                    //    "$type": "CreateGadget",
                    //    "propOwnerIs": "Caster",
                    //    "ownerIs": "Caster",
                    //    "otherTargets":
                    //    {
                    //        "$type": "SelectTargetsByShape",
                    //        "shapeName": "CircleR30",
                    //        "centerBasedOn": "Self",
                    //        "campTargetType": "Enemy",
                    //        "campBasedOn": "Self",
                    //        "entityTypePriority":
                    //        [
                    //          "Monster",
                    //        ],
                    //        "topLimit" : 1,
                    //        "sortType": "Nearest", //从近开始选
                    //    },
                    //    "gadgetID": 70350300,
                    //    "born":
                    //    {
                    //        "$type": "ConfigBornByTarget",
                    //        "offset":
                    //        {
                    //            "x": 0,
                    //            "y": 5,
                    //            "z": 0
                    //        }
                    //    },
                    //    "predicates":
                    //    [
                    //        {
                    //            "$type" : "ByTargetGlobalValue",
                    //            "target": "Self",
                    //            "key": "SGV_RangeLevel",
                    //            "value": 1,
                    //        }
                    //    ]
                    //},
                    ////在目标头上高空召一个导弹发射器，距离40m
                    //{
                    //    "$type": "CreateGadget",
                    //    "propOwnerIs": "Caster",
                    //    "ownerIs": "Caster",
                    //    "otherTargets":
                    //    {
                    //        "$type": "SelectTargetsByShape",
                    //        "shapeName": "CircleR40",
                    //        "centerBasedOn": "Self",
                    //        "campTargetType": "Enemy",
                    //        "campBasedOn": "Self",
                    //        "entityTypePriority":
                    //        [
                    //          "Monster",
                    //        ],
                    //        "topLimit" : 1,
                    //        "sortType": "Nearest", //从近开始选
                    //    },
                    //    "gadgetID": 70350300,
                    //    "born":
                    //    {
                    //        "$type": "ConfigBornByTarget",
                    //        "offset":
                    //        {
                    //            "x": 0,
                    //            "y": 5,
                    //            "z": 0
                    //        }
                    //    },
                    //    "predicates":
                    //    [
                    //        {
                    //            "$type" : "ByTargetGlobalValue",
                    //            "target": "Self",
                    //            "key": "SGV_RangeLevel",
                    //            "value": 2,
                    //        }
                    //    ]
                    //}
                  ]
                }
              ]
            }
          ]
        },

        //用于根据SGV上各种附加能力
        "SpecialAbilitiesController": {
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_FireImpulse",
              "valueSteps": [0.5, 1.5, 2.5],
              "modifierNameSteps": [
                "ImpulseControllerLv1",
                "ImpulseControllerLv2"
              ]
            },
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Missile",
              "valueSteps": [0.5, 2.5],
              "modifierNameSteps": ["MissileController"]
            },
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Defensedown",
              "valueSteps": [0.5, 2.5],
              "modifierNameSteps": ["DebuffController"]
            },
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Missile",
              "valueSteps": [0.5, 2.5],
              "modifierNameSteps": ["BonusDamageController"]
            },
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_FireArea",
              "valueSteps": [0.5, 2.5],
              "modifierNameSteps": ["FireAreaController"]
            },
            {
              //超载伤害提升
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_UpgradeElectricRecation",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["UpgradeExplodeLv1", "UpgradeExplodeLv2"]
            },
            {
              //蒸发伤害提升
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Evaporate",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["UpgradeSteamLv1", "UpgradeSteamLv2"]
            },
            {
              //融化伤害提升
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Melt",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["UpgradeMeltLv1", "UpgradeMeltLv2"]
            }
          ]
        },

        "MissileController": {
          //当SGV_Missile获得升级时，将IS_SHOOT_BULLET变为0，停止发射子弹
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "GV_IsShootBullet",
              "value": 0
            }
          ]
        },

        //脉冲发射器Lv1。每隔一段时间对周围敌人造成一次无伤害的火属性脉冲
        "ImpulseControllerLv1": {
          "thinkInterval": "%Impulse_Interval_Lv1",
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerFire_Halo_01_Loop",
              "target": "Self",
              "born": {
                "$type": "ConfigBornBySelf",
                "onGround": true
              }
            }
          ],
          "onThinkInterval": [
            {
              "$type": "DebugLog",
              "content": "TD: Fire Tower: FIRE IMPULSE LV1"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerFire_Halo_01_Once",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode",
                "offset": {
                  "x": 0,
                  "y": -0.75,
                  "z": 0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": "%Impulse_Range",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "strikeType": "Default",
                    "elementType": "Fire",
                    "elementDurability": "%Impulse_Element_Durability",
                    "ignoreAttackerProperty": true
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV1",
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.0,
                    "muteHitText": false
                  }
                }
              }
            }
          ]
        },
        //脉冲发射器Lv2。每隔一段时间对周围敌人造成一次无伤害的火属性脉冲
        "ImpulseControllerLv2": {
          "thinkInterval": "%Impulse_Interval_Lv2",
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerFire_Halo_01_Loop",
              "target": "Self",
              "born": {
                "$type": "ConfigBornBySelf",
                "onGround": true
              }
            }
          ],
          "onThinkInterval": [
            {
              "$type": "DebugLog",
              "content": "TD: Fire Tower: FIRE IMPULSE LV2"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerFire_Halo_01_Once",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode",
                "offset": {
                  "x": 0,
                  "y": -0.75,
                  "z": 0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": "%Impulse_Range",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "strikeType": "Default",
                    "elementType": "Fire",
                    "elementDurability": "%Impulse_Element_Durability",
                    "ignoreAttackerProperty": true
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV1",
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.0,
                    "muteHitText": false
                  }
                }
              }
            }
          ]
        },

        //导弹额外伤害控制器
        "BonusDamageController": {
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": ["Fire_Missile_Attack"],
              "damagePercentage": "%Missile_Bonus_Lv1",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_Missile",
                  "value": 1
                }
              ]
            },
            {
              "$type": "ModifyDamageMixin",
              "attackTags": ["Fire_Missile_Attack"],
              "damagePercentage": "%Missile_Bonus_Lv2",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_Missile",
                  "value": 2
                }
              ]
            }
          ]
        },

        //灼热地面控制器，造成伤害时施加灼热地面
        "FireAreaController": {
          "onAdded": [
            {
              "$type": "DebugLog",
              "content": "TD: Fire Tower: FireArea controller activited!"
            }
          ],
          "onAttackLanded": [
            {
              "$type": "DebugLog",
              "content": "TD: Fire Tower: Building FireArea under the target!"
            },
            {
              "$type": "CreateGadget",
              "gadgetID": 70350302,
              "target": "Target",
              "ownerIs": "Self",
              "propOwnerIs": "Self",
              "born": {
                "$type": "ConfigBornByTarget",
                "onGround": true
              },
              "predicates": [
                {
                  "$type": "ByAny",
                  "predicates": [
                    {
                      "$type": "ByAttackTags",
                      "attackTags": ["Fire_Base_Attack"]
                    },
                    {
                      "$type": "ByAttackTags",
                      "attackTags": ["Fire_Missile_Attack"]
                    }
                  ]
                }
              ]
            }
          ]
        },

        //降防控制器，造成伤害时施加防御下降
        "DebuffController": {
          "onAdded": [
            {
              "$type": "DebugLog",
              "content": "TD: Fire Tower: Debuff controller activited!"
            }
          ],
          "onAttackLanded": [
            {
              "$type": "DebugLog",
              "content": "TD: Fire Tower: Applying fire debuff to the target!"
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_Defensedown_Debuff_Lv1",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_Defensedown",
                  "value": 1
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_Defensedown_Debuff_Lv2",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_Defensedown",
                  "value": 2
                }
              ]
            }
          ]
        },

        //防御下降debuff Lv1
        "UNIQUE_Defensedown_Debuff_Lv1": {
          "isUnique": true,
          "duration": "%Defensedown_Duration",
          "stacking": "MultipleAllRefresh",
          "state": "DefenseDown",
          "stackingOption": {
            "maxModifierNumForMultipleType": "%Defensedown_Stack_Num"
          },
          "properties": {
            "Actor_DefenceRatio": "%Defensedown_Lv1"
          }
        },
        //防御下降debuff Lv2
        "UNIQUE_Defensedown_Debuff_Lv2": {
          "isUnique": true,
          "duration": "%Defensedown_Duration",
          "stacking": "MultipleAllRefresh",
          "state": "DefenseDown",
          "stackingOption": {
            "maxModifierNumForMultipleType": "%Defensedown_Stack_Num"
          },
          "properties": {
            "Actor_DefenceRatio": "%Defensedown_Lv2"
          }
        },

        //超载伤害提升
        "UpgradeExplodeLv1": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactExplodeDelta": 1
          }
        },
        "UpgradeExplodeLv2": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactExplodeDelta": 2
          }
        },
        //蒸发伤害提升
        "UpgradeSteamLv1": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactSteamDelta": 0.5
          }
        },
        "UpgradeSteamLv2": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactSteamDelta": 1
          }
        },
        //融化伤害提升
        "UpgradeMeltLv1": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactMeltDelta": 0.5
          }
        },
        "UpgradeMeltLv2": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactMeltDelta": 1
          }
        }
      }
    }
  },
  //////////////////////////////////////////////////////////////////
  //
  // 塔防火炮塔子弹（普通）
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_FireBullet",
      "abilitySpecials": {
        "Fire_Attack_Ratio": 1,
        "Fire_Element_Durability": 50,

        "Fire_Aoe_Range_base": 1.5,
        "Fire_Aoe_Range_Lv1": 3.5,
        "Fire_Aoe_Range_Lv2": 5.5
      },
      "onKill": [
        {
          "$type": "FireEffect",
          "effectPattern": "Eff_SceneObj_TowerFire_01_Hit"
        }
      ],
      "onAbilityStart": [
        {
          "$type": "Predicated",
          "targetPredicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_Aoe",
              "value": 0,
              "compareType": "MoreThan"
            }
          ],
          //单体攻击
          "failActions": [
            {
              "$type": "DebugLog",
              "content": "TD: Fire Tower: Single attack"
            },
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_Enbreak",
                  "value": 1
                }
              ],

              //单体攻击，带破霸体
              "successActions": [
                {
                  "$type": "TriggerAttackEvent",
                  "target": "OriginOwner",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%Fire_Aoe_Range_base",
                      "born": {
                        "$type": "ConfigBornByCollisionPoint"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Fire_Base_Attack",
                      "attackProperty": {
                        "damagePercentage": "%Fire_Attack_Ratio",
                        "elementType": "Fire",
                        "strikeType": "Blunt",
                        "elementDurability": "%Fire_Element_Durability",
                        "enBreak": 300
                      },
                      "hitPattern": {
                        "onHitEffectName": "Eff_SceneObj_TowerFire_01_Hit",
                        "hitImpulseType": "LV1",
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ],

              //单体攻击，不带破霸体
              "failActions": [
                {
                  "$type": "TriggerAttackEvent",
                  "target": "OriginOwner",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%Fire_Aoe_Range_base",
                      "born": {
                        "$type": "ConfigBornByCollisionPoint"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Fire_Base_Attack",
                      "attackProperty": {
                        "damagePercentage": "%Fire_Attack_Ratio",
                        "elementType": "Fire",
                        "strikeType": "Default",
                        "elementDurability": "%Fire_Element_Durability",
                        "enBreak": 10
                      },
                      "hitPattern": {
                        "onHitEffectName": "Eff_SceneObj_TowerFire_01_Hit",
                        "hitImpulseType": "LV1",
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ]
            }
          ],
          //溅射攻击
          "successActions": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_Enbreak",
                  "value": 1,
                  "compareType": "MoreThanAndEqual"
                }
              ],
              //造成范围伤害，带enbreak值
              "successActions": [
                {
                  "$type": "Predicated",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Owner",
                      "key": "SGV_Aoe",
                      "value": 1
                    }
                  ],

                  //范围伤害，LV1
                  "successActions": [
                    {
                      "$type": "DebugLog",
                      "content": "TD: Fire Tower: Aoe attack Lv1"
                    },
                    {
                      "$type": "TriggerAttackEvent",
                      "target": "OriginOwner",
                      "targetType": "Enemy",
                      "attackEvent": {
                        "attackPattern": {
                          "$type": "ConfigAttackSphere",
                          "triggerType": "TriggerNoRepeat",
                          "radius": "%Fire_Aoe_Range_Lv1",
                          "born": {
                            "$type": "ConfigBornByCollisionPoint"
                          }
                        },
                        "attackInfo": {
                          "attackTag": "Fire_Base_Attack",
                          "attackProperty": {
                            "damagePercentage": "%Fire_Attack_Ratio",
                            "elementType": "Fire",
                            "strikeType": "Blunt",
                            "elementDurability": "%Fire_Element_Durability",
                            "enBreak": 300
                          },
                          "hitPattern": {
                            "onHitEffectName": "Eff_SceneObj_TowerFire_02_Hit",
                            "hitImpulseType": "LV1",
                            "canBeDefenceHalt": false,
                            "hitHaltTime": 0.0,
                            "hitHaltTimeScale": 0.05,
                            "muteHitText": false
                          }
                        }
                      }
                    }
                  ],

                  //范围伤害，LV2
                  "failActions": [
                    {
                      "$type": "DebugLog",
                      "content": "TD: Fire Tower: Aoe attack Lv2"
                    },

                    {
                      "$type": "TriggerAttackEvent",
                      "target": "OriginOwner",
                      "targetType": "Enemy",
                      "attackEvent": {
                        "attackPattern": {
                          "$type": "ConfigAttackSphere",
                          "triggerType": "TriggerNoRepeat",
                          "radius": "%Fire_Aoe_Range_Lv2",
                          "born": {
                            "$type": "ConfigBornByCollisionPoint"
                          }
                        },
                        "attackInfo": {
                          "attackTag": "Fire_Base_Attack",
                          "attackProperty": {
                            "damagePercentage": "%Fire_Attack_Ratio",
                            "elementType": "Fire",
                            "strikeType": "Blunt",
                            "elementDurability": "%Fire_Element_Durability",
                            "enBreak": 300
                          },
                          "hitPattern": {
                            "onHitEffectName": "Eff_SceneObj_TowerFire_02_Hit",
                            "hitImpulseType": "LV1",
                            "canBeDefenceHalt": false,
                            "hitHaltTime": 0.0,
                            "hitHaltTimeScale": 0.05,
                            "muteHitText": false
                          }
                        }
                      }
                    }
                  ]
                }
              ],
              //造成范围伤害，不带enbreak值
              "failActions": [
                {
                  "$type": "Predicated",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Owner",
                      "key": "SGV_Aoe",
                      "value": 1
                    }
                  ],
                  "successActions": [
                    {
                      "$type": "DebugLog",
                      "content": "TD: Fire Tower: Aoe attack Lv1"
                    },
                    //范围伤害，LV1
                    {
                      "$type": "TriggerAttackEvent",
                      "target": "OriginOwner",
                      "targetType": "Enemy",
                      "attackEvent": {
                        "attackPattern": {
                          "$type": "ConfigAttackSphere",
                          "triggerType": "TriggerNoRepeat",
                          "radius": "%Fire_Aoe_Range_Lv1",
                          "born": {
                            "$type": "ConfigBornByCollisionPoint"
                          }
                        },
                        "attackInfo": {
                          "attackTag": "Fire_Base_Attack",
                          "attackProperty": {
                            "damagePercentage": "%Fire_Attack_Ratio",
                            "elementType": "Fire",
                            "strikeType": "Default",
                            "elementDurability": "%Fire_Element_Durability",
                            "enBreak": 10
                          },
                          "hitPattern": {
                            "onHitEffectName": "Eff_SceneObj_TowerFire_02_Hit",
                            "hitImpulseType": "LV1",
                            "canBeDefenceHalt": false,
                            "hitHaltTime": 0.0,
                            "hitHaltTimeScale": 0.05,
                            "muteHitText": false
                          }
                        }
                      }
                    }
                  ],
                  "failActions": [
                    {
                      "$type": "DebugLog",
                      "content": "TD: Fire Tower: Aoe attack Lv2"
                    },

                    //范围伤害，LV2
                    {
                      "$type": "TriggerAttackEvent",

                      "targetType": "Enemy",
                      "attackEvent": {
                        "attackPattern": {
                          "$type": "ConfigAttackSphere",
                          "triggerType": "TriggerNoRepeat",
                          "radius": "%Fire_Aoe_Range_Lv2",
                          "born": {
                            "$type": "ConfigBornByCollisionPoint"
                          }
                        },
                        "attackInfo": {
                          "attackTag": "Fire_Base_Attack",
                          "attackProperty": {
                            "damagePercentage": "%Fire_Attack_Ratio",
                            "elementType": "Fire",
                            "strikeType": "Default",
                            "elementDurability": "%Fire_Element_Durability",
                            "enBreak": 0
                          },
                          "hitPattern": {
                            "onHitEffectName": "Eff_SceneObj_TowerFire_02_Hit",
                            "hitImpulseType": "LV1",
                            "canBeDefenceHalt": false,
                            "hitHaltTime": 0.0,
                            "hitHaltTimeScale": 0.05,
                            "muteHitText": false
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          ]
        }
      ],
      "onAdded": [
        {
          "$type": "DebugLog",
          "content": "TD: Fire Tower: Bullet Built!"
        },
        {
          "$type": "SetGlobalValue",
          "target": "Self",
          "key": "IS_FIRE_BULLET",
          "value": 1
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "EffectController"
        }
      ],

      "modifiers": {
        //特效控制器，用于给子弹挂特效
        "EffectController": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerFire_01_Bullet",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode"
              }
            },
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerFire_01_Bullet_Trail",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode"
              }
            }
          ]
        }
      }
    }
  },
  //////////////////////////////////////////////////////////////////
  //
  // 塔防火炮塔灼热地面
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_FireArea",
      "abilitySpecials": {
        "FireArea_Duration": 5,
        "FireArea_Range": 3,

        "FireArea_Damage_Lv1": 0.3,
        "FireArea_Damage_Lv2": 0.6,

        "FireArea_Damage_Element_Durability": 100,

        //修改减防值，记得和子弹一起修改
        "Defensedown_Lv1": -0.1,
        "Defensedown_Lv2": -0.2,
        "Defensedown_Stack_Num": 3,
        "Defensedown_Duration": 20
      },
      "onAdded": [
        {
          "$type": "SetGlobalValue",
          "target": "Self",
          "key": "IS_FIRE_AREA",
          "value": 1
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "FireAreaController"
        }
      ],
      "modifiers": {
        //灼热地面控制器，实现灼热地面造成伤害
        "FireAreaController": {
          "duration": "%FireArea_Duration",
          "thinkInterval": 1,
          "onThinkInterval": [
            {
              "$type": "Predicated",
              "target": "Self",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_FireArea",
                  "value": 1
                }
              ],
              "successActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Fire Tower: Fire Area Damage Lv1!"
                },
                {
                  "$type": "TriggerAttackEvent",
                  "target": "OriginOwner",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%FireArea_Range",
                      "born": {
                        "$type": "ConfigBornBySelf"
                      }
                    },
                    "attackInfo": {
                      "attackProperty": {
                        "damagePercentage": "%FireArea_Damage_Lv1",
                        "elementType": "Fire",
                        "strikeType": "Default",
                        "elementDurability": "%FireArea_Damage_Element_Durability",
                        "enBreak": 0
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV1",
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.0,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ],
              "failActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Fire Tower: Fire Area Damage Lv2!"
                },
                {
                  "$type": "TriggerAttackEvent",
                  "target": "OriginOwner",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%FireArea_Range",
                      "born": {
                        "$type": "ConfigBornBySelf"
                      }
                    },
                    "attackInfo": {
                      "attackProperty": {
                        "damagePercentage": "%FireArea_Damage_Lv2",
                        "elementType": "Fire",
                        "strikeType": "Default",
                        "elementDurability": "%FireArea_Damage_Element_Durability",
                        "enBreak": 0
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV1",
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.0,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ]
            }
          ],
          //持续时间结束，销毁灼热地面
          "onRemoved": [
            {
              "$type": "KillSelf"
            }
          ]
        }
      }
    }
  },

  //////////////////////////////////////////////////////////////////
  //
  // 塔防火炮塔导弹创生器
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_FireMissileCreator",
      "onAdded": [
        {
          "$type": "ApplyModifier",
          "modifierName": "FireMissileCreatorController"
        }
      ],
      "modifiers": {
        //导弹创生器，向下发射一颗子弹
        "FireMissileCreatorController": {
          "duration": 0.2,
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerFire_04_Fire_Warning",
              "born": {
                "$type": "ConfigBornBySelf",
                "offset": {
                  "x": 0,
                  "y": -5,
                  "z": 0
                }
              }
            }
          ],
          "onRemoved": [
            {
              "$type": "TriggerBullet",
              "bulletID": 70350301,
              "ownerIs": "Owner",
              "born": {
                "$type": "ConfigBornBySelf",
                "direction": {
                  "$type": "ConfigDirectionByEntity",
                  "angleOffset": {
                    "x": 90,
                    "y": 0,
                    "z": 0
                  }
                }
              }
            },
            {
              "$type": "KillSelf"
            }
          ]
        }
      }
    }
  },
  //////////////////////////////////////////////////////////////////
  //
  // 塔防火炮塔导弹子弹
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_FireMissile",
      "abilitySpecials": {
        "Fire_Element_Durability": 100,

        "Fire_Aoe_Range_base": 1.5,
        "Fire_Aoe_Range_Lv1": 3.5,
        "Fire_Aoe_Range_Lv2": 5.5,

        //修改减防值，记得和灼热地面一起修改
        "Defensedown_Lv1": -0.1,
        "Defensedown_Lv2": -0.2,
        "Defensedown_Stack_Num": 3,
        "Defensedown_Duration": 20
      },
      "onAbilityStart": [
        {
          "$type": "Predicated",
          "targetPredicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_Aoe",
              "value": 0,
              "compareType": "MoreThan"
            }
          ],
          //单体攻击
          "failActions": [
            {
              "$type": "DebugLog",
              "content": "TD: Fire Tower: Single attack"
            },
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_Enbreak",
                  "value": 1
                }
              ],

              //单体攻击，带破霸体
              "successActions": [
                {
                  "$type": "TriggerAttackEvent",
                  "target": "OriginOwner",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%Fire_Aoe_Range_base",
                      "born": {
                        "$type": "ConfigBornByCollisionPoint"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Fire_Missile_Attack",
                      "attackProperty": {
                        "damagePercentage": 1.0,
                        "elementType": "Fire",
                        "strikeType": "Blunt",
                        "elementDurability": "%Fire_Element_Durability",
                        "enBreak": 300
                      },
                      "hitPattern": {
                        "onHitEffectName": "Eff_SceneObj_TowerFire_01_Hit",
                        "hitImpulseType": "LV1",
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ],

              //单体攻击，不带破霸体
              "failActions": [
                {
                  "$type": "TriggerAttackEvent",
                  "target": "OriginOwner",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%Fire_Aoe_Range_base",
                      "born": {
                        "$type": "ConfigBornByCollisionPoint"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Fire_Missile_Attack",
                      "attackProperty": {
                        "damagePercentage": 1.0,
                        "elementType": "Fire",
                        "strikeType": "Default",
                        "elementDurability": "%Fire_Element_Durability",
                        "enBreak": 10
                      },
                      "hitPattern": {
                        "onHitEffectName": "Eff_SceneObj_TowerFire_01_Hit",
                        "hitImpulseType": "LV1",
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ]
            }
          ],
          //溅射攻击
          "successActions": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_Enbreak",
                  "value": 1,
                  "compareType": "MoreThanAndEqual"
                }
              ],
              //造成范围伤害，带enbreak值
              "successActions": [
                {
                  "$type": "Predicated",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Owner",
                      "key": "SGV_Missile",
                      "value": 1
                    }
                  ],

                  //范围伤害，LV1
                  "successActions": [
                    {
                      "$type": "DebugLog",
                      "content": "TD: Fire Tower: Aoe attack Lv1"
                    },
                    {
                      "$type": "TriggerAttackEvent",
                      "target": "OriginOwner",
                      "targetType": "Enemy",
                      "attackEvent": {
                        "attackPattern": {
                          "$type": "ConfigAttackSphere",
                          "triggerType": "TriggerNoRepeat",
                          "radius": "%Fire_Aoe_Range_Lv1",
                          "born": {
                            "$type": "ConfigBornByCollisionPoint"
                          }
                        },
                        "attackInfo": {
                          "attackTag": "Fire_Missile_Attack",
                          "attackProperty": {
                            "damagePercentage": 1.0,
                            "elementType": "Fire",
                            "strikeType": "Blunt",
                            "elementDurability": "%Fire_Element_Durability",
                            "enBreak": 300
                          },
                          "hitPattern": {
                            "onHitEffectName": "Eff_SceneObj_TowerFire_02_Hit",
                            "hitImpulseType": "LV1",
                            "canBeDefenceHalt": false,
                            "hitHaltTime": 0.0,
                            "hitHaltTimeScale": 0.05,
                            "muteHitText": false
                          }
                        }
                      }
                    }
                  ],

                  //范围伤害，LV2
                  "failActions": [
                    {
                      "$type": "DebugLog",
                      "content": "TD: Fire Tower: Aoe attack Lv2"
                    },

                    {
                      "$type": "TriggerAttackEvent",
                      "target": "OriginOwner",
                      "targetType": "Enemy",
                      "attackEvent": {
                        "attackPattern": {
                          "$type": "ConfigAttackSphere",
                          "triggerType": "TriggerNoRepeat",
                          "radius": "%Fire_Aoe_Range_Lv2",
                          "born": {
                            "$type": "ConfigBornByCollisionPoint"
                          }
                        },
                        "attackInfo": {
                          "attackTag": "Fire_Missile_Attack",
                          "attackProperty": {
                            "damagePercentage": 1.0,
                            "elementType": "Fire",
                            "strikeType": "Blunt",
                            "elementDurability": "%Fire_Element_Durability",
                            "enBreak": 300
                          },
                          "hitPattern": {
                            "onHitEffectName": "Eff_SceneObj_TowerFire_02_Hit",
                            "hitImpulseType": "LV1",
                            "canBeDefenceHalt": false,
                            "hitHaltTime": 0.0,
                            "hitHaltTimeScale": 0.05,
                            "muteHitText": false
                          }
                        }
                      }
                    }
                  ]
                }
              ],
              //造成范围伤害，不带enbreak值
              "failActions": [
                {
                  "$type": "Predicated",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Owner",
                      "key": "SGV_Aoe",
                      "value": 1
                    }
                  ],
                  "successActions": [
                    {
                      "$type": "DebugLog",
                      "content": "TD: Fire Tower: Aoe attack Lv1"
                    },
                    //范围伤害，LV1
                    {
                      "$type": "TriggerAttackEvent",
                      "target": "OriginOwner",
                      "targetType": "Enemy",
                      "attackEvent": {
                        "attackPattern": {
                          "$type": "ConfigAttackSphere",
                          "triggerType": "TriggerNoRepeat",
                          "radius": "%Fire_Aoe_Range_Lv1",
                          "born": {
                            "$type": "ConfigBornByCollisionPoint"
                          }
                        },
                        "attackInfo": {
                          "attackTag": "Fire_Missile_Attack",
                          "attackProperty": {
                            "damagePercentage": 1.0,
                            "elementType": "Fire",
                            "strikeType": "Default",
                            "elementDurability": "%Fire_Element_Durability",
                            "enBreak": 10
                          },
                          "hitPattern": {
                            "onHitEffectName": "Eff_SceneObj_TowerFire_02_Hit",
                            "hitImpulseType": "LV1",
                            "canBeDefenceHalt": false,
                            "hitHaltTime": 0.0,
                            "hitHaltTimeScale": 0.05,
                            "muteHitText": false
                          }
                        }
                      }
                    }
                  ],
                  "failActions": [
                    {
                      "$type": "DebugLog",
                      "content": "TD: Fire Tower: Aoe attack Lv2"
                    },

                    //范围伤害，LV2
                    {
                      "$type": "TriggerAttackEvent",
                      "target": "OriginOwner",
                      "targetType": "Enemy",
                      "attackEvent": {
                        "attackPattern": {
                          "$type": "ConfigAttackSphere",
                          "triggerType": "TriggerNoRepeat",
                          "radius": "%Fire_Aoe_Range_Lv2",
                          "born": {
                            "$type": "ConfigBornByCollisionPoint"
                          }
                        },
                        "attackInfo": {
                          "attackTag": "Fire_Missile_Attack",
                          "attackProperty": {
                            "damagePercentage": 1.0,
                            "elementType": "Fire",
                            "strikeType": "Default",
                            "elementDurability": "%Fire_Element_Durability",
                            "enBreak": 0
                          },
                          "hitPattern": {
                            "onHitEffectName": "Eff_SceneObj_TowerFire_02_Hit",
                            "hitImpulseType": "LV1",
                            "canBeDefenceHalt": false,
                            "hitHaltTime": 0.0,
                            "hitHaltTimeScale": 0.05,
                            "muteHitText": false
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          ]
        },

        {
          "$type": "RemoveModifier",
          "modifierName": "EffectController"
        }
      ],
      "onAdded": [
        {
          "$type": "DebugLog",
          "content": "TD: Fire Tower: Bullet Built!"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "EffectController"
        }
      ],

      "modifiers": {
        //特效控制器，用于给子弹挂特效
        "EffectController": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerFire_Bullet_Up",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode"
              }
            },
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerFire_Bullet_Up_Trail",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode"
              }
            }
          ],
          "onRemoved": [
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerFire_01_Hit"
            }
          ]
        }
      }
    }
  },

  //////////////////////////////////////////////////////////////////
  //
  // 塔防冰炮塔
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_Ice",
      "abilitySpecials": {
        "Fire_Element_Durability": 50,

        "Impulse_Range": 12,
        "Impulse_Interval_Lv1": 20,
        "Impulse_Interval_Lv2": 10,
        "Impulse_Element_Durability": 200,

        "Ice_Freeze_Prolong_Lv1": 0.2,
        "Ice_Freeze_Prolong_Lv2": 0.4,

        "IceFog_Interval": 10
      },
      "onAdded": [
        {
          "$type": "ApplyModifier",
          "modifierName": "TowerDefenceV2_Ice"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "SpecialAbilitiesController"
        },
        //标记自己是塔，给增幅器用
        {
          "$type": "SetGlobalValue",
          "key": "IS_TOWER",
          "value": 1
        }
      ],
      "modifiers": {
        //基础炮塔mixin
        "TowerDefenceV2_Ice": {
          "modifierMixins": [
            {
              "$type": "TDPlayMixinV2",
              "towerType": "Ice",
              "baseCD": 3,
              "baseAttackRange": 15,
              "bulletID": 70350296,
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "ShootPoint",
                "offset": {
                  "x": 0.0,
                  "y": 0.0,
                  "z": 0.0
                },
                "direction": {
                  "$type": "ConfigDirectionByAttackTarget"
                }
              },
              "onFireActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Ice Tower: Base Attack!"
                }
              ]
            }
          ]
        },

        //用于根据SGV上各种附加能力
        "SpecialAbilitiesController": {
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_IceImpulse",
              "valueSteps": [0.5, 1.5, 2.5],
              "modifierNameSteps": [
                "ImpulseControllerLv1",
                "ImpulseControllerLv2"
              ]
            },
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Frozen",
              "valueSteps": [0.5, 1.5, 2.5],
              "modifierNameSteps": ["Freeze_Prolong_Lv1", "Freeze_Prolong_Lv2"]
            },
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Ice_Fog",
              "valueSteps": [0.5, 2.5],
              "modifierNameSteps": ["IceFogController"]
            },
            {
              //融化伤害提升
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Melt",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["UpgradeMeltLv1", "UpgradeMeltLv2"]
            },
            {
              //超导降低物理抗性
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_ReducePhysicalResistance",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": [
                "ReducePhysicalResistanceBySConductLv1",
                "ReducePhysicalResistanceBySConductLv2"
              ]
            }
          ]
        },

        //脉冲发射器Lv1。每隔一段时间对周围敌人造成一次无伤害的冰属性脉冲
        "ImpulseControllerLv1": {
          "thinkInterval": "%Impulse_Interval_Lv1",
          "onAdded": [
            //{
            //    "$type": "AttachEffect",
            //    "effectPattern": "Eff_SceneObj_TowerFire_Halo_01_Loop",
            //    "target": "Self",
            //    "born":
            //    {
            //        "$type": "ConfigBornByAttachPoint",
            //        "attachPointName": "RootNode",
            //        "offset":
            //        {
            //            "x": 0,
            //            "y": -0.75,
            //            "z": 0
            //        }
            //    },
            //},
          ],
          "onThinkInterval": [
            {
              "$type": "DebugLog",
              "content": "TD: Ice Tower: Ice IMPULSE LV1"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerIce_Halo_01",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode",
                "offset": {
                  "x": 0,
                  "y": -0.75,
                  "z": 0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": "%Impulse_Range",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "strikeType": "Default",
                    "elementType": "Ice",
                    "elementDurability": "%Impulse_Element_Durability",
                    "ignoreAttackerProperty": true
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV1",
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.0,
                    "muteHitText": false
                  }
                }
              }
            }
          ]
        },
        //脉冲发射器Lv2。每隔一段时间对周围敌人造成一次无伤害的冰属性脉冲
        "ImpulseControllerLv2": {
          "thinkInterval": "%Impulse_Interval_Lv2",
          "onAdded": [
            //{
            //    "$type": "AttachEffect",
            //    "effectPattern": "Eff_SceneObj_TowerFire_Halo_01_Loop",
            //    "target": "Self",
            //    "born":
            //    {
            //        "$type": "ConfigBornByAttachPoint",
            //        "attachPointName": "RootNode",
            //        "offset":
            //        {
            //            "x": 0,
            //            "y": -0.75,
            //            "z": 0
            //        }
            //    },
            //},
          ],
          "onThinkInterval": [
            {
              "$type": "DebugLog",
              "content": "TD: Ice Tower: ICE IMPULSE LV2"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerIce_Halo_01",
              "target": "Self",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode",
                "offset": {
                  "x": 0,
                  "y": -0.75,
                  "z": 0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": "%Impulse_Range",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "ShootPoint"
                  }
                },
                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "strikeType": "Default",
                    "elementType": "Ice",
                    "elementDurability": "%Impulse_Element_Durability",
                    "ignoreAttackerProperty": true
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV1",
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.0,
                    "muteHitText": false
                  }
                }
              }
            }
          ]
        },

        //冰雾发射器，每隔一段时间在自身周围制造一个冰雾
        "IceFogController": {
          "thinkInterval": "%IceFog_Interval",
          "onThinkInterval": [
            {
              "$type": "DebugLog",
              "content": "TD: Ice Tower: Building Icefog around self!"
            },
            {
              "$type": "CreateGadget",
              "lifeByOwnerIsAlive": true,
              "gadgetID": 70350297,
              "target": "Self",
              "propOwnerIs": "Caster",
              "born": {
                "$type": "ConfigBornByTarget",
                "onGround": true
              }
            }
          ]
        },

        //冻结反应延长 Lv1
        "Freeze_Prolong_Lv1": {
          "stacking": "Refresh",
          "properties": {
            "Actor_ElemReactFreezeDelta": "%Ice_Freeze_Prolong_Lv1"
          }
        },
        //冻结反应延长 Lv2
        "Freeze_Prolong_Lv2": {
          "stacking": "Refresh",
          "properties": {
            "Actor_ElemReactFreezeDelta": "%Ice_Freeze_Prolong_Lv2"
          }
        },

        //融化伤害提升
        "UpgradeMeltLv1": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactMeltDelta": 0.5
          }
        },
        "UpgradeMeltLv2": {
          "ignoreAttackerProperty": true,
          "trueDamage": true,
          "ignoreModifyDamage": true,
          "properties": {
            "Actor_ElemReactMeltDelta": 1
          }
        },
        //超导降低物理抗性
        "ReducePhysicalResistanceBySConductLv1": {
          "modifierMixins": [
            {
              "$type": "DoActionByElementReactionMixin",
              "range": 20, //这个就是默认值
              "entityTypes": ["Monster"],
              "reactionTypes": ["Superconductor"],
              "actions": [
                {
                  "$type": "ApplyModifier",
                  "target": "Target",
                  "modifierName": "UNIQUE_ReducePhysicResistenceLv1"
                }
              ]
            }
          ]
        },
        "ReducePhysicalResistanceBySConductLv2": {
          "modifierMixins": [
            {
              "$type": "DoActionByElementReactionMixin",
              "range": 20, //这个就是默认值
              "entityTypes": ["Monster"],
              "reactionTypes": ["Superconductor"],
              "actions": [
                {
                  "$type": "ApplyModifier",
                  "target": "Target",
                  "modifierName": "UNIQUE_ReducePhysicResistenceLv2"
                }
              ]
            }
          ]
        },
        "UNIQUE_ReducePhysicResistenceLv1": {
          "duration": 12,
          "isUnique": true,
          "stacking": "Refresh",
          "properties": {
            "Actor_PhysicalSubHurtDelta": -0.4
          }
        },
        "UNIQUE_ReducePhysicResistenceLv2": {
          "duration": 12,
          "isUnique": true,
          "stacking": "Refresh",
          "onAdded": [
            {
              "$type": "RemoveModifier",
              "modifierName": "UNIQUE_ReducePhysicResistenceLv1"
            }
          ],
          "properties": {
            "Actor_PhysicalSubHurtDelta": -0.8
          }
        }
      }
    }
  },
  //////////////////////////////////////////////////////////////////
  //
  // 塔防冰炮塔子弹
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_IceBullet",
      "abilitySpecials": {
        "Ice_Attack_Ratio": 0.5,
        "Ice_Element_Durability": 50,

        "Ice_Extra_Damage_Lv1": 1.25,
        "Ice_Extra_Damage_Lv2": 2.5,

        "Ice_Explosion_Ratio": 0.2,
        "Ice_Explosion_Range_Lv1": 2,
        "Ice_Explosion_Range_Lv2": 4,

        "Ice_Slowdown_Duration": 5,
        "Ice_Slowdown_Lv1": -1,
        "Ice_Slowdown_Lv2": -1,

        "Ice_Resistancedown_Duration": 5,
        "Ice_Resistancedown_Lv1": -0.25,
        "Ice_Resistancedown_Lv2": -0.5
      },
      "onRemoved": [],
      "onAbilityStart": [
        //冰子弹普通伤害
        {
          "$type": "DamageByAttackValue",
          "target": "Target",
          "attacker": "Caster",
          "attackInfo": {
            "attackTag": "Ice_Base_Attack",
            "attackProperty": {
              "damagePercentage": "%Ice_Attack_Ratio",
              "strikeType": "Default",
              "elementType": "Ice",
              "elementDurability": "%Ice_Element_Durability",
              "enBreak": 10
            },
            "hitPattern": {
              "hitImpulseType": "LV1",
              "onHitEffectName": "none",
              "overrideHitImpulse": {
                "hitLevel": "Light", //hitlevel = 2
                "hitImpulseX": 0, //hitlevel = 2
                "hitImpulseY": 0 //hitlevel = 2
              },
              "hitHaltTime": 0.0,
              "hitHaltTimeScale": 0.05,
              "muteHitText": false
            }
          }
        },
        //冰爆伤害Lv1
        {
          "$type": "TriggerAttackEvent",
          "targetType": "Enemy",
          "attackEvent": {
            "attackPattern": {
              "$type": "ConfigAttackSphere",
              "triggerType": "TriggerNoRepeat",
              "radius": "%Ice_Explosion_Range_Lv1",
              "born": {
                "$type": "ConfigBornByTarget"
              }
            },
            "attackInfo": {
              "attackProperty": {
                "damagePercentage": "%Ice_Explosion_Ratio",
                "elementType": "Ice",
                "strikeType": "Default",
                "elementDurability": "%Ice_Element_Durability",
                "enBreak": 10
              },
              "hitPattern": {
                "onHitEffectName": "Eff_SceneObj_TowerIce_04_Hit",
                "hitImpulseType": "LV1",
                "canBeDefenceHalt": false,
                "hitHaltTime": 0.0,
                "hitHaltTimeScale": 0.05,
                "muteHitText": false
              }
            }
          },
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_Explosion",
              "value": 1
            }
          ]
        },
        //冰爆伤害Lv2
        {
          "$type": "TriggerAttackEvent",
          "targetType": "Enemy",
          "attackEvent": {
            "attackPattern": {
              "$type": "ConfigAttackSphere",
              "triggerType": "TriggerNoRepeat",
              "radius": "%Ice_Explosion_Range_Lv2",
              "born": {
                "$type": "ConfigBornByTarget"
              }
            },
            "attackInfo": {
              "attackProperty": {
                "damagePercentage": "%Ice_Explosion_Ratio",
                "elementType": "Ice",
                "strikeType": "Default",
                "elementDurability": "%Ice_Element_Durability",
                "enBreak": 10
              },
              "hitPattern": {
                "onHitEffectName": "Eff_SceneObj_TowerIce_04_Hit",
                "hitImpulseType": "LV1",
                "canBeDefenceHalt": false,
                "hitHaltTime": 0.0,
                "hitHaltTimeScale": 0.05,
                "muteHitText": false
              }
            }
          },
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_Explosion",
              "value": 2
            }
          ]
        },
        {
          "$type": "DebugLog",
          "content": "TD: Ice: Try to kill ice bullet"
        },
        {
          "$type": "FireEffect",
          "effectPattern": "Eff_SceneObj_TowerIce_01_Hit",
          "born": {
            "$type": "ConfigBornByHitPoint",
            "offset": {
              "x": 0,
              "y": 0,
              "z": 0
            }
          }
        },
        {
          "$type": "RemoveModifier",
          "modifierName": "EffectController"
        },
        {
          "$type": "KillSelf"
        }
      ],
      "onAdded": [
        {
          "$type": "DebugLog",
          "content": "TD: Fire Tower: Bullet Built!"
        },
        {
          "$type": "SetGlobalValue",
          "target": "Self",
          "key": "IS_ICE_BULLET",
          "value": 1
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "EffectController"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "DebuffController"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "SpecialBulletControllerLv1",
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_TDSpecialGrade_Ice",
              "value": 1
            }
          ]
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "SpecialBulletControllerLv2",
          "predicates": [
            {
              "$type": "ByTargetGlobalValue",
              "target": "Owner",
              "key": "SGV_TDSpecialGrade_Ice",
              "value": 2
            }
          ]
        }
      ],

      "modifiers": {
        //特效控制器，用于给子弹挂特效
        "EffectController": {
          "onAdded": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_TDSpecialGrade_Ice",
                  "value": 0
                }
              ],
              "successActions": [
                {
                  "$type": "AttachEffect",
                  "effectPattern": "Eff_SceneObj_TowerIce_01_Bullet",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "RootNode"
                  }
                },
                {
                  "$type": "AttachEffect",
                  "effectPattern": "Eff_SceneObj_TowerIce_01_Bullet_Trail",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "RootNode"
                  }
                }
              ],
              "failActions": [
                {
                  "$type": "AttachEffect",
                  "effectPattern": "Eff_SceneObj_TowerIce_03_Bullet",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "RootNode"
                  }
                },
                {
                  "$type": "AttachEffect",
                  "effectPattern": "Eff_SceneObj_TowerIce_03_Bullet_Trail",
                  "born": {
                    "$type": "ConfigBornByAttachPoint",
                    "attachPointName": "RootNode"
                  }
                }
              ]
            }
          ]
        },

        //特殊子弹升级Lv1，对冻结目标造成额外伤害
        "SpecialBulletControllerLv1": {
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": ["Ice_Base_Attack"],
              "damagePercentageRatio": "%Ice_Extra_Damage_Lv1",
              "predicates": [
                {
                  "$type": "ByHasAbilityState",
                  "target": "Target",
                  "abilityState": "ElementFrozen"
                }
              ]
            }
          ]
        },
        //特殊子弹升级Lv2，对冻结目标造成额外伤害
        "SpecialBulletControllerLv2": {
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": ["Ice_Base_Attack"],
              "damagePercentageRatio": "%Ice_Extra_Damage_Lv2",
              "predicates": [
                {
                  "$type": "ByHasAbilityState",
                  "target": "Target",
                  "abilityState": "ElementFrozen"
                }
              ]
            }
          ]
        },

        //降防控制器，造成伤害时施加防御下降
        "DebuffController": {
          "onAdded": [
            {
              "$type": "DebugLog",
              "content": "TD: Ice Tower: Debuff controller activited!"
            }
          ],
          "onAttackLanded": [
            {
              "$type": "DebugLog",
              "content": "TD: Ice Tower: Applying Ice debuff to the target!"
            },
            //给目标上减速debuff
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_Slowdown_Debuff_Lv1",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_Slowdown",
                  "value": 1
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_Slowdown_Debuff_Lv2",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_Slowdown",
                  "value": 2
                }
              ]
            },
            //给目标上全元素抗性下降debuff
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_Resistancedown_Debuff_Lv1",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_Resistancedown",
                  "value": 1
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_Resistancedown_Debuff_Lv2",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_Resistancedown",
                  "value": 2
                }
              ]
            }
          ]
        },

        //减速debuff Lv1
        "UNIQUE_Slowdown_Debuff_Lv1": {
          "isUnique": true,
          "duration": "%Ice_Slowdown_Duration",
          "state": "SpeedDown",
          "stacking": "Refresh",
          "properties": {
            "Animator_MoveSpeedRatio": -0.25
          }
        },
        //减速debuff Lv2
        "UNIQUE_Slowdown_Debuff_Lv2": {
          "isUnique": true,
          "duration": "%Ice_Slowdown_Duration",
          "state": "SpeedDown",
          "stacking": "Refresh",
          "properties": {
            "Animator_MoveSpeedRatio": -0.5
          }
        },

        //全元素抗性下降 Lv1
        "UNIQUE_Resistancedown_Debuff_Lv1": {
          "isUnique": true,
          "duration": "%Ice_Resistancedown_Duration",
          "stacking": "Refresh",
          "properties": {
            "Actor_FireSubHurtDelta": "%Ice_Resistancedown_Lv1",
            "Actor_IceSubHurtDelta": "%Ice_Resistancedown_Lv1",
            "Actor_WaterSubHurtDelta": "%Ice_Resistancedown_Lv1",
            "Actor_WindSubHurtDelta": "%Ice_Resistancedown_Lv1",
            "Actor_RockSubHurtDelta": "%Ice_Resistancedown_Lv1",
            "Actor_GrassSubHurtDelta": "%Ice_Resistancedown_Lv1",
            "Actor_ElecSubHurtDelta": "%Ice_Resistancedown_Lv1"
          }
        },
        //全元素抗性下降 Lv2
        "UNIQUE_Resistancedown_Debuff_Lv2": {
          "isUnique": true,
          "duration": "%Ice_Resistancedown_Duration",
          "stacking": "Refresh",
          "properties": {
            "Actor_FireSubHurtDelta": "%Ice_Resistancedown_Lv2",
            "Actor_IceSubHurtDelta": "%Ice_Resistancedown_Lv2",
            "Actor_WaterSubHurtDelta": "%Ice_Resistancedown_Lv2",
            "Actor_WindSubHurtDelta": "%Ice_Resistancedown_Lv2",
            "Actor_RockSubHurtDelta": "%Ice_Resistancedown_Lv2",
            "Actor_GrassSubHurtDelta": "%Ice_Resistancedown_Lv2",
            "Actor_ElecSubHurtDelta": "%Ice_Resistancedown_Lv2"
          }
        }
      }
    }
  },
  //////////////////////////////////////////////////////////////////
  //
  // 塔防冰炮塔冰雾
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_IceFog",
      "abilitySpecials": {
        "IceFog_Duration": 5,
        "IceFog_Range": 6,

        "IceFog_Damage_Lv1": 0.5,
        "IceFog_Damage_Lv2": 1.0,

        "IceFog_Damage_Element_Durability": 50
      },
      "onAdded": [
        {
          "$type": "SetGlobalValue",
          "target": "Self",
          "key": "IS_ICE_FOG",
          "value": 1
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "IceFogController"
        }
      ],
      "modifiers": {
        //冰雾控制器，实现冰雾造成伤害
        "IceFogController": {
          "duration": "%IceFog_Duration",
          "thinkInterval": 1,
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "target": "Self",
              "type": "Bool",
              "effectPattern": "Eff_SceneObj_TowerIce_ShieldActivated_01",
              "parameter": "Activate",
              "value": 1
            }
          ],
          "onThinkInterval": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Owner",
                  "key": "SGV_Ice_Fog",
                  "value": 1
                }
              ],
              "successActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Ice Tower: Ice Fog Damage Lv1!"
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%IceFog_Range",
                      "born": {
                        "$type": "ConfigBornBySelf"
                      }
                    },
                    "attackInfo": {
                      "attackProperty": {
                        "damagePercentage": "%IceFog_Damage_Lv1",
                        "elementType": "Ice",
                        "strikeType": "Default",
                        "elementDurability": "%IceFog_Damage_Element_Durability",
                        "enBreak": 0
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV1",
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.0,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ],
              "failActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Ice Tower: Ice Fog Damage Lv2!"
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": "%IceFog_Range",
                      "born": {
                        "$type": "ConfigBornBySelf"
                      }
                    },
                    "attackInfo": {
                      "attackProperty": {
                        "damagePercentage": "%IceFog_Damage_Lv2",
                        "elementType": "Ice",
                        "strikeType": "Default",
                        "elementDurability": "%IceFog_Damage_Element_Durability",
                        "enBreak": 0
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV1",
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.0,
                        "muteHitText": false
                      }
                    }
                  }
                }
              ]
            }
          ],
          //持续时间结束，销毁冰雾
          "onRemoved": [
            {
              "$type": "SendEffectTrigger",
              "target": "Self",
              "type": "Bool",
              "effectPattern": "Eff_SceneObj_TowerIce_ShieldActivated_01",
              "parameter": "Kill",
              "value": 1
            },
            {
              "$type": "ApplyModifier",
              "target": "Self",
              "modifierName": "DelayKillSelf"
            }
          ]
        },
        "DelayKillSelf": {
          "duration": 1,
          "onRemoved": [
            {
              "$type": "KillSelf"
            }
          ]
        }
      }
    }
  },

  //////////////////////////////////////////////////////////////////
  //
  // 塔防地雷
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_Mine",
      "abilitySpecials": {
        "Mine_Element_Durability": 100,
        "Mine_Explode_Ratio": 5,
        "Mine_Explode_Range": 5,
        "Mine_Bonus_Lv1": 7,
        "Mine_Bonus_Lv2": 9,
        "Mine_Reset_Lv1": 15,
        "Mine_Reset_Lv2": 7.5
      },
      "abilityMixins": [
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "ActiveEffect"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 201,
          "modifierName": "DeactiveEffect"
        }
      ],
      "onAdded": [
        {
          "$type": "ApplyModifier",
          "modifierName": "TowerDefenceV2_Mine"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "SpecialAbilitiesController"
        },
        {
          "$type": "SetGlobalValue",
          "key": "IS_TOWER",
          "value": 1
        }
      ],
      "onFieldEnter": [
        {
          "$type": "Predicated",
          "target": "Target",
          "targetPredicates": [
            {
              "$type": "ByEntityTypes",
              "entityTypes": ["Monster"]
            },
            {
              "$type": "ByEntityIsAlive",
              "target": "Target"
            },
            {
              "$type": "ByTargetGadgetState",
              "target": "Self",
              "gadgetState": 0
            }
          ],
          "successActions": [
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_MineExplode",
              "target": "Self"
            }
          ]
        }
      ],
      "modifiers": {
        "ActiveEffect": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerBoom_01_Active",
              "born": {
                "$type": "ConfigBornBySelf"
              }
            },
            {
              "$type": "SetAnimatorBool",
              "boolID": "Active",
              "value": true
            }
          ]
        },
        "DeactiveEffect": {
          "onAdded": [
            {
              "$type": "SetAnimatorBool",
              "boolID": "Active",
              "value": false
            }
          ]
        },

        //处理额外爆炸
        "UNIQUE_MineExplode": {
          "isUnique": true,
          "onAdded": [
            {
              "$type": "DebugLog",
              "content": "TD: Mine: Mine explode"
            },
            //地雷爆炸
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_BombBarrel_01_Explode",
              "born": {
                "$type": "ConfigBornByTarget",
                "offset": {
                  "x": 0.0,
                  "y": 0.0,
                  "z": 0.0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": 5,
                  "born": {
                    "$type": "ConfigBornBySelf"
                  }
                },
                "attackInfo": {
                  "attackTag": "Mine_Base_Attack",
                  "attackProperty": {
                    "damagePercentage": "%Mine_Explode_Ratio",
                    "elementType": "Fire",
                    "strikeType": "Default",
                    "elementDurability": "%Mine_Element_Durability",
                    "enBreak": 150
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV1",
                    "canBeDefenceHalt": false,
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.05,
                    "muteHitText": false
                  }
                }
              }
            },
            //爆炸后判断是自身销毁还是切换到重载状态
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_Mine_Reset",
                  "value": 1,
                  "compareType": "MoreThanAndEqual"
                }
              ],
              "failActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Mine: Kill Self"
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "KillSelf"
                }
              ],
              "successActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Mine: Changing to deactive"
                },
                {
                  "$type": "ExecuteGadgetLua",
                  "target": "Self",
                  "param1": 201
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ResetCountdownLv1",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_Mine_Reset",
                      "value": 1
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ResetCountdownLv2",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_Mine_Reset",
                      "value": 2
                    }
                  ]
                }
              ]
            }
          ]
        },
        "KillSelf": {
          "duration": 0.3,
          "onRemoved": [
            {
              "$type": "KillSelf"
            }
          ]
        },
        //基础炮塔mixin
        "TowerDefenceV2_Mine": {
          "modifierMixins": [
            {
              "$type": "TDPlayMixinV2",
              "towerType": "Mine",
              "baseCD": 4,
              "baseAttackRange": 15,
              "bulletID": 0,
              "onFireActions": []
            }
          ]
        },

        //用于根据SGV上各种附加能力
        "SpecialAbilitiesController": {
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Mine_Extradamage",
              "valueSteps": [0.5, 1.5, 2.5],
              "modifierNameSteps": [
                "ExtraDamageControllerLV1",
                "ExtraDamageControllerLV2"
              ]
            },
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Mine_Extraexplosion",
              "valueSteps": [0.5, 1.5],
              "modifierNameSteps": ["ExtraExplosionController"]
            }
          ]
        },

        //诡雷50%血以下造成额外伤害Lv1
        "ExtraDamageControllerLV1": {
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",

              "damagePercentage": "%Mine_Bonus_Lv1",
              "attackTags": ["Mine_Base_Attack"],
              "predicates": [
                {
                  "$type": "ByTargetHPRatio",
                  "target": "Target",
                  "HPRatio": 0.5,
                  "logic": "LesserOrEqual"
                }
              ]
            }
          ]
        },
        //诡雷50%血以下造成额外伤害Lv2
        "ExtraDamageControllerLV2": {
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "damagePercentage": "%Mine_Bonus_Lv2",
              "attackTags": ["Mine_Base_Attack"],
              "predicates": [
                {
                  "$type": "ByTargetHPRatio",
                  "target": "Target",
                  "HPRatio": 0.5,
                  "logic": "LesserOrEqual"
                }
              ]
            }
          ]
        },

        //额外爆炸控制器，用于给目标施加额外爆炸
        "ExtraExplosionController": {
          "onAttackLanded": [
            {
              "$type": "ApplyModifier",
              "modifierName": "MonsterKillListener",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "HasExtraExploded",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ]
            }
          ]
        },

        //监听怪物死亡事件
        "MonsterKillListener": {
          "duration": 0.1,
          //监听被施加该效果的怪物死亡，释放一次爆炸
          "onRemoved": [
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByEntityIsAlive",
                  "target": "Self"
                }
              ],
              "failActions": [
                {
                  "$type": "ApplyModifier",
                  "target": "Applier",
                  "modifierName": "UNIQUE_ExtraExplode"
                }
              ]
            }
          ]
        },

        //处理额外爆炸
        "UNIQUE_ExtraExplode": {
          "isUnique": true,
          "onAdded": [
            {
              "$type": "DebugLog",
              "content": "TD: Mine: extra explode"
            },
            //地雷爆炸
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_BombBarrel_01_Explode",
              "born": {
                "$type": "ConfigBornByTarget",
                "offset": {
                  "x": 0.0,
                  "y": 0.0,
                  "z": 0.0
                }
              }
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": 5,
                  "born": {
                    "$type": "ConfigBornBySelf"
                  }
                },
                "attackInfo": {
                  "attackTag": "Mine_Base_Attack",
                  "attackProperty": {
                    "damagePercentage": "%Mine_Explode_Ratio",
                    "elementType": "Fire",
                    "strikeType": "Default",
                    "elementDurability": "%Mine_Element_Durability",
                    "enBreak": 150
                  },
                  "hitPattern": {
                    "hitImpulseType": "LV1",
                    "canBeDefenceHalt": false,
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.05,
                    "muteHitText": false
                  }
                }
              }
            },
            {
              "$type": "SetGlobalValue",
              "target": "Self",
              "key": "HasExtraExploded",
              "value": 1
            }
          ]
        },

        "ResetCountdownLv1": {
          "duration": "%Mine_Reset_Lv1",
          "onRemoved": [
            {
              "$type": "ExecuteGadgetLua",
              "target": "Self",
              "param1": 0
            },
            //移除掉爆炸modifier的unique占用
            {
              "$type": "RemoveModifier",
              "target": "Self",
              "modifierName": "UNIQUE_MineExplode"
            },
            {
              "$type": "SetGlobalValue",
              "target": "Self",
              "key": "HasExtraExploded",
              "value": 0
            },
            //重生的时候，尝试找一次范围内的怪，如果有，直接触发爆炸
            {
              "$type": "Predicated",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "campBasedOn": "Self",
                "entityTypePriority": ["Monster"],
                "campTargetType": "Enemy",
                "shapeName": "CircleR4",
                "sortType": "Random",
                "topLimit": 1
              },
              "targetPredicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByEntityIsAlive",
                  "target": "Target"
                }
              ],
              "successActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Mine: Mine explode"
                },

                {
                  "$type": "DebugLog",
                  "content": "TD: Mine: Changing to deactive"
                },
                {
                  "$type": "ExecuteGadgetLua",
                  "target": "Self",
                  "param1": 201
                },
                //地雷爆炸
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_BombBarrel_01_Explode",
                  "born": {
                    "$type": "ConfigBornByTarget",
                    "offset": {
                      "x": 0.0,
                      "y": 0.0,
                      "z": 0.0
                    }
                  }
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": 5,
                      "born": {
                        "$type": "ConfigBornBySelf"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Mine_Base_Attack",
                      "attackProperty": {
                        "damagePercentage": "%Mine_Explode_Ratio",
                        "elementType": "Fire",
                        "strikeType": "Default",
                        "elementDurability": "%Mine_Element_Durability",
                        "enBreak": 150
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV1",
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ApplyResetLv1",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_Mine_Reset",
                      "value": 1
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ApplyResetLv2",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_Mine_Reset",
                      "value": 2
                    }
                  ]
                }
              ]
            }
          ]
        },
        "ResetCountdownLv2": {
          "duration": "%Mine_Reset_Lv2",
          "onRemoved": [
            {
              "$type": "ExecuteGadgetLua",
              "target": "Self",
              "param1": 0
            },
            //移除掉爆炸modifier的unique占用
            {
              "$type": "RemoveModifier",
              "target": "Self",
              "modifierName": "UNIQUE_MineExplode"
            },
            {
              "$type": "SetGlobalValue",
              "target": "Self",
              "key": "HasExtraExploded",
              "value": 0
            },
            //重生的时候，尝试找一次范围内的怪，如果有，直接触发爆炸
            {
              "$type": "Predicated",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "campBasedOn": "Self",
                "entityTypePriority": ["Monster"],
                "campTargetType": "Enemy",
                "shapeName": "CircleR4",
                "sortType": "Random",
                "topLimit": 1
              },
              "targetPredicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByEntityIsAlive",
                  "target": "Target"
                }
              ],
              "successActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Mine: Changing to deactive"
                },
                {
                  "$type": "ExecuteGadgetLua",
                  "target": "Self",
                  "param1": 201
                },
                {
                  "$type": "DebugLog",
                  "content": "TD: Mine: Mine explode"
                },
                //地雷爆炸
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_BombBarrel_01_Explode",
                  "born": {
                    "$type": "ConfigBornByTarget",
                    "offset": {
                      "x": 0.0,
                      "y": 0.0,
                      "z": 0.0
                    }
                  }
                },
                {
                  "$type": "TriggerAttackEvent",
                  "targetType": "Enemy",
                  "attackEvent": {
                    "attackPattern": {
                      "$type": "ConfigAttackSphere",
                      "triggerType": "TriggerNoRepeat",
                      "radius": 5,
                      "born": {
                        "$type": "ConfigBornBySelf"
                      }
                    },
                    "attackInfo": {
                      "attackTag": "Mine_Base_Attack",
                      "attackProperty": {
                        "damagePercentage": "%Mine_Explode_Ratio",
                        "elementType": "Fire",
                        "strikeType": "Default",
                        "elementDurability": "%Mine_Element_Durability",
                        "enBreak": 150
                      },
                      "hitPattern": {
                        "hitImpulseType": "LV1",
                        "canBeDefenceHalt": false,
                        "hitHaltTime": 0.0,
                        "hitHaltTimeScale": 0.05,
                        "muteHitText": false
                      }
                    }
                  }
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ApplyResetLv1",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_Mine_Reset",
                      "value": 1
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ApplyResetLv2",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_Mine_Reset",
                      "value": 2
                    }
                  ]
                }
              ]
            }
          ]
        },
        "ApplyResetLv1": {
          "duration": 0.1,
          "onRemoved": [
            {
              "$type": "ApplyModifier",
              "modifierName": "ResetCountdownLv1"
            }
          ]
        },
        "ApplyResetLv2": {
          "duration": 0.1,
          "onRemoved": [
            {
              "$type": "ApplyModifier",
              "modifierName": "ResetCountdownLv2"
            }
          ]
        }
      }
    }
  },
  //////////////////////////////////////////////////////////////////
  //
  // 塔防禁锢机关
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_Trap",
      "abilitySpecials": {
        "Trap_Base_Time": 3,

        "Trap_Explode_Range": 5,

        "Trap_Prolong_Lv1": 5,
        "Trap_Prolong_Lv2": 7,

        "Trap_Bonus_Lv1": -0.5,
        "Trap_Bonus_Lv2": -1.0,

        "Trap_Reset_Lv1": 15,
        "Trap_Reset_Lv2": 7.5
      },
      "abilityMixins": [
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 0,
          "modifierName": "ActiveEffect"
        },
        {
          "$type": "AttachToGadgetStateMixin",
          "gadgetState": 201,
          "modifierName": "DeactiveEffect"
        }
      ],
      "onAdded": [
        {
          "$type": "ApplyModifier",
          "modifierName": "TowerDefenceV2_Mine"
        },
        {
          "$type": "SetGlobalValue",
          "key": "TriggeredOnce",
          "value": 0
        }
      ],
      "onKill": [],
      "onFieldEnter": [
        {
          "$type": "Predicated",
          "target": "Target",
          "targetPredicates": [
            {
              "$type": "ByEntityTypes",
              "entityTypes": ["Monster"]
            },
            {
              "$type": "ByEntityIsAlive",
              "target": "Target"
            },
            //有敌人进入范围时，必须要没有触发过才能再次触发
            {
              "$type": "ByTargetGlobalValue",
              "target": "Self",
              "key": "TriggeredOnce",
              "value": 0
            }
          ],
          "successActions": [
            {
              "$type": "DebugLog",
              "content": "TD: Trap: Trap active!"
            },
            {
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerTrap_01_Destroy"
            },
            //给触发目标挂上禁锢效果
            {
              "$type": "ApplyModifier",
              "modifierName": "ConfineEnemy",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_Trap_Extratime",
                  "value": 0
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "ConfineEnemyLv1",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_Trap_Extratime",
                  "value": 1
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "ConfineEnemyLv2",
              "target": "Target",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "SGV_Trap_Extratime",
                  "value": 2
                }
              ]
            },

            //触发后判断是自身销毁还是切换到重载状态
            {
              "$type": "Predicated",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_Trap_Reset",
                  "value": 1,
                  "compareType": "MoreThanAndEqual"
                }
              ],
              //自身销毁
              "failActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Trap: Kill Self"
                },
                {
                  "$type": "SetGlobalValue",
                  "key": "TriggeredOnce",
                  "value": 1
                },
                {
                  "$type": "KillSelf"
                }
              ],
              //进入重置状态
              "successActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Trap: Changing to deactive"
                },
                {
                  "$type": "SetGlobalValue",
                  "key": "TriggeredOnce",
                  "value": 1
                },
                {
                  "$type": "ExecuteGadgetLua",
                  "target": "Self",
                  "param1": 201
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ResetCountdownLv1",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_Trap_Reset",
                      "value": 1
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ResetCountdownLv2",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_Trap_Reset",
                      "value": 2
                    }
                  ]
                }
              ]
            }
          ]
        }
      ],
      "modifiers": {
        "ActiveEffect": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerTrap_01_Active",
              "born": {
                "$type": "ConfigBornBySelf"
              }
            }
          ]
        },
        "DeactiveEffect": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerTrap_01",
              "born": {
                "$type": "ConfigBornBySelf"
              }
            }
          ]
        },
        //基础炮塔mixin
        "TowerDefenceV2_Mine": {
          "modifierMixins": [
            {
              "$type": "TDPlayMixinV2",
              "towerType": "Default",
              "baseCD": 4,
              "baseAttackRange": 15,
              "bulletID": 0,
              "onFireActions": []
            }
          ]
        },

        "ConfineEnemy": {
          "duration": "%Trap_Base_Time",
          "stacking": "Refresh",
          // "state":"Paralyze", //无效的state，于2.5版本删除
          "properties": {
            "Animator_MoveSpeedRatio": -1
          },
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerTrap_01_Confined",
              "target": "Self",
              "born": {
                "$type": "ConfigBornBySelf"
                //"onGround": true
              }
            },
            //触发后，根据Extradamage等级施加增伤效果
            {
              "$type": "AttachModifier",
              "modifierName": "UNIQUE_BonusDamageLv1",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_Trap_Extradamage",
                  "value": 1,
                  "compareType": "MoreThanAndEqual"
                }
              ]
            },
            {
              "$type": "AttachModifier",
              "modifierName": "UNIQUE_BonusDamageLv2",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_Trap_Extradamage",
                  "value": 2
                }
              ]
            }
          ]
        },
        "ConfineEnemyLv1": {
          "duration": "%Trap_Prolong_Lv1",
          "stacking": "Refresh",
          // "state":"Paralyze", //无效的state，于2.5版本删除
          "properties": {
            "Animator_MoveSpeedRatio": -1
          },
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerTrap_01_Confined",
              "target": "Self",
              "born": {
                "$type": "ConfigBornBySelf"
                //"onGround": true
              }
            },
            //触发后，根据Extradamage等级施加增伤效果
            {
              "$type": "AttachModifier",
              "modifierName": "UNIQUE_BonusDamageLv1",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_Trap_Extradamage",
                  "value": 1,
                  "compareType": "MoreThanAndEqual"
                }
              ]
            },
            {
              "$type": "AttachModifier",
              "modifierName": "UNIQUE_BonusDamageLv2",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_Trap_Extradamage",
                  "value": 2
                }
              ]
            }
          ]
        },
        "ConfineEnemyLv2": {
          "duration": "%Trap_Prolong_Lv2",
          "stacking": "Refresh",
          // "state":"Paralyze",  //无效的state，于2.5版本删除
          "properties": {
            "Animator_MoveSpeedRatio": -1
          },
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerTrap_01_Confined",
              "target": "Self",
              "born": {
                "$type": "ConfigBornBySelf"
                //"onGround": true
              }
            },
            //触发后，根据Extradamage等级施加增伤效果
            {
              "$type": "AttachModifier",
              "modifierName": "UNIQUE_BonusDamageLv1",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_Trap_Extradamage",
                  "value": 1
                }
              ]
            },
            {
              "$type": "AttachModifier",
              "modifierName": "UNIQUE_BonusDamageLv2",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Applier",
                  "key": "SGV_Trap_Extradamage",
                  "value": 2
                }
              ]
            }
          ]
        },

        "UNIQUE_BonusDamageLv1": {
          "isUnique": true,
          "stacking": "Refresh",
          "state": "DefenseDown",
          "properties": {
            "Actor_SubHurtDelta": "%Trap_Bonus_Lv1"
          }
        },
        "UNIQUE_BonusDamageLv2": {
          "isUnique": true,
          "stacking": "Refresh",
          "state": "DefenseDown",
          "properties": {
            "Actor_SubHurtDelta": "%Trap_Bonus_Lv2"
          }
        },

        "ResetCountdownLv1": {
          "duration": "%Trap_Reset_Lv1",
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "TriggeredOnce",
              "value": 0
            },
            {
              "$type": "ExecuteGadgetLua",
              "target": "Self",
              "param1": 0
            },
            //重生的时候，尝试找一次范围内的怪，如果有，直接触发禁锢
            {
              "$type": "Predicated",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "campBasedOn": "Self",
                "entityTypePriority": ["Monster"],
                "campTargetType": "Enemy",
                "shapeName": "CircleR4",
                "sortType": "Random",
                "topLimit": 1
              },
              "targetPredicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByEntityIsAlive",
                  "target": "Target"
                },
                //有敌人进入范围时，必须要没有触发过才能再次触发
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "TriggeredOnce",
                  "value": 0
                }
              ],
              "successActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Trap: Changing to deactive"
                },
                {
                  "$type": "SetGlobalValue",
                  "key": "TriggeredOnce",
                  "value": 1
                },
                {
                  "$type": "ExecuteGadgetLua",
                  "target": "Self",
                  "param1": 201
                },
                {
                  "$type": "DebugLog",
                  "content": "TD: Trap: Trap active!"
                },
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_TowerTrap_01_Destroy"
                },
                //给触发目标挂上禁锢效果
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ConfineEnemy",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_Trap_Extratime",
                      "value": 0
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ConfineEnemyLv1",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_Trap_Extratime",
                      "value": 1
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ConfineEnemyLv2",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_Trap_Extratime",
                      "value": 2
                    }
                  ]
                },

                {
                  "$type": "ApplyModifier",
                  "modifierName": "ApplyResetLv1",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_Trap_Reset",
                      "value": 1
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ApplyResetLv2",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_Trap_Reset",
                      "value": 2
                    }
                  ]
                }
              ]
            }
          ]
        },
        "ResetCountdownLv2": {
          "duration": "%Trap_Reset_Lv2",
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "TriggeredOnce",
              "value": 0
            },
            {
              "$type": "ExecuteGadgetLua",
              "target": "Self",
              "param1": 0
            },
            //重生的时候，尝试找一次范围内的怪，如果有，直接触发禁锢
            {
              "$type": "Predicated",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "campBasedOn": "Self",
                "entityTypePriority": ["Monster"],
                "campTargetType": "Enemy",
                "shapeName": "CircleR4",
                "sortType": "Random",
                "topLimit": 1
              },
              "targetPredicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByEntityIsAlive",
                  "target": "Target"
                },
                //有敌人进入范围时，必须要没有触发过才能再次触发
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "TriggeredOnce",
                  "value": 0
                }
              ],
              "successActions": [
                {
                  "$type": "DebugLog",
                  "content": "TD: Trap: Changing to deactive"
                },
                {
                  "$type": "SetGlobalValue",
                  "key": "TriggeredOnce",
                  "value": 1
                },
                {
                  "$type": "ExecuteGadgetLua",
                  "target": "Self",
                  "param1": 201
                },
                {
                  "$type": "DebugLog",
                  "content": "TD: Trap: Trap active!"
                },
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_SceneObj_TowerTrap_01_Destroy"
                },
                //给触发目标挂上禁锢效果
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ConfineEnemy",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_Trap_Extratime",
                      "value": 0
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ConfineEnemyLv1",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_Trap_Extratime",
                      "value": 1
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ConfineEnemyLv2",
                  "target": "Target",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Self",
                      "key": "SGV_Trap_Extratime",
                      "value": 2
                    }
                  ]
                },

                {
                  "$type": "ApplyModifier",
                  "modifierName": "ApplyResetLv1",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_Trap_Reset",
                      "value": 1
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "modifierName": "ApplyResetLv2",
                  "target": "Self",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "SGV_Trap_Reset",
                      "value": 2
                    }
                  ]
                }
              ]
            }
          ]
        },
        "ApplyResetLv1": {
          "duration": 0.1,
          "onRemoved": [
            {
              "$type": "ApplyModifier",
              "modifierName": "ResetCountdownLv1"
            }
          ]
        },
        "ApplyResetLv2": {
          "duration": 0.1,
          "onRemoved": [
            {
              "$type": "ApplyModifier",
              "modifierName": "ResetCountdownLv2"
            }
          ]
        }
      }
    }
  },
  //////////////////////////////////////////////////////////////////
  //
  // 塔防斥力机关
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Level_Common_Property_Prop_TowerRepelV2",
      "abilitySpecials": {
        "MaxCrackTime": 0 //标记破碎上线
      },
      "onAdded": [
        {
          "$type": "ApplyModifier",
          "modifierName": "DurationManager"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "ShieldBase"
        },
        {
          //记录攻击的次数
          "$type": "SetGlobalValue",
          "target": "Self",
          "key": "GV_RepelTimes",
          "value": 0,
          "useLimitRange": true,
          "maxValue": 5,
          "minValue": 0
        }
      ],
      "onFieldEnter": [
        {
          "$type": "Predicated",
          "target": "Target",
          "targetPredicates": [
            {
              "$type": "ByEntityTypes",
              "entityTypes": ["Monster"]
            },
            {
              "$type": "ByTargetGlobalValue",
              "key": "GV_RepelTimes",
              "target": "Self",
              "value": "%MaxCrackTime",
              "compareType": "LessAndEqual"
            }
          ],
          "successActions": [
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_RepelEvent",
              "target": "Self"
            }
          ]
        },
        {
          //标记在区域里
          "$type": "SetGlobalValue",
          "target": "Target",
          "key": "GV_InRepelField",
          "value": 1
        }
      ],
      "onFieldExit": [
        {
          //标记不在区域里
          "$type": "SetGlobalValue",
          "target": "Target",
          "key": "GV_InRepelField",
          "value": 0
        }
      ],
      "modifiers": {
        "UNIQUE_RepelEvent": {
          "isUnique": true,
          "duration": 0.3,
          "onAdded": [
            {
              //攻击事件
              "$type": "TriggerAttackEvent",
              "target": "Self",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackBox",
                  "triggerType": "TriggerNoRepeat",
                  "size": {
                    "x": 12,
                    "y": 6,
                    "z": 5
                  },
                  "born": {
                    "$type": "ConfigBornBySelf",
                    "offset": {
                      "x": 0,
                      "y": 3,
                      "z": 1
                    },
                    "direction": {
                      "$type": "ConfigDirectionByDefault",
                      "angleOffset": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      }
                    }
                  }
                },

                "attackInfo": {
                  "attackProperty": {
                    "damagePercentage": 0.0,
                    "elementType": "None",
                    "strikeType": "Default",
                    "elementDurability": 0,
                    "enBreak": 75
                  },
                  "hitPattern": {
                    "onHitEffectName": "default",
                    "hitImpulseType": "LV7",
                    "overrideHitImpulse": {
                      "hitLevel": "Air",
                      "hitImpulseX": 800,
                      "hitImpulseY": 600
                    },
                    "reboundRatio": 0,
                    "canBeDefenceHalt": false,
                    "hitHaltTime": 0.0,
                    "hitHaltTimeScale": 0.05,
                    "muteHitText": false
                  }
                }
              }
            },
            {
              //触发次数+1
              "$type": "ApplyModifier",
              "modifierName": "AddRepelTime",
              "target": "Self"
            }
          ],
          "onAttackLanded": [
            //根据升级添加减速效果
            {
              "$type": "ApplyModifier",
              "target": "Target",
              "modifierName": "UNIQUE_SlowDownLv1",
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_SpeedDown",
                  "target": "Self",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "target": "Target",
              "modifierName": "UNIQUE_SlowDownLv2",
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "SGV_SpeedDown",
                  "target": "Self",
                  "value": 2,
                  "compareType": "Equal"
                }
              ]
            }
          ]
        },
        "DurationManager": {
          "modifierMixins": [
            {
              //设置冲击上限
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Durability",
              "valueSteps": [0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["DurationLv2", "DurationLv3"]
            },
            {
              //设置冲击上限
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "SGV_Durability",
              "valueSteps": [-0.5, 0.5, 1.5, 20],
              "removeAppliedModifier": true,
              "modifierNameSteps": [
                "ShieldControllerLv1",
                "ShieldControllerLv2",
                "ShieldControllerLv3"
              ]
            }
          ]
        },
        "ShieldControllerLv1": {
          "modifierMixins": [
            {
              //设置冲击上限
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "GV_RepelTimes",
              "valueSteps": [-0.5, 0.5, 1.5],
              "removeAppliedModifier": true,
              "modifierNameSteps": ["ShieldNormal", "ShieldDestory"]
            }
          ]
        },
        "ShieldControllerLv2": {
          "modifierMixins": [
            {
              //设置冲击上限
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "GV_RepelTimes",
              "valueSteps": [-0.5, 0.5, 1.5, 2.5, 3.5],
              "removeAppliedModifier": true,
              "modifierNameSteps": [
                "ShieldNormal",
                "ShieldNormal",
                "ShieldCrackV1",
                "ShieldDestory"
              ]
            }
          ]
        },
        "ShieldControllerLv3": {
          "modifierMixins": [
            {
              //设置冲击上限
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "GV_RepelTimes",
              "valueSteps": [-0.5, 0.5, 1.5, 2.5, 3.5, 4.5, 5.5],
              "removeAppliedModifier": true,
              "modifierNameSteps": [
                "ShieldNormal",
                "ShieldNormal",
                "ShieldCrackV1",
                "ShieldCrackV1",
                "ShieldCrackV2",
                "ShieldDestory"
              ]
            }
          ]
        },

        "DurationLv2": {
          "onAdded": [
            {
              "$type": "SetOverrideMapValue",
              "overrideMapKey": "MaxCrackTime",
              "value": 2
            }
          ]
        },
        "DurationLv3": {
          "onAdded": [
            {
              "$type": "SetOverrideMapValue",
              "overrideMapKey": "MaxCrackTime",
              "value": 4
            }
          ]
        },

        "UNIQUE_SlowDownLv1": {
          "duration": 8,
          "isUnique": true,
          "stacking": "Refresh",
          "state": "SpeedDown",
          "properties": {
            "Animator_MoveSpeedRatio": -0.3
          }
        },
        "UNIQUE_SlowDownLv2": {
          "duration": 8,
          "isUnique": true,
          "stacking": "Refresh",
          "state": "SpeedDown",
          "properties": {
            "Animator_MoveSpeedRatio": -0.6
          }
        },
        "ShieldBase": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerRepel_Shield",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode"
              }
            },
            {
              "$type": "ApplyModifier",
              "modifierName": "TriggerRepel",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR6",
                "centerBasedOn": "Self",
                "campTargetType": "All",
                "campBasedOn": "Self",
                "sortType": "Nearest" //从近开始选
              },
              "predicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "GV_InRepelField",
                  "target": "Target",
                  "value": 1,
                  "compareType": "Equal"
                }
              ]
            }
          ]
        },

        "TriggerRepel": {
          "duration": 0.3,
          "onAdded": [
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_FindInField",
              "target": "Applier"
            },
            {
              //标记不在区域里
              "$type": "SetGlobalValue",
              "target": "Self",
              "key": "GV_InRepelField",
              "value": 0
            }
          ]
        },

        "UNIQUE_FindInField": {
          "isUnique": true,
          "duration": 0.3,
          "onAdded": [
            {
              "$type": "ApplyModifier",
              "modifierName": "UNIQUE_RepelEvent",
              "target": "Self",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "GV_RepelTimes",
                  "target": "Self",
                  "value": "%MaxCrackTime",
                  "compareType": "LessAndEqual"
                }
              ]
            }
          ]
        },

        "ShieldNormal": {},
        "ShieldCrackV1": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerRepel_ShieldCracked_01",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode"
              }
            }
          ]
        },
        "ShieldCrackV2": {
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_SceneObj_TowerRepel_ShieldCracked_02",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode"
              }
            }
          ]
        },
        "ShieldDestory": {
          "onAdded": [
            {
              "$type": "ApplyModifier",
              "modifierName": "ShieldKill"
            },

            {
              "$type": "ApplyModifier",
              "modifierName": "ShieldRecoveryP1"
            }
          ]
        },

        "ShieldKill": {
          "duration": 0.1,
          "onRemoved": [
            {
              //播放破碎特效
              "$type": "FireEffect",
              "effectPattern": "Eff_SceneObj_TowerRepel_Destroy",
              "born": {
                "$type": "ConfigBornByAttachPoint",
                "attachPointName": "RootNode"
              }
            },
            {
              //移除护盾特效
              "$type": "RemoveModifier",
              "modifierName": "ShieldBase"
            },
            {
              //移除护盾特效
              "$type": "RemoveModifier",
              "modifierName": "ShieldNormal"
            },
            {
              "$type": "RemoveModifier",
              "modifierName": "ShieldCrackV1"
            },
            {
              "$type": "RemoveModifier",
              "modifierName": "ShieldCrackV2"
            }
          ]
        },

        "ShieldRecoveryP1": {
          //攻击次数重置为0
          "duration": 5.0,
          "onRemoved": [
            {
              //移除护盾特效
              "$type": "ApplyModifier",
              "modifierName": "ShieldRecoveryP2"
            }
          ]
        },
        "ShieldRecoveryP2": {
          //攻击次数重置为0
          "duration": 1.0,
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "GV_RepelTimes",
              "target": "Self",
              "value": 0
            },
            {
              //移除护盾特效
              "$type": "ApplyModifier",
              "modifierName": "ShieldBase"
            }
          ]
        },

        "AddRepelTime": {
          "duration": 0.3,
          "onAdded": [
            {
              "$type": "AddGlobalValue",
              "key": "GV_RepelTimes",
              "target": "Self",
              "value": 1
            }
          ]
        }
      }
    }
  },

  //////////////////////////////////////////////////////////////////
  //
  // 所有塔攻击提升用Ability
  //
  //////////////////////////////////////////////////////////////////
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "SceneObj_Gear_TowerDefenceV2_AttackRatioUp",
      "abilitySpecials": {
        "Attack_Up_Ratio_Lv1": 2.5,
        "Attack_Up_Ratio_Lv2": 5
      },
      "abilityMixins": [
        {
          "$type": "AttachModifierToSelfGlobalValueMixin",
          "globalValueKey": "SGV_AttackRatioUp",
          "valueSteps": [0.5, 1.5, 2.5],
          "modifierNameSteps": ["AttackRatioUpLv1", "AttackRatioUpLv2"]
        }
      ],

      "modifiers": {
        "AttackRatioUpLv1": {
          "stacking": "Refresh",
          "properties": {
            "Actor_AttackRatio": "%Attack_Up_Ratio_Lv1"
          }
        },
        "AttackRatioUpLv2": {
          "stacking": "Refresh",
          "properties": {
            "Actor_AttackRatio": "%Attack_Up_Ratio_Lv2"
          }
        }
      }
    }
  }
]
