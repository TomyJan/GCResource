[
  //2.4 自选buff活动buff配置
  //配置人：谢文川 更新时间2021-9-26 更新内容：新增测试用ability，上传到p4
  //配置人：谢文川 更新时间2021-9-27 更新内容：配置测试部分全队属性提升buff，未上传
  //配置人：谢文川 更新时间2021-9-28 更新内容：配置测试部分全队属性提升buff，全部测试完毕
  //配置人：谢文川 更新时间2021-9-29 更新内容：修正重击体力不消耗的bug，修正提交bug，新增冲刺体力消耗（未测）
  //配置人：谢文川 更新时间2021-9-30 更新内容：新增扩散反应增伤，未测试
  //配置人：谢文川 更新时间2021-10-08 更新内容：扩散反应增伤测试完毕，超导/超载/感电增伤buff配置并测试，增加元素战技命中获取能量球（未测试）
  //配置人：谢文川 更新时间2021-10-11 更新内容：增加增幅反应产生冲击波，攻击冻结敌人伤害提升（未测试），增加连续攻击物理攻击上升（未完成）
  //配置人：谢文川 更新时间2021-10-11 更新内容：攻击冻结敌人伤害提升（未测试），增加连续攻击物理攻击上升（测试完毕），增加两个治疗系列
  //配置人：谢文川 更新时间2021-10-17 更新内容：增加完所有buff，部分未测试
  //配置人：谢文川 更新时间2021-10-19 更新内容：修改一个速切buff设计，并配置完成
  //配置人：谢文川 更新时间2021-10-20 更新内容：修改血量判定，增加地脉异常配置
  //--------测试用配置---------------
  {
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "PotionTestAbility",
      "isDynamicAbility": true
      //------------测试区-------------
      //------------测试区-------------
    }
  }, //测试用Ability
  //---------------------------------------------------
  //----------------------通用buff---------------------
  {
    //队伍所有角色重击伤害提升{0}%
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_ThumDamageUp",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_ThumDamageUp"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_ThumDamageUp": {
          "isUnique": true,
          "stacking": "Unique",
          "isLimitedProperties": true,
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": ["ExtraAttack"],
              "damagePercentageRatio": "%ThumDamageUpRate"
            }
          ]
        }
      },
      "abilitySpecials": {
        "ThumDamageUpRate": 0
      }
    }
  },
  {
    //队伍所有角色普攻伤害提升{0}%
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_NormalAttackUp",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_NormalAttackUp"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_NormalAttackUp": {
          "isUnique": true,
          "stacking": "Unique",
          "isLimitedProperties": true,
          "state": "AttackUp",
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": [
                "NormalAttack_01",
                "NormalAttack_02",
                "NormalAttack_03",
                "NormalAttack_04",
                "NormalAttack_05",
                "NormalAttack_06"
              ],
              "damagePercentageRatio": "%NormalAttackUpRate"
            }
          ]
        }
      },
      "abilitySpecials": {
        "NormalAttackUpRate": 0
      }
    }
  },
  {
    //队伍中所有角色元素爆发伤害提升{0}%
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_ElementalBurstDamageUp",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_ElementalBurstDamageUp"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_ElementalBurstDamageUp": {
          "isUnique": true,
          "stacking": "Unique",
          "isLimitedProperties": true,
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": ["Elemental_Burst"],
              "damagePercentageRatio": "%ElementalBurstDamageUpRate"
            }
          ]
        }
      },
      "abilitySpecials": {
        "ElementalBurstDamageUpRate": 0
      }
    }
  },
  {
    //队伍重所有角色元素精通提升{0}
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_ElemMasteryDeltaUp",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_ElemMasteryDeltaUp"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_ElemMasteryDeltaUp": {
          "isUnique": true,
          "stacking": "Unique",
          "properties": {
            "Actor_ElemMasteryDelta": "%ElemMasteryDelta"
          }
        }
      },
      "abilitySpecials": {
        "ElemMasteryDelta": 0
      }
    }
  },
  {
    //队伍中所有角色防御力提升{0}%
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_DefenceUp_Team",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_DefenceUp_Team"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_DefenceUp_Team": {
          "isUnique": true,
          "stacking": "Unique",
          "state": "DefenseUp",
          "isLimitedProperties": true,
          "properties": {
            "Actor_DefenceRatio": "%DefenceUpRatio"
          }
        }
      },
      "abilitySpecials": {
        "DefenceUpRatio": 0
      }
    }
  },
  {
    //重击体力消耗减半
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_ThumpCostReduce",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_ThumpCostReduce"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_ThumpCostReduce": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "AttachToStateIDMixin",
              "stateIDs": [
                "ExtraAttack",
                "ExtraAttack1",
                "ExtraAttack2",
                "ExtraAttack3",
                "ExtraAttack_BS",
                "ExtraAttack_Charge",
                //
                "Attack01",
                "Attack02",
                "Attack03",
                "Attack04",
                "Attack05",
                "Attack06",
                //
                "Gandalfr_Attack01",
                "Gandalfr_Attack02",
                "Gandalfr_Attack03",
                "Gandalfr_Attack04",
                "Gandalfr_Attack05",
                "Gandalfr_Attack06",
                "Gandalfr_ExtraAttack",
                //
                "Katana_Attack01",
                "Katana_Attack02",
                "Katana_Attack03",
                "Katana_Attack04",
                "Katana_Attack05",
                "Katana_Attack06",
                "Katana_ExtraAttack"
              ],
              "modifierName": "ThumpCostReduce"
            }
          ]
        },
        "ThumpCostReduce": {
          "properties": {
            "Actor_CostStaminaRatio": "-1*%ThumpCostReduceRate"
          }
        }
      },
      "abilitySpecials": {
        "ThumpCostReduceRate": 0
      }
    }
  },
  {
    //冲刺体力消耗减半
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_DashStaminaReduce",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_DashStaminaReduce"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_DashStaminaReduce": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "AttachToStateIDMixin",
              "stateIDs": ["Sprint", "SprintBS"],
              "modifierName": "DashStaminaReduce"
            }
          ]
        },
        "DashStaminaReduce": {
          "properties": {
            "Actor_CostStaminaRatio": "-1*%DashStaminaReduceRate" //负数不能配在表里
          }
        }
      },
      "abilitySpecials": {
        "DashStaminaReduceRate": 0
      }
    }
  },
  {
    //释放元素爆发后，重击攻击力提升{0}%，持续{1}秒/修改：释放元素爆发后，场上角色重击/普攻/下落攻击，攻击力提升{0}%，持续{1}秒，下场后移除
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_ExtraAttackAtkUpAfterUseUltimateSkill",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_ExtraAttackAtkUpAfterUseUltimateSkill"
        },
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_ExtraAttackAtkUpAfterUseUltimateSkill_Action_RemoveModifier_OnAvatarOut"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_ExtraAttackAtkUpAfterUseUltimateSkill": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "OnAvatarUseSkillMixin", //检测使用技能时
              "clearSkillIdDelay": 0.2,
              "onTriggerUltimateSkill": [
                {
                  "$type": "ApplyModifier",
                  "target": "Self",
                  "modifierName": "UNIQUE_ExtraAttackAtkUp"
                }
              ]
            }
          ]
        },
        "UNIQUE_ExtraAttackAtkUp": {
          "isUnique": true,
          "stacking": "Refresh",
          "isLimitedProperties": true,
          "duration": "%ExtraAttackAtkUpDuration",
          //增加重击攻击
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": ["ExtraAttack"],
              "damagePercentageRatio": "%ThumDamageUpRate"
            },
            {
              "$type": "ModifyDamageMixin",
              "attackTags": [
                "NormalAttack_01",
                "NormalAttack_02",
                "NormalAttack_03",
                "NormalAttack_04",
                "NormalAttack_05",
                "NormalAttack_06"
              ],
              "damagePercentageRatio": "%NormalAttackUpRate"
            },
            {
              "$type": "ModifyDamageMixin",
              "attackTags": ["FallingAttack"],
              "damagePercentageRatio": "%FallingAttackUpRate"
            }
          ]
        },
        "UNIQUE_Activity_Potion_ExtraAttackAtkUpAfterUseUltimateSkill_Action_RemoveModifier_OnAvatarOut": {
          "isUnique": true,
          "stacking": "Unique",
          "onAvatarOut": [
            {
              "$type": "RemoveUniqueModifier",
              "doOffStage": true,
              "target": "Self",
              "modifierName": "UNIQUE_ExtraAttackAtkUp"
            }
          ]
        } //下场后移除
      },
      "abilitySpecials": {
        "ThumDamageUpRate": 0,
        "NormalAttackUpRate": 0,
        "FallingAttackUpRate": 0,
        "ExtraAttackAtkUpDuration": 0
      }
    }
  },
  {
    //触发扩散反应时，全队攻击力提升①%，持续②秒
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_SwirlIncreaseTeamAtk",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "doOffStage": true,
          "modifierName": "UNIQUE_Activity_Potion_SwirlIncreaseTeamAtk"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_SwirlIncreaseTeamAtk": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "DoActionByElementReactionMixin",
              "range": 20,
              "entityTypes": ["Monster"],
              "reactionTypes": [
                "SwirlFire",
                "SwirlElectric",
                "SwirlWater",
                "SwirlIce"
              ],
              "actions": [
                {
                  "$type": "AttachModifier",
                  "target": "CurTeamAvatars",
                  "modifierName": "UNIQUE_IncreaseTeamAtk",
                  "doOffStage": true
                }
              ]
            }
          ]
        }, //判断是否发生了扩散反应
        "UNIQUE_IncreaseTeamAtk": {
          "isUnique": true,
          "stacking": "Refresh",
          "duration": "%AtkUpRateDuration",
          "isLimitedProperties": true,
          "state": "AttackUp",
          "properties": {
            "Actor_AttackRatio": "%AtkUpRate"
          }
        } //攻击力上升
      },
      "abilitySpecials": {
        "AtkUpRate": 0,
        "AtkUpRateDuration": 0
      }
    }
  },
  {
    //每次触发超载/超导/感电反应时，全队伤害提升X%，持续X秒，这3种反应提升效果相互叠加独立计时，最多可提升4层
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_Explode_Superconductor_Shock_IncreaseDmg",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_Explode_Superconductor_Shock_IncreaseDmg"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_Explode_Superconductor_Shock_IncreaseDmg": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "DoActionByElementReactionMixin",
              "range": 20,
              "entityTypes": ["Monster"],
              "reactionTypes": ["Explode"],
              "actions": [
                {
                  "$type": "ApplyModifier",
                  "target": "CurTeamAvatars",
                  "doOffStage": true,
                  "modifierName": "Activity_Potion_Explode_Superconductor_Shock_IncreaseDmg_ByExplode"
                }
              ]
            },
            {
              "$type": "DoActionByElementReactionMixin",
              "range": 20,
              "entityTypes": ["Monster"],
              "reactionTypes": ["Superconductor"],
              "actions": [
                {
                  "$type": "ApplyModifier",
                  "target": "CurTeamAvatars",
                  "doOffStage": true,
                  "modifierName": "Activity_Potion_Explode_Superconductor_Shock_IncreaseDmg_BySuperconductor"
                }
              ]
            },
            {
              "$type": "DoActionByElementReactionMixin",
              "range": 20,
              "entityTypes": ["Monster"],
              "reactionTypes": ["Shock"],
              "actions": [
                {
                  "$type": "ApplyModifier",
                  "target": "CurTeamAvatars",
                  "doOffStage": true,
                  "modifierName": "Activity_Potion_Explode_Superconductor_Shock_IncreaseDmg_ByShock"
                }
              ]
            }
          ]
        },
        "Activity_Potion_Explode_Superconductor_Shock_IncreaseDmg_ByExplode": {
          "duration": "%DmgUpRateDuration",
          "stacking": "Refresh",
          "isLimitedProperties": true,
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "ignoreEventInfo": true,
              "damagePercentageRatio": "%DamageUpRate"
            }
          ]
        },
        "Activity_Potion_Explode_Superconductor_Shock_IncreaseDmg_BySuperconductor": {
          "duration": "%DmgUpRateDuration",
          "stacking": "Refresh",
          "isLimitedProperties": true,
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "ignoreEventInfo": true,
              "damagePercentageRatio": "%DamageUpRate"
            }
          ]
        },
        "Activity_Potion_Explode_Superconductor_Shock_IncreaseDmg_ByShock": {
          "duration": "%DmgUpRateDuration",
          "stacking": "Refresh",
          "isLimitedProperties": true,
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "ignoreEventInfo": true,
              "damagePercentageRatio": "%DamageUpRate"
            }
          ]
        },
        "Activity_Potion_Explode_Superconductor_Shock_IncreaseDmg": {
          "duration": "%DmgUpRateDuration",
          "stacking": "MultipleRefreshNoRemove",
          "isLimitedProperties": true,
          "stackingOption": {
            "maxModifierNumForMultipleType": "%DmgUpMaxLevel"
          },
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "ignoreEventInfo": true,
              "damagePercentageRatio": "%DamageUpRate"
            }
          ]
        }
      },
      "abilitySpecials": {
        "DamageUpRate": 0,
        "DmgUpRateDuration": 0,
        "DmgUpMaxLevel": 0
      }
    }
  },
  {
    //角色的元素战技命中后，获得恢复②点元素能量的元素微粒，③秒内只能触发一次
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_ElemnentalArt_GenerateBall",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "doOffStage": true,
          "modifierName": "UNIQUE_Activity_Potion_ElemnentalArt_GenerateBall"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_ElemnentalArt_GenerateBall": {
          "isUnique": true,
          "onAttackLanded": [
            {
              "$type": "Predicated",
              "target": "Other",
              "doOffStage": true,
              "targetPredicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": [
                    "Elemental_Art",
                    "Elemental_Art_Hold",
                    "Elemental_Art_Extra"
                  ]
                }, //判断伤害标签是否是元素战技
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                }, //判断伤害对象是否未怪物
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "GenerateBall_State",
                  "target": "Team",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                } //判断状态值是否为0
              ], //判断触发条件是否满足
              "successActions": [
                {
                  "$type": "GenerateElemBall",
                  "doOffStage": true,
                  "target": "CurLocalAvatar",
                  "configID": 2024, //原子能量球（全）
                  "baseEnergy": 6,
                  "ratio": 1,
                  "born": {
                    "$type": "ConfigBornByTarget",
                    "offset": {
                      "x": 0.0,
                      "y": 0.0,
                      "z": -0.5
                    },
                    "bornRandom": {
                      "$type": "BornRandomFromCenter",
                      "minRandomRange": 1,
                      "maxRandomRange": 2
                    }
                  }
                }, //生成能量球
                {
                  "$type": "DebugLog",
                  "content": "111111"
                },
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_Weapon_ExtraElementBall",
                  "target": "Self"
                },
                {
                  "$type": "ApplyModifier",
                  "target": "Team",
                  "doOffStage": true,
                  "modifierName": "UNIQUE_Activity_Potion_GenerateBall_CD"
                }
              ],
              "failActions": [
                {
                  "$type": "DebugLog",
                  "content": "无法执行"
                }
              ]
            }
          ]
        },
        "UNIQUE_Activity_Potion_GenerateBall_CD": {
          "isUnique": true,
          "duration": "%GenerateBall_CD",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "GenerateBall_State",
              "value": -1
            },
            {
              "$type": "DebugLog",
              "content": "进入cd"
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "GenerateBall_State",
              "value": 0
            }
          ]
        }
      },
      "abilitySpecials": {
        "GenerateBall_CD": 0,
        "GenerateBall_State": 0
      }
    }
  },
  {
    //队伍中当前场上角色造成伤害提升①%，受到伤害也提升②%
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_DamageUp_SubHurtDown",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "Activity_Potion_DamageUp_SubHurtDown_LocalAvatarListener"
        }
      ],
      "modifiers": {
        "Activity_Potion_DamageUp_SubHurtDown_LocalAvatarListener": {
          "modifierMixins": [
            {
              "$type": "CurLocalAvatarMixinV2",
              "modifierName": "UNIQUE_Activity_Potion_DamageUp_SubHurtDown"
            }
          ]
        },
        "UNIQUE_Activity_Potion_DamageUp_SubHurtDown": {
          "isUnique": true,
          "stacking": "Unique",
          "properties": {
            "Actor_AddHurtDelta": "%DamageUpRate",
            "Actor_SubHurtDelta": "-1*%SubHurtDownRate" //负
          }
        }
      },
      "abilitySpecials": {
        "DamageUpRate": 0,
        "SubHurtDownRate": 0
      }
    }
  },
  {
    //每次触发融化或蒸发反应时，会释放一次冲击波造成范围伤害①，该效果至多每②秒触发一次
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_Purple_After_Steam_Melt",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_Purple_After_Steam_Melt"
        },
        {
          "$type": "SetSystemValueToOverrideMap",
          "doOffStage": true,
          "key": "ImpactDamageSystemValue",
          "type": "ElementLevelCo"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_Purple_After_Steam_Melt": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "DoActionByElementReactionMixin",
              "range": 20,
              "entityTypes": ["Monster"],
              "reactionTypes": ["Stream", "Melt"], //判断触发元素反应
              "actions": [
                {
                  "$type": "Predicated",
                  "target": "Other",
                  "doOffStage": true,
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "GeneratePurpleState",
                      "target": "Team",
                      "value": 0,
                      "compareType": "NoneOrEqual"
                    }
                  ], //通过可以生成冲击波的状态判断cd是否结束
                  "successActions": [
                    // {
                    //     "$type": "FireEffect",
                    //     "born":
                    //     {
                    //         "$type":"ConfigBornByTarget",
                    //     },
                    //     "effectPattern": "Eff_EnergyDisk_ElementalBurst_Wave_R40",
                    // },
                    {
                      "$type": "ApplyModifier",
                      "doOffStage": true,
                      "target": "Target",
                      "modifierName": "Activity_Potion_Purple_After_Steam_Melt_GeneratePurple_Delay"
                    },
                    {
                      "$type": "ApplyModifier",
                      "doOffStage": true,
                      "target": "Team",
                      "modifierName": "UNIQUE_Activity_Potion_Purple_After_Steam_Melt_CD"
                    }
                  ]
                }
              ]
            }
          ]
        },
        "Activity_Potion_Purple_After_Steam_Melt_GeneratePurple_Delay": {
          "duration": 0.05,
          "onAdded": [
            {
              "$type": "FireEffect",
              "doAfterDie": true,
              "effectPattern": "Eff_EnergyDisk_ElementalBurst_Wave_R40"
            },
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "doAfterDie": true,
              "target": "Caster",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": 4,
                  "born": {
                    "$type": "ConfigBornBySelf"
                  }
                },
                "attackInfo": {
                  "canBeModifiedBy": "OriginOwner",
                  "attackProperty": {
                    "damageExtra": "%PurpleDamageValue*%ImpactDamageSystemValue",
                    "ignoreAttackerProperty": true, //忽略角色属性加成
                    "ignoreModifyDamage": true,
                    "trueDamage": true,
                    "attackType": "Melee",
                    "elementType": "None", //元素类型为无
                    "elementDurability": 0, //元素含量为0
                    "enBreak": 0
                  },
                  "hitPattern": {
                    "onHitEffectName": "default", //击中特效名称，
                    "hitImpulseType": "LV2", //击退？
                    "reboundRatio": 0, //需要解释
                    "canBeDefenceHalt": false, //持盾防御者无法产生额外卡肉
                    "hitHaltTime": 0,
                    "hitHaltTimeScale": 0.02,
                    "muteHitText": false //不跳字
                  } //打击效果
                }
              }
            } //生成圆形攻击盒
          ],
          "onRemoved": []
        },
        "UNIQUE_Activity_Potion_Purple_After_Steam_Melt_CD": {
          "isUnique": true,
          "stacking": "Unique", //防止cd被覆盖
          "duration": "%GenerateCDTime",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "GeneratePurpleState",
              "value": -1
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "GeneratePurpleState",
              "value": 0
            }
          ]
        }
      },
      "abilitySpecials": {
        "GenerateCDTime": 0,
        "GeneratePurpleState": 0,
        "PurpleDamageValue": 0,
        "ImpactDamageSystemValue": 0
      }
    }
  },
  {
    //角色攻击处于冻结状态的敌人时，伤害提升①%
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_AttackFrozenEnemy_IncreaseDamage",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_AttackFrozenEnemy_IncreaseDamage"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_AttackFrozenEnemy_IncreaseDamage": {
          "isUnique": true,
          "stacking": "Unique",
          "isLimitedProperties": true,
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "ignoreEventInfo": true, //不筛选攻击类型，所有攻击类型攻击力都获得加成
              "damagePercentageRatio": "%DamageUpRate",
              "predicates": [
                {
                  "$type": "ByHasAbilityState",
                  "target": "Target",
                  "abilityState": "ElementFrozen"
                }
              ]
            }
          ]
        }
      },
      "abilitySpecials": {
        "DamageUpRate": 0
      }
    }
  },

  {
    //角色的普通攻击在2秒内连续命中敌人时，该角色造成的物理伤害提升5%，持续10秒，至多叠加5层，下场时移除//废弃
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_ContinuousNormalAtk_PhysicalDamageUp",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_ContinuousNormalAtk_PhysicalDamageUp"
        },
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_ContinuousNormalAtk_PhysicalDamageUp_AvatarLeave"
        } //监听前台玩家是否下场
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_ContinuousNormalAtk_PhysicalDamageUp": {
          "isUnique": true,
          "stacking": "Unique",
          "onAttackLanded": [
            {
              "$type": "Predicated",
              "target": "Target",
              "targetPredicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Monster"]
                },
                {
                  "$type": "ByAttackTags",
                  "attackTags": [
                    "NormalAttack_01",
                    "NormalAttack_02",
                    "NormalAttack_03",
                    "NormalAttack_04",
                    "NormalAttack_05",
                    "NormalAttack_06"
                  ]
                }
              ],
              "successActions": [
                {
                  "$type": "ApplyModifier",
                  "target": "Caster",
                  "modifierName": "Activity_Potion_ContinuousNormalAtk_PhysicalDamageUp_DamageUpListener"
                }
              ]
            }
          ]
        },
        "Activity_Potion_ContinuousNormalAtk_PhysicalDamageUp_DamageUpListener": {
          "duration": 0.1,
          "onAdded": [
            {
              "$type": "Predicated",
              "target": "Caster", //ability的挂在对象
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "ContinuousNormalAtkState",
                  "forceByCaster": true, //强制将目标指向Caster
                  "value": 1,
                  "compareType": "Equal"
                }
              ],
              "successActions": [
                {
                  "$type": "ApplyModifier",
                  "target": "Caster",
                  "modifierName": "Activity_Potion_ContinuousNormalAtk_PhysicalDamageUp_DamagUp"
                }
              ]
            },
            {
              "$type": "ApplyModifier",
              "target": "Caster",
              "modifierName": "Activity_Potion_ContinuousNormalAtk_PhysicalDamageUp_ContinuousNormalAtkState_Handler"
            }
          ]
        },
        "Activity_Potion_ContinuousNormalAtk_PhysicalDamageUp_ContinuousNormalAtkState_Handler": {
          "stacking": "Refresh",
          "duration": "%ContinuousNormalAtkDuration",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "ContinuousNormalAtkState",
              "value": 1
            }
          ],
          "onRemoved": [
            {
              "$type": "ClearGlobalValue",
              "key": "ContinuousNormalAtkState"
            }
          ]
        },
        "Activity_Potion_ContinuousNormalAtk_PhysicalDamageUp_DamagUp": {
          "duration": "%DamageUpDuration",
          "stacking": "MultipleAllRefresh", //每添加一次重置所有buff的事件
          "state": "AttackUp",
          "onAdded": [
            {
              "$type": "DebugLog",
              "content": "wenchuan.xie_Test: PhysicalDamageUP"
            }
          ],
          "stackingOption": {
            "maxModifierNumForMultipleType": "%MaxBuffLevel"
          },
          "properties": {
            "Actor_PhysicalAddHurtDelta": "%PhysicalDamageUpRate"
          }
        },
        "UNIQUE_Activity_Potion_ContinuousNormalAtk_PhysicalDamageUp_AvatarLeave": {
          "isUnique": true,
          "onAvatarOut": [
            {
              "$type": "RemoveModifier",
              "doOffStage": true,
              "modifierName": "Activity_Potion_ContinuousNormalAtk_PhysicalDamageUp_DamagUp"
            }, //角色下场时把增伤buff移除
            {
              "$type": "RemoveModifier",
              "doOffStage": true,
              "modifierName": "Activity_Potion_ContinuousNormalAtk_PhysicalDamageUp_ContinuousNormalAtkState_Handler"
            }, //移除连续攻击计时器
            {
              "$type": "ClearGlobalValue",
              "key": "ContinuousNormalAtkState"
            }
          ]
        }
      },
      "abilitySpecials": {
        "ContinuousNormalAtkDuration": 0,
        "ContinuousNormalAtkState": 0,
        "DamageUpDuration": 0,
        "MaxBuffLevel": 0,
        "PhysicalDamageUpRate": 0
      }
    }
  },
  {
    //释放元素战技后，全队冷却缩减增加{0}%，持续{1}秒,该效果每{2}秒至多触发一次
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_SkillCDMinusRatioUp_AfterSkill",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_SkillCDMinusRatioUp_AfterSkill"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_SkillCDMinusRatioUp_AfterSkill": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "OnAvatarUseSkillMixin", //检测使用技能时
              "clearSkillIdDelay": 0.2,
              "onTriggerSkill": [
                {
                  "$type": "Predicated",
                  "target": "Other",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Team",
                      "key": "DecreaseCDState",
                      "value": 0,
                      "compareType": "NoneOrEqual"
                    } //判断是否可以添加buff
                  ],
                  "successActions": [
                    {
                      "$type": "ApplyModifier",
                      "target": "CurTeamAvatars",
                      "doOffStage": true,
                      "modifierName": "UNIQUE_Activity_Potion_SkillCDMinusRatioUp_AfterSkill_RatioUp"
                    },
                    {
                      "$type": "ApplyModifier",
                      "target": "Team",
                      "modifierName": "UNIQUE_Activity_Potion_SkillCDMinusRatioUp_AfterSkill_CD"
                    } //进入CD
                  ]
                }
              ]
            }
          ]
        },
        "UNIQUE_Activity_Potion_SkillCDMinusRatioUp_AfterSkill_RatioUp": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%DecreaseCDDuration",
          "isLimitedProperties": true,
          "onAdded": [
            {
              "$type": "DebugLog",
              "content": "wenchuan.xie_test:冷却缩减增加"
            }
          ],
          "properties": {
            "Actor_SkillCDMinusRatio": "%SkillCDMinusRatioUp"
          }
        },
        "UNIQUE_Activity_Potion_SkillCDMinusRatioUp_AfterSkill_CD": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%DecreaseCD_CD",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "DecreaseCDState",
              "value": -1
            },
            {
              "$type": "DebugLog",
              "content": "wenchuan.xie_test:进入cd"
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "DecreaseCDState",
              "value": 0
            }
          ]
        }
      },
      "abilitySpecials": {
        "DecreaseCD_CD": 0,
        "DecreaseCDState": 0,
        "DecreaseCDDuration": 0,
        "SkillCDMinusRatioUp": 0
      }
    }
  },
  {
    //角色普通攻击造成元素伤害时，当前角色获得一层A效果。A效果最多①秒触发一次，持续②秒，可叠加③层。每层A效果使得全元素伤害加成提高④%。
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_AllElementalDmgUp_AfterNormalAttack",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_AllElementalDmgUp_AfterNormalAttack_Decision_AttackLanded"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_AllElementalDmgUp_AfterNormalAttack_Decision_AttackLanded": {
          "isUnique": true,
          "stacking": "Unique",
          "onAttackLanded": [
            {
              "$type": "Predicated",
              "target": "Other",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Team",
                  "key": "OneElementalDmgUpCDState",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                },
                {
                  "$type": "ByHitDamage",
                  "target": "Target",
                  "damage": 0,
                  "logic": "Greater"
                }, //判断伤害
                {
                  "$type": "ByAttackTags",
                  "attackTags": [
                    "NormalAttack_01",
                    "NormalAttack_02",
                    "NormalAttack_03",
                    "NormalAttack_04",
                    "NormalAttack_05",
                    "NormalAttack_06"
                  ]
                }, //判断伤害类型
                {
                  "$type": "ByAny",
                  "predicates": [
                    {
                      "$type": "ByHitElement",
                      "element": "Fire"
                    },
                    {
                      "$type": "ByHitElement",
                      "element": "Water"
                    },
                    {
                      "$type": "ByHitElement",
                      "element": "Electric"
                    },
                    {
                      "$type": "ByHitElement",
                      "element": "Wind"
                    },
                    {
                      "$type": "ByHitElement",
                      "element": "Ice"
                    },
                    {
                      "$type": "ByHitElement",
                      "element": "Rock"
                    },
                    {
                      "$type": "ByHitElement",
                      "element": "Grass"
                    }
                  ]
                }
              ],
              "successActions": [
                {
                  "$type": "ApplyModifier",
                  "target": "Self",
                  "doOffStage": true,
                  "modifierName": "Activity_Potion_AllElementalDmgUp_AfterNormalAttack_Action_AllElementalDmgUp"
                }
              ]
            }
          ]
        },
        "Activity_Potion_AllElementalDmgUp_AfterNormalAttack_Action_AllElementalDmgUp": {
          "duration": "%ElementalDmgUpDuration",
          "isLimitedProperties": true,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": "%ElementalDmgUpMaxLevel"
          },
          "onAdded": [
            {
              "$type": "ApplyModifier",
              "target": "Team",
              "modifierName": "UNIQUE_Activity_Potion_AllElementalDmgUp_AfterNormalAttack_Action_CD"
            } //进入CD
          ],
          "properties": {
            "Actor_FireAddHurtDelta": "%OneDmgUpRate",
            "Actor_WaterAddHurtDelta": "%OneDmgUpRate",
            "Actor_GrassAddHurtDelta": "%OneDmgUpRate",
            "Actor_ElecAddHurtDelta": "%OneDmgUpRate",
            "Actor_IceAddHurtDelta": "%OneDmgUpRate",
            "Actor_WindAddHurtDelta": "%OneDmgUpRate",
            "Actor_RockAddHurtDelta": "%OneDmgUpRate"
          }
        },
        "UNIQUE_Activity_Potion_AllElementalDmgUp_AfterNormalAttack_Action_CD": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%OneElementalDmgUpCD",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "OneElementalDmgUpCDState",
              "value": -1
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "OneElementalDmgUpCDState",
              "value": 0
            }
          ]
        }
      },
      "abilitySpecials": {
        "OneDmgUpRate": 0,
        "ElementalDmgUpMaxLevel": 0,
        "ElementalDmgUpDuration": 0,
        "OneElementalDmgUpCD": 0
      }
    }
  },
  //----------------------通用buff---------------------
  //----------------------治疗主题----------------------
  {
    //所有角色治疗成效提升X%
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_ContinuousNormalAtk_HealEffectUp",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_ContinuousNormalAtk_HealEffectUp"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_ContinuousNormalAtk_HealEffectUp": {
          "isUnique": true,
          "stacking": "Unique",
          "properties": {
            "Actor_HealAddDelta": "%HealEffectUpRate"
          }
        }
      },
      "abilitySpecials": {
        "HealEffectUpRate": 0
      }
    }
  },
  {
    //角色每次受到治疗时，攻击力提升X%，持续X秒，最多可叠加3层
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_HealAttackUp",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_HealAttackUp"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_HealAttackUp": {
          "isUnique": true,
          "onBeingHealed": [
            {
              "$type": "ApplyModifier",
              "target": "Self",
              "doOffStage": true,
              "modifierName": "Activity_Potion_HealAttackUp_AttackUp"
            }
          ] //被治疗时
        },
        "Activity_Potion_HealAttackUp_AttackUp": {
          "stacking": "MultipleAllRefresh",
          "duration": "%AttackUpDuration",
          "stackingOption": {
            "maxModifierNumForMultipleType": "%AttackUpMaxLevel"
          },
          "properties": {
            "Actor_AttackRatio": "%AttackUpRate"
          }
        }
      },
      "abilitySpecials": {
        "AttackUpRate": 0,
        "AttackUpMaxLevel": 0,
        "AttackUpDuration": 0
      }
    }
  },
  {
    //当前场上角色的生命值高于90%时，造成的伤害提升X%。
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_HightHP_IncreaseDamage",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_ActivityAbility_Potion_HightHP_IncreaseDamage"
        }
      ],
      "modifiers": {
        "UNIQUE_ActivityAbility_Potion_HightHP_IncreaseDamage": {
          "isUnique": true,
          "stacking": "Unique",
          "isLimitedProperties": true,
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "ignoreEventInfo": true,
              "damagePercentageRatio": "%DamageUpRate",
              "predicates": [
                {
                  "$type": "ByTargetHPRatio",
                  "target": "Self",
                  "HPRatio": "%TargetHPRatio",
                  "logic": "GreaterOrEqual"
                }
              ]
            }
          ]
        }
      },
      "abilitySpecials": {
        "DamageUpRate": 0,
        "TargetHPRatio": 0
      }
    }
  },
  {
    //冲刺后，攻速提升X%，持续X秒，持续时间内再次触发刷新buff时长
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_ATKSpeedUp_AfterDash",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_ATKSpeedUp_AfterDash"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_ATKSpeedUp_AfterDash": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "AttachToStateIDMixin", //根据进入
              "stateIDs": ["SprintBS", "Sprint"],
              "modifierName": "UNIQUE_Activity_Potion_ATKSpeedUp_AfterDash_ATKSpeedUp_Handler"
            }
          ]
        },
        "UNIQUE_Activity_Potion_ATKSpeedUp_AfterDash_ATKSpeedUp_Handler": {
          "isUnique": true,
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "ApplyModifier",
              "target": "Self",
              "modifierName": "UNIQUE_Activity_Potion_ATKSpeedUp_AfterDash_ATKSpeedUp"
            }
          ]
        },
        "UNIQUE_Activity_Potion_ATKSpeedUp_AfterDash_ATKSpeedUp": {
          "isUnique": true,
          "stacking": "Refresh",
          "duration": "%ATKSpeedUpDuration",
          "properties": {
            "Animator_AttackSpeedRatio": "%ATKSpeedUpRatio"
          }
        }
      },
      "abilitySpecials": {
        "ATKSpeedUpDuration": 0,
        "ATKSpeedUpRatio": 0
      }
    }
  },
  //----------------------速切主题----------------------
  {
    //角色每次施放元素爆发后，全队所有角色元素爆发伤害提升{1}%，持续{2}秒，最多叠加{3}层
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_UltimateSkill_UltimateSkillDamageUp",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_UltimateSkill_UltimateSkillDamageUp"
        },
        {
          "$type": "ApplyModifier",
          "target": "Team",
          "modifierName": "UNIQUE_Activity_Potion_UltimateSkill_UltimateSkillDamageUp_Decision_IsTriggerUTSkill"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_UltimateSkill_UltimateSkillDamageUp": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "OnAvatarUseSkillMixin", //检测使用技能时
              "clearSkillIdDelay": 0.2,
              "onTriggerUltimateSkill": [
                // {
                //     "$type": "ApplyModifier",
                //     "target": "AllPlayerAvatars",
                //     "modifierName": "Activity_Potion_UltimateSkill_UltimateSkillDamageUp_DamageUp"
                // },
                {
                  "$type": "SetGlobalValue",
                  "target": "Team",
                  "key": "IsTriggerUTSkill",
                  "value": 1
                }
              ]
            }
          ]
        },
        "UNIQUE_Activity_Potion_UltimateSkill_UltimateSkillDamageUp_Decision_IsTriggerUTSkill": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "IsTriggerUTSkill",
              "valueSteps": [0.5, 1.5],
              "modifierNameSteps": [
                "UNIQUE_Activity_Potion_UltimateSkill_UltimateSkillDamageUp_DamageUp_Handler"
              ]
            }
          ]
        },
        "UNIQUE_Activity_Potion_UltimateSkill_UltimateSkillDamageUp_DamageUp_Handler": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": 0.1,
          "onAdded": [
            {
              "$type": "ApplyModifier",
              "target": "CurTeamAvatars",
              "modifierName": "UNIQUE_Activity_Potion_UltimateSkill_UltimateSkillDamageUp_DamageUp"
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "IsTriggerUTSkill",
              "value": 0
            }
          ]
        },
        "UNIQUE_Activity_Potion_UltimateSkill_UltimateSkillDamageUp_DamageUp": {
          "isUnique": true,
          "stacking": "MultipleAllRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": "%MaxLevel"
          },
          "duration": "%UltimateSkillDamageUpDuration",
          "isLimitedProperties": true,
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": ["Elemental_Burst"],
              "damagePercentageRatio": "%UltimateSkillDamageUpRate"
            }
          ]
        }
      },
      "abilitySpecials": {
        "UltimateSkillDamageUpDuration": 0,
        "UltimateSkillDamageUpRate": 0,
        "MaxLevel": 0
      }
    }
  },
  {
    //释放元素爆发后，元素战技CD减少，内置cd x秒（修改）/ 修改后：角色施放元素爆发后的{0}秒内，普攻/重击/下落攻击命中时产生一个能恢复2点元素能量的元素微粒，内置cd{2}秒。
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_HitTheTarget_GenerateBall_AfterUltimateSkill",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_HitTheTarget_GenerateBall_AfterUltimateSkill"
        },
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_HitTheTarget_GenerateBall"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_HitTheTarget_GenerateBall_AfterUltimateSkill": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "OnAvatarUseSkillMixin", //检测使用技能时
              "clearSkillIdDelay": 0.2,
              "onTriggerUltimateSkill": [
                {
                  "$type": "RemoveUniqueModifier",
                  "target": "Team",
                  "modifierName": "UNIQUE_Activity_Potion_HitTheTarget_GenerateBall_AfterUltimateSkill_Duration"
                }, //先移除一下确保新的能上
                {
                  "$type": "ApplyModifier",
                  "target": "Team",
                  "modifierName": "UNIQUE_Activity_Potion_HitTheTarget_GenerateBall_AfterUltimateSkill_Duration"
                }
              ]
            }
          ]
        },
        "UNIQUE_Activity_Potion_HitTheTarget_GenerateBall_AfterUltimateSkill_Duration": {
          "isUnique": true,
          "stacking": "Refresh",
          "duration": "%GenerateBallDuration",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "GenerateBallState",
              "value": 1
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "GenerateBallState",
              "value": 0
            },
            {
              "$type": "DebugLog",
              "content": "test:removed"
            }
          ]
        }, //可以产球的区间
        "UNIQUE_Activity_Potion_HitTheTarget_GenerateBall_AfterUltimateSkill_CD": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%GenerateBallCD",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "CDState",
              "value": -1
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "CDState",
              "value": 0
            }
          ]
        }, //技能CD
        "UNIQUE_Activity_Potion_HitTheTarget_GenerateBall": {
          "isUnique": true,
          "stacking": "Unique",
          "onAttackLanded": [
            {
              "$type": "Predicated",
              "target": "Other",
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Team",
                  "key": "CDState",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Team",
                  "key": "GenerateBallState",
                  "value": 1,
                  "compareType": "Equal"
                },
                {
                  "$type": "ByAny",
                  "predicates": [
                    {
                      "$type": "ByAttackTags",
                      "target": "Self",
                      "attackTags": [
                        "NormalAttack_01",
                        "NormalAttack_02",
                        "NormalAttack_03",
                        "NormalAttack_04",
                        "NormalAttack_05",
                        "NormalAttack_06"
                      ]
                    }, //普攻
                    {
                      "$type": "ByAttackTags",
                      "target": "Self",
                      "attackTags": [
                        "ExtraAttack",
                        "ExtraAttack1",
                        "ExtraAttack2",
                        "ExtraAttack3",
                        "ExtraAttack_BS",
                        "ExtraAttack_Charge"
                      ]
                    }, //重击
                    {
                      "$type": "ByAttackTags",
                      "target": "Self",
                      "attackTags": ["FallingAttack"]
                    } //下落攻击
                  ]
                }
              ],
              "successActions": [
                {
                  "$type": "FireEffect",
                  "effectPattern": "Eff_Weapon_ExtraElementBall",
                  "target": "Self"
                }, //播放特效
                {
                  "$type": "GenerateElemBall",
                  "doOffStage": true,
                  "configID": 2024, //原子能量球（全）
                  "baseEnergy": 10,
                  "ratio": 1,
                  "born": {
                    "$type": "ConfigBornBySelf",
                    "offset": {
                      "x": 0.0,
                      "y": 0.0,
                      "z": -0.5
                    },
                    "bornRandom": {
                      "$type": "BornRandomFromCenter",
                      "minRandomRange": 1,
                      "maxRandomRange": 2
                    }
                  }
                },
                {
                  "$type": "ApplyModifier",
                  "target": "Team",
                  "modifierName": "UNIQUE_Activity_Potion_HitTheTarget_GenerateBall_AfterUltimateSkill_CD"
                }
              ]
            }
          ]
        }
      },
      "abilitySpecials": {
        "GenerateBallDuration": 0,
        "GenerateBallState": 0,
        "GenerateBallCD": 0,
        "CDState": 0
      }
    }
  },
  {
    //元素爆发能量低于{0}%时，充能效率提升{1}%
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_LowEnergy_ChargeEfficiencyUp",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_LowEnergy_ChargeEfficiencyUp_Handler"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_LowEnergy_ChargeEfficiencyUp_Handler": {
          "isUnique": true,
          "stacking": "Unique",
          "isLimitedProperties": true,
          "modifierMixins": [
            {
              "$type": "AttachModifierToPredicateMixin",
              "modifierName": "UNIQUE_Activity_Potion_LowEnergy_ChargeEfficiencyUp",
              "predicates": [
                {
                  "$type": "ByEnergyRatio",
                  "target": "Self",
                  "ratio": "%TargetEnergyRatio",
                  "logic": "Lesser"
                }
              ]
            } //实时监控数据变化
          ]
        },
        "UNIQUE_Activity_Potion_LowEnergy_ChargeEfficiencyUp": {
          "isUnique": true,
          "stacking": "Unique",
          "isLimitedProperties": true,
          "properties": {
            "Actor_ChargeEfficiencyDelta": "%ChargeEfficiencyUpRate"
          }
        }
      },
      "abilitySpecials": {
        "TargetEnergyRatio": 0,
        "ChargeEfficiencyUpRate": 0
      }
    }
  },
  {
    //角色换入时，全队攻击力提升{0}%，持续{1}秒，最多叠加4层
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_AtkUp_OnAvatarIn",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_AtkUp_OnAvatarIn"
        },
        {
          "$type": "ApplyModifier",
          "target": "Team",
          "modifierName": "UNIQUE_Activity_Potion_AtkUp_OnAvatarIn_Decison_OnAvatarChange_Team"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_AtkUp_OnAvatarIn": {
          "isUnique": true,
          "onAvatarIn": [
            // {
            //     "$type": "ApplyModifier",
            //     "target": "CurTeamAvatars",
            //     "modifierName": "Activity_Potion_AtkUp_OnAvatarIn_AtkUp",
            // }
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "AvatarChangeState",
              "value": 1
            }
          ]
        },
        "UNIQUE_Activity_Potion_AtkUp_OnAvatarIn_Decison_OnAvatarChange_Team": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "AvatarChangeState",
              "valueSteps": [0.5, 1.5],
              "modifierNameSteps": [
                "UNIQUE_Activity_Potion_AtkUp_OnAvatarIn_Handler"
              ]
            }
          ]
        },
        "UNIQUE_Activity_Potion_AtkUp_OnAvatarIn_Handler": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": 0.1,
          "onAdded": [
            {
              "$type": "ApplyModifier",
              "target": "CurTeamAvatars",
              "modifierName": "Activity_Potion_AtkUp_OnAvatarIn_AtkUp"
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "AvatarChangeState",
              "value": 0
            }
          ]
        },
        "Activity_Potion_AtkUp_OnAvatarIn_AtkUp": {
          "stacking": "MultipleAllRefresh",
          "duration": "%AtkUpDuration",
          "state": "AttackUp",
          "isLimitedProperties": true,
          "stackingOption": {
            "maxModifierNumForMultipleType": "%AtkUpMaxLevel"
          },
          "properties": {
            "Actor_AttackRatio": "%AtkUpRate"
          }
        }
      },
      "abilitySpecials": {
        "AtkUpMaxLevel": 0,
        "AtkUpRate": 0,
        "AtkUpDuration": 0
      }
    }
  },
  //----------------------速切主题----------------------
  //----------------------岩系主题（废弃）----------------------
  {
    //每次触发结晶反应时，全队防御力{0}%和攻击力提升①%，持续②秒；
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_AtkUp_DefUp_Crystallize",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_AtkUp_DefUp_Crystallize"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_AtkUp_DefUp_Crystallize": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "DoActionByElementReactionMixin",
              "range": 20,
              "entityTypes": ["Monster"],
              "reactionTypes": [
                "CrystallizeElectric",
                "CrystallizeFire",
                "CrystallizeIce",
                "CrystallizeWater"
              ],
              "actions": [
                {
                  "$type": "ApplyModifier",
                  "target": "CurTeamAvatars",
                  "doOffStage": true,
                  "modifierName": "UNIQUE_Activity_Potion_AtkUp_DefUp_Crystallize_AtkUp_DefUp"
                }
              ]
            }
          ]
        },
        "UNIQUE_Activity_Potion_AtkUp_DefUp_Crystallize_AtkUp_DefUp": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%AtkUp_DefUpDuration",
          "isLimitedProperties": true,
          "properties": {
            "Actor_AttackRatio": "%AtkUpRate",
            "Actor_DefenceRatio": "%DefUpRate"
          }
        }
      },
      "abilitySpecials": {
        "AtkUpRate": 0,
        "DefUpRate": 0,
        "AtkUp_DefUpDuration": 0
      }
    }
  },
  {
    //角色拾取结晶球后会在原地产生一个小范围AOE（半径3米），对敌方造成系数为X的环境伤害并提升队内所有角色X%的岩元素伤害，持续6秒，X秒内只能触发一次
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_GainCrystalSeed_GenerateImpact",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_GainCrystalSeed_GenerateImpact"
        },
        {
          "$type": "SetSystemValueToOverrideMap",
          "doOffStage": true,
          "key": "ImpactDamageSystemValue",
          "type": "ElementLevelCo"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_GainCrystalSeed_GenerateImpact": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "DoActionByGainCrystalSeedMixin",
              "elementTypes": ["Fire", "Ice", "Electric", "Water"],
              "actions": [
                {
                  "$type": "Predicated",
                  "target": "Team",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "key": "AddBuffState",
                      "value": 0,
                      "target": "Team",
                      "compareType": "NoneOrEqual"
                    }
                  ], //判断cd
                  "successActions": [
                    {
                      "$type": "ApplyModifier",
                      "target": "Self",
                      "modifierName": "Activity_Potion_GainCrystalSeed_GenerateImpact_RockElementalDamageUp_Impact"
                    }, //释放冲击波
                    {
                      "$type": "ApplyModifier",
                      "target": "CurTeamAvatars",
                      "modifierName": "UNIQUE_Activity_Potion_GainCrystalSeed_GenerateImpact_RockElementalDamageUp_RockDamageUp"
                    }, //全队岩元素伤害提升
                    {
                      "$type": "ApplyModifier",
                      "target": "Team",
                      "modifierName": "UNIQUE_Activity_Potion_GainCrystalSeed_GenerateImpact_RockElementalDamageUp_RockDamageUp"
                    }, //进入cd
                    {
                      "$type": "FireEffect",
                      "effectPattern": "Eff_EnergyDisk_ElementalBurst_Wave_R40",
                      "born": {
                        "$type": "ConfigBornBySelf"
                      }
                    } //特效
                  ]
                }
              ]
            }
          ]
        },
        "Activity_Potion_GainCrystalSeed_GenerateImpact_RockElementalDamageUp_Impact": {
          "duration": 0.05,
          "onRemoved": [
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": "%AOERadius",
                  "born": {
                    "$type": "ConfigBornBySelf"
                  }
                },
                "attackInfo": {
                  "canBeModifiedBy": "OriginOwner",
                  "attackProperty": {
                    "damageExtra": "%ImpactDamageSystemValue*%ImpactDamageCoefficient",
                    "ignoreAttackerProperty": true, //忽略角色属性加成
                    "attackType": "Melee",
                    "elementType": "None", //元素类型为无
                    "elementDurability": 0, //元素含量为0
                    "enBreak": 0
                  },
                  "hitPattern": {
                    "onHitEffectName": "default", //击中特效名称，
                    "hitImpulseType": "LV2", //击退？
                    "reboundRatio": 0, //需要解释
                    "canBeDefenceHalt": false, //持盾防御者无法产生额外卡肉
                    "hitHaltTime": 0,
                    "hitHaltTimeScale": 0.02,
                    "muteHitText": false //不跳字
                  } //打击效果
                }
              }
            } //生成圆形攻击盒
          ]
        },
        "UNIQUE_Activity_Potion_GainCrystalSeed_GenerateImpact_RockElementalDamageUp_RockDamageUp": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%RockHurtUpDuration",
          "isLimitedProperties": true,
          "properties": {
            "Actor_RockAddHurtDelta": "%RockHurtUpRate"
          }
        },
        "UNIQUE_Activity_Potion_GainCrystalSeed_GenerateImpact_RockElementalDamageUp_CD": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%BuffCD",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "key": "AddBuffState",
              "value": -1
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "key": "AddBuffState",
              "value": 0
            }
          ]
        }
      },
      "abilitySpecials": {
        "RockHurtUpRate": 0,
        "RockHurtUpDuration": 0,
        "BuffCD": 0,
        "AddBuffState": 0,
        "AOERadius": 0,
        "ImpactDamageCoefficient": 0,
        "ImpactDamageSystemValue": 0
      }
    }
  },
  {
    //当前场上的角色处于岩创生物附近10米内时，重击造成的伤害提升30%，同时重击消耗的体力降低50%。
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_RockGadgetNearAvatar_ThumDamageUp_ThumpCostReduce",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_RockGadgetNearAvatar_ThumDamageUp_ThumpCostReduce_LocalAvatarListener"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_RockGadgetNearAvatar_ThumDamageUp_ThumpCostReduce_LocalAvatarListener": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "CurLocalAvatarMixinV2",
              "modifierName": "ActivityAbility_Potion_RockGadgetNearAvatar_Handler"
            }
          ]
        },
        "UNIQUE_ActivityAbility_Potion_RockGadgetNearAvatar_Handler": {
          "isUnique": true,
          "stacking": "Unique",
          "thinkInterval": 0.5,
          "onThinkInterval": [
            {
              "$type": "Predicated",
              "otherTargets": {
                "$type": "SelectTargetsByShape",
                "shapeName": "CircleR10",
                "centerBasedOn": "Self",
                "campTargetType": "AllExceptSelf",
                "campBasedOn": "Self"
              }, //设置圆形检测范围
              "targetPredicates": [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Gadget", "Bullet", "Field"]
                }, //范围内物体的类型
                {
                  "$type": "ByTargetGlobalValue",
                  "key": "_COMMON_GADGET_ISSUMMON", //这个GV不明确作用
                  "value": 1,
                  "compareType": "Equal"
                }
              ],
              "successActions": [
                {
                  "$type": "AttachModifier",
                  "target": "Self",
                  "modifierName": "UNIQUE_Activity_Potion_RockGadgetNearAvatar_ThumpCostReduce_Handler"
                }
              ]
            }
          ]
        }, //每0.5秒检测一次是否在身边存在岩创生物
        "UNIQUE_Activity_Potion_RockGadgetNearAvatar_ThumpCostReduce_Handler": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "AttachToStateIDMixin",
              "stateIDs": [
                "ExtraAttack",
                "ExtraAttack1",
                "ExtraAttack2",
                "ExtraAttack3",
                "ExtraAttack_BS",
                "ExtraAttack_Charge",
                //
                "Attack01",
                "Attack02",
                "Attack03",
                "Attack04",
                "Attack05",
                "Attack06",
                //
                "Gandalfr_Attack01",
                "Gandalfr_Attack02",
                "Gandalfr_Attack03",
                "Gandalfr_Attack04",
                "Gandalfr_Attack05",
                "Gandalfr_Attack06",
                "Gandalfr_ExtraAttack",
                //
                "Katana_Attack01",
                "Katana_Attack02",
                "Katana_Attack03",
                "Katana_Attack04",
                "Katana_Attack05",
                "Katana_Attack06",
                "Katana_ExtraAttack"
              ],
              "modifierName": "UNIQUE_Activity_Potion_RockGadgetNearAvatar_ThumpCostReduce"
            }
          ]
        },
        "UNIQUE_Activity_Potion_RockGadgetNearAvatar_ThumpCostReduce": {
          "isUnique": true,
          "stacking": "Unique",
          "isLimitedProperties": true,
          "onAdded": [
            {
              "$type": "AttachModifier",
              "modifierName": "UNIQUE_Activity_Potion_RockGadgetNearAvatar_ThumDamageUp"
            }
          ],
          "properties": {
            "Actor_CostStaminaRatio": "%ThumpCostReduceRate"
          }
        }, //减少重击体力消耗
        "UNIQUE_Activity_Potion_RockGadgetNearAvatar_ThumDamageUp": {
          "isUnique": true,
          "stacking": "Unique",
          "isLimitedProperties": true,
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": ["ExtraAttack"],
              "damagePercentageRatio": "%ThumDamageUpRate"
            }
          ]
        }
      }, //增加重击伤害
      "abilitySpecials": {
        "ThumpCostReduceRate": 0,
        "ThumDamageUpRate": 0
      }
    }
  },
  {
    //角色拾取结晶球后，提高自身全元素伤害加成，持续X秒，持续时间内拾取将刷新buff时长
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_GainCrystalSeed_AllElementalDamageUp",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_GainCrystalSeed_AllElementalDamageUp_Detector"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_GainCrystalSeed_AllElementalDamageUp_Detector": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "DoActionByGainCrystalSeedMixin",
              "elementTypes": ["Fire", "Ice", "Electric", "Water"],
              "actions": [
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_Activity_Potion_GainCrystalSeed_AllElementalDamageUp"
                }
              ]
            }
          ]
        },
        "UNIQUE_Activity_Potion_GainCrystalSeed_AllElementalDamageUp": {
          "isUnique": true,
          "duration": "%AllElementalDamageUpDuration",
          "stacking": "Refresh",
          "state": "AttackUp",
          "properties": {
            "Actor_FireAddHurtDelta": "%AllElementalDamageUpRate",
            "Actor_WaterAddHurtDelta": "%AllElementalDamageUpRate",
            "Actor_GrassAddHurtDelta": "%AllElementalDamageUpRate",
            "Actor_ElecAddHurtDelta": "%AllElementalDamageUpRate",
            "Actor_IceAddHurtDelta": "%AllElementalDamageUpRate",
            "Actor_WindAddHurtDelta": "%AllElementalDamageUpRate",
            "Actor_RockAddHurtDelta": "%AllElementalDamageUpRate"
          }
        }
      },
      "abilitySpecials": {
        "AllElementalDamageUpDuration": 0,
        "AllElementalDamageUpRate": 0
      }
    }
  },
  //----------------------岩系主题（废弃）----------------------
  //----------------------速攻主题----------------------
  {
    //角色击杀敌人后，自己的普通攻击速度和移动速度提升{0}%，持续{1}秒，CD{2}秒
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_AtkSpeedUp_MoveSpeedUp_OnKillEnemies",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_AtkSpeedUp_MoveSpeedUp_OnKillEnemies_Decision_IsKillEnemies"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_AtkSpeedUp_MoveSpeedUp_OnKillEnemies_Decision_IsKillEnemies": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "DoActionByKillingMixin",
              "detectWindow": 0.5,
              "onKill": [
                {
                  "$type": "ApplyModifier",
                  "doOffStage": true,
                  "target": "CurLocalAvatar",
                  "modifierName": "UNIQUE_Activity_Potion_AtkSpeedUp_MoveSpeedUp_OnKillEnemies_Action_AtkMoveSpeedUp",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Team",
                      "key": "CanAddAtkMoveSpeedUp",
                      "value": 0,
                      "compareType": "NoneOrEqual"
                    }
                  ]
                }
              ]
            }
          ]
        },
        "UNIQUE_Activity_Potion_AtkSpeedUp_MoveSpeedUp_OnKillEnemies_Action_AtkMoveSpeedUp": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%AtkMoveSpeedUpDuration",
          "state": "SpeedUp",
          "properties": {
            "Animator_AttackSpeedRatio": "%AtkSpeedUpRate",
            "Animator_MoveSpeedRatio": "%MoveSpeedUpRate"
          }
        },
        "UNIQUE_Activity_Potion_AtkSpeedUp_MoveSpeedUp_OnKillEnemies_Action_CD": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%AtkMoveSpeedUpCD",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "CanAddAtkMoveSpeedUp",
              "value": -1
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "CanAddAtkMoveSpeedUp",
              "value": 0
            }
          ]
        }
      },
      "abilitySpecials": {
        "AtkMoveSpeedUpDuration": 0,
        "AtkMoveSpeedUpCD": 0,
        "AtkSpeedUpRate": 0,
        "MoveSpeedUpRate": 0
      }
    }
  },
  {
    //使用元素战技后，当前角色普通攻击造成的元素伤害提升{0}%，持续{1}秒？//修改：所有角色普通元素攻击造成伤害提升{0}%
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_ElementalDamageUp_AfterSkill",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_ElementalDamageUp_AfterSkill_DamageUp"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_ElementalDamageUp_AfterSkill_DamageUp": {
          "isUnique": true,
          "stacking": "Unique",
          "isLimitedProperties": true,
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": [
                "NormalAttack_01",
                "NormalAttack_02",
                "NormalAttack_03",
                "NormalAttack_04",
                "NormalAttack_05",
                "NormalAttack_06"
              ],
              "damagePercentageRatio": "%ElementalDamageUpRate",
              "predicates": [
                {
                  "$type": "ByAny",
                  "predicates": [
                    {
                      "$type": "ByHitElement",
                      "element": "Fire"
                    },
                    {
                      "$type": "ByHitElement",
                      "element": "Water"
                    },
                    {
                      "$type": "ByHitElement",
                      "element": "Ice"
                    },
                    {
                      "$type": "ByHitElement",
                      "element": "Electric"
                    },
                    {
                      "$type": "ByHitElement",
                      "element": "Wind"
                    },
                    {
                      "$type": "ByHitElement",
                      "element": "Rock"
                    },
                    {
                      "$type": "ByHitElement",
                      "element": "Grass"
                    }
                  ]
                }
              ]
            }
          ]
        },
        "Activity_Potion_ElementalDamageUp_AfterSkill_Decision_AttackLanded": {
          "duration": "%ElementalDamageUpDuration",
          "stacking": "Unique",
          "onAdded": []
        }
      },
      "abilitySpecials": {
        "ElementalDamageUpDuration": 0,
        "ElementalDamageUpRate": 0
      }
    }
  },
  {
    //角色普通攻击造成伤害时，为队伍中的其他角色恢复{0}点能量，{1}秒内只能触发一次，该效果队内所有角色共同计算内置冷却
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_RecoverEnergy_HitDamage",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_RecoverEnergy_HitDamage"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_RecoverEnergy_HitDamage": {
          "isUnique": true,
          "stacking": "Unique",
          "onAttackLanded": [
            {
              "$type": "Predicated",
              "target": "Other",
              "targetPredicates": [
                {
                  "$type": "ByAttackTags",
                  "target": "Self",
                  "attackTags": [
                    "NormalAttack_01",
                    "NormalAttack_02",
                    "NormalAttack_03",
                    "NormalAttack_04",
                    "NormalAttack_05",
                    "NormalAttack_06"
                  ]
                }, //判断攻击类型
                {
                  "$type": "ByHitDamage",
                  "target": "Target",
                  "damage": 0,
                  "logic": "Greater"
                }, //判断伤害是否大于0
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Team",
                  "key": "ReviveEnergyAmountCDState",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                } //判断CD是否结束
              ],
              "successActions": [
                {
                  "$type": "ReviveElemEnergy",
                  "target": "AllPlayerAvatars",
                  "value": "%ReviveEnergyAmount",
                  "predicatesForeach": [
                    {
                      "$type": "ByTargetType",
                      "targetType": "Caster",
                      "isTarget": false
                    }
                  ]
                },
                {
                  "$type": "ApplyModifier",
                  "target": "Team",
                  "modifierName": "UNIQUE_Activity_Potion_RecoverEnergy_HitDamage_Action_CD"
                }
              ]
            }
          ]
        },
        "UNIQUE_Activity_Potion_RecoverEnergy_HitDamage_Action_CD": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%ReviveEnergyAmountCD",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "ReviveEnergyAmountCDState",
              "value": -1
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "ReviveEnergyAmountCDState",
              "value": 0
            }
          ]
        }
      },
      "abilitySpecials": {
        "ReviveEnergyAmount": 0,
        "ReviveEnergyAmountCD": 0
      }
    }
  },
  {
    //角色位于后台时，普通攻击造成的伤害每x秒提升x%，最多叠加x层。在场上时，这个效果每x秒降低1层。
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_AddAtkUpLevelOnStage_SubAtkLevelOffStage",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_AddAtkUpLevelOnStage_SubAtkLevelOffStage_OnStage"
        },
        {
          "$type": "AttachModifier",
          "target": "Self",
          "doOffStage": true,
          "modifierName": "UNIQUE_Activity_Potion_AddAtkUpLevelOnStage_SubAtkLevelOffStage_OffStage"
        },
        {
          "$type": "SetGlobalValue",
          "target": "CurTeamAvatars",
          "key": "AtkUpCurLevel",
          "value": 0
        }
      ],
      "abilityMixins": [
        {
          "$type": "CurLocalAvatarMixinV2",
          "modifierName": "UNIQUE_Activity_Potion_AddAtkUpLevelOnStage_SubAtkLevelOffStage_Eff_Handle"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_AddAtkUpLevelOnStage_SubAtkLevelOffStage_OnStage": {
          "isUnique": true,
          "stacking": "Unique",
          "thinkInterval": "%OnStageInterval",
          "onThinkInterval": [
            {
              "$type": "Predicated",
              "target": "Self",
              "targetPredicates": [
                {
                  "$type": "ByIsLocalAvatar",
                  "target": "Self"
                }
              ],
              "successActions": [
                {
                  "$type": "AddGlobalValue",
                  "target": "Self",
                  "key": "AtkUpCurLevel",
                  "value": -1,
                  "useLimitRange": true,
                  "maxValue": "%AtkUpMaxLevel",
                  "minValue": 0
                },
                {
                  "$type": "SetGlobalValueToOverrideMap",
                  "doOffStage": true,
                  "target": "Self",
                  "globalValueKey": "AtkUpCurLevel",
                  "overrideMapKey": "AtkUpCurLevel"
                }
              ] //前台角色
            }
          ],
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": [
                "NormalAttack_01",
                "NormalAttack_02",
                "NormalAttack_03",
                "NormalAttack_04",
                "NormalAttack_05",
                "NormalAttack_06"
              ],
              "damagePercentageRatio": "%OneLevelAtkUpRate*%AtkUpCurLevel"
            }
          ]
        },
        "UNIQUE_Activity_Potion_AddAtkUpLevelOnStage_SubAtkLevelOffStage_OffStage": {
          "isUnique": true,
          "stacking": "Unique",
          "thinkInterval": "%OffStageInterval",
          "onThinkInterval": [
            {
              "$type": "Predicated",
              "target": "Self",
              "doOffStage": true,
              "targetPredicates": [
                {
                  "$type": "ByIsLocalAvatar",
                  "target": "Self"
                }
              ],
              "failActions": [
                {
                  "$type": "AddGlobalValue",
                  "doOffStage": true,
                  "target": "Self",
                  "key": "AtkUpCurLevel",
                  "value": 1,
                  "useLimitRange": true,
                  "maxValue": "%AtkUpMaxLevel",
                  "minValue": 0
                },
                {
                  "$type": "SetGlobalValueToOverrideMap",
                  "doOffStage": true,
                  "target": "Self",
                  "globalValueKey": "AtkUpCurLevel",
                  "overrideMapKey": "AtkUpCurLevel"
                }
              ]
            }
          ]
        }, //后台角色
        "UNIQUE_Activity_Potion_AddAtkUpLevelOnStage_SubAtkLevelOffStage_Eff_Handle": {
          "isUnique": true,
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "Predicated",
              "target": "Self",
              "doOffStage": true,
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "AtkUpCurLevel",
                  "value": 0,
                  "compareType": "MoreThan"
                }
              ],
              "successActions": [
                {
                  "$type": "AttachModifier",
                  "target": "Self",
                  "modifierName": "UNIQUE_Activity_Potion_AddAtkUpLevelOnStage_SubAtkLevelOffStage_Eff"
                }
              ]
            }
          ],
          "thinkInterval": "%OnStageInterval",
          "onThinkInterval": [
            {
              "$type": "Predicated",
              "target": "Self",
              "doOffStage": true,
              "targetPredicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Self",
                  "key": "AtkUpCurLevel",
                  "value": 0,
                  "compareType": "MoreThan"
                }
              ],
              "successActions": [
                {
                  "$type": "AttachModifier",
                  "target": "Self",
                  "modifierName": "UNIQUE_Activity_Potion_AddAtkUpLevelOnStage_SubAtkLevelOffStage_Eff"
                }
              ],
              "failActions": [
                {
                  "$type": "RemoveModifier",
                  "target": "Self",
                  "modifierName": "UNIQUE_Activity_Potion_AddAtkUpLevelOnStage_SubAtkLevelOffStage_Eff"
                }
              ]
            } //表现，每几秒tick一次，依据当前层数是否大于0来动态上下特效
          ]
        },
        "UNIQUE_Activity_Potion_AddAtkUpLevelOnStage_SubAtkLevelOffStage_Eff": {
          "isUnique": true,
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "AttackUp"
            }
          ]
        }
      },
      "abilitySpecials": {
        "AtkUpMaxLevel": 0,
        "AtkUpCurLevel": 0,
        "OnStageInterval": 0,
        "OffStageInterval": 0,
        "OneLevelAtkUpRate": 0
      }
    }
  },
  //----------------------速攻主题----------------------
  //----------------------地脉异常----------------------
  {
    //施放元素爆发时，会使队伍中所有角色的攻击力与防御力提升①%。该效果至多可以叠加②层。拥有③层或以上的效果时，额外提升角色的充能效率④
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_LevelBuff_Level1",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level1_Decision_TriggerUltimateSkill"
        },
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_DefUp_AtkUp"
        },
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_OnAvatarKill"
        },
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_OnAvatarIn"
        }
      ],
      "onAbilityStart": [
        {
          "$type": "SetGlobalValueToOverrideMap",
          "doOffStage": true,
          "doAfterDie": true,
          "target": "Team",
          "globalValueKey": "CurLevel",
          "overrideMapKey": "CurLevel"
        },
        {
          "$type": "ApplyModifier",
          "target": "CurTeamAvatars",
          "doOffStage": true,
          "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_DefUp_AtkUp"
        }
      ],
      "abilityMixins": [
        {
          "$type": "DoReviveMixin",
          "type": "Both",
          "onReviveActions": [
            {
              "$type": "AttachModifier",
              "doOffStage": true,
              "target": "Self",
              "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level1_Decision_TriggerUltimateSkill"
            },
            {
              "$type": "AttachModifier",
              "doOffStage": true,
              "target": "Self",
              "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_OnAvatarIn"
            },
            {
              "$type": "AttachModifier",
              "doOffStage": true,
              "target": "Self",
              "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_OnAvatarKill"
            }
          ]
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_LevelBuff_Level1_Decision_TriggerUltimateSkill": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "OnAvatarUseSkillMixin",
              "clearSkillIdDelay": 0.2,
              "onTriggerUltimateSkill": [
                {
                  "$type": "AddGlobalValue",
                  "target": "Team",
                  "doOffStage": true,
                  "doAfterDie": true,
                  "key": "CurLevel",
                  "value": 1,
                  "useLimitRange": true,
                  "maxValue": "%MaxLevel",
                  "minValue": 0
                },
                {
                  "$type": "TriggerAbility",
                  "target": "CurTeamAvatars",
                  "doOffStage": true,
                  "doAfterDie": true,
                  "abilityName": "ActivityAbility_Potion_LevelBuff_Level1"
                },
                {
                  "$type": "AttachModifier",
                  "target": "CurTeamAvatars",
                  "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_ChargeEfficiencyUp",
                  "predicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Team",
                      "key": "CurLevel",
                      "value": "%ExtraEffLevel",
                      "compareType": "MoreThanAndEqual"
                    }
                  ]
                }
              ]
            }
          ]
        },
        "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_DefUp_AtkUp": {
          "isUnique": true,
          "stacking": "MultipleRefresh",
          "stackingOption": {
            "maxModifierNumForMultipleType": 1
          },
          "isLimitedProperties": true,
          "onAdded": [
            {
              "$type": "AttachModifier",
              "target": "Self",
              "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_ChargeEfficiencyUp",
              "predicates": [
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Team",
                  "key": "CurLevel",
                  "value": "%ExtraEffLevel",
                  "compareType": "MoreThanAndEqual"
                }
              ]
            }
          ],
          "onRemoved": [
            {
              "$type": "DebugLog",
              "content": "test: removed!"
            }
          ],
          "properties": {
            "Actor_DefenceRatio": "%DefUpRate*%CurLevel",
            "Actor_AttackRatio": "%AtkUpRate*%CurLevel"
          }
        },
        "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_ChargeEfficiencyUp": {
          "isUnique": true,
          "stacking": "Unique",
          "isLimitedProperties": true,
          "properties": {
            "Actor_ChargeEfficiencyDelta": "%ChargeEffUpRate"
          }
        },
        //记录角色死亡
        "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_OnAvatarKill": {
          "isUnique": true,
          "stacking": "Unique",
          "onKill": [
            {
              "$type": "ApplyModifier",
              "target": "Team",
              "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_OnAvatarKill_Refesh"
            }
          ]
        },
        "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_OnAvatarKill_Refesh": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": 3.8,
          "onRemoved": [
            {
              "$type": "TriggerAbility",
              "target": "CurTeamAvatars",
              "doOffStage": true,
              "doAfterDie": true,
              "abilityName": "ActivityAbility_Potion_LevelBuff_Level1"
            }
          ]
        },
        //处理七七
        "UNIQUE_Activity_Potion_LevelBuff_Level1_Action_OnAvatarIn": {
          "isUnique": true,
          "stacking": "Unique",
          "onAvatarIn": [
            {
              "$type": "TriggerAbility",
              "target": "CurTeamAvatars",
              "doOffStage": true,
              "doAfterDie": true,
              "abilityName": "ActivityAbility_Potion_LevelBuff_Level1"
              // "predicates":
              // [
              //     {
              //         "$type": "ByTargetOverrideMapValue",
              //         "target": "Self",
              //         "targetKey": "CurLevel",
              //         "targetValue": 0,
              //         "logic": "LesserOrEqual"
              //     }
              // ]
            }
          ]
        }
      },
      "abilitySpecials": {
        "AtkUpRate": 0,
        "DefUpRate": 0,
        "MaxLevel": 0,
        "ExtraEffLevel": 0,
        "CurLevel": 0,
        "ChargeEffUpRate": 0
      }
    }
  },
  {
    //场上的角色每次获取结晶反应产生的晶片时，会获得一层全伤害提升①%的buff（buff叠层计数team共享，但buff效果只对前台角色生效），持续②秒（每层独立计时），最多可叠加③层，叠到第③层后，每次再获取结晶反应产生的晶片时都可触发一次冲击波（以自身坐标为中心点，范围5米），冲击波触发cd ④秒，伤害系数⑤。//废弃
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_LevelEntity_LevelBuff_Level2",
      "isDynamicAbility": true,
      "onAdded": [
        //添加监听
        {
          "$type": "AttachModifier",
          "target": "CurTeamAvatars",
          "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level2_Decision_GetRockSeed"
        },
        {
          "$type": "AttachModifier",
          "target": "CurTeamAvatars",
          "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level2_Decision_IsCurLocalAvatar"
        },
        //初始化数据
        {
          "$type": "SetSystemValueToOverrideMap",
          "doOffStage": true,
          "key": "DamageSystemValue",
          "type": "ElementLevelCo"
        },
        {
          "$type": "SetGlobalValue",
          "target": "Team",
          "key": "CurPickUpCrystalLevel",
          "value": 0
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_LevelBuff_Level2_Decision_GetRockSeed": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "DoActionByGainCrystalSeedMixin",
              "elementTypes": ["Fire", "Water", "Electric", "Ice"],
              "actions": [
                {
                  "$type": "ApplyModifier",
                  "target": "Team",
                  "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level2_Action_PickUpCrystalLevelCounter"
                }, //计数
                {
                  "$type": "Predicated",
                  "target": "Team",
                  "targetPredicates": [
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Team",
                      "key": "CurPickUpCrystalLevel",
                      "value": "%MaxPickUpCrystalLevel",
                      "compareType": "MoreThanAndEqual"
                    }, //检测是否获得到最大层数
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Team",
                      "key": "ImpactState",
                      "value": 0,
                      "compareType": "NoneOrEqual"
                    }
                  ],
                  "successActions": [
                    {
                      "$type": "FireEffect",
                      "effectPattern": "Eff_EnergyDisk_ElementalBurst_Wave_R40"
                    },
                    {
                      "$type": "ApplyModifier",
                      "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level2_Action_GenerateImpact"
                    },
                    {
                      "$type": "FireEffect",
                      "effectPattern": "Eff_EnergyDisk_ElementalBurst_Wave_R40",
                      "born": {
                        "$type": "ConfigBornBySelf"
                      }
                    } //特效
                  ]
                }
              ]
            }
          ]
        }, //检测是否获得结晶
        "UNIQUE_Activity_Potion_LevelBuff_Level2_Action_PickUpCrystalLevelCounter": {
          "isUnique": true,
          "duration": "%PickUpCrystalLevelDuration",
          "stacking": "Multiple",
          "stackingOption": {
            "maxModifierNumForMultipleType": "%MaxPickUpCrystalLevel"
          },
          "onAdded": [
            {
              "$type": "AddGlobalValue",
              "target": "Team",
              "key": "CurPickUpCrystalLevel",
              "value": 1,
              "useLimitRange": true,
              "maxValue": "%MaxPickUpCrystalLevel",
              "minValue": 0
            },
            {
              "$type": "SetGlobalValueToOverrideMap",
              "target": "Team",
              "globalValueKey": "CurPickUpCrystalLevel",
              "overrideMapKey": "CurPickUpCrystalLevel" //OverrideMap中的值
            } //获取到GV
          ],
          "onRemoved": [
            {
              "$type": "AddGlobalValue",
              "target": "Team",
              "key": "CurPickUpCrystalLevel",
              "value": -1,
              "useLimitRange": true,
              "maxValue": "%MaxPickUpCrystalLevel",
              "minValue": 0
            },
            {
              "$type": "SetGlobalValueToOverrideMap",
              "target": "Team",
              "globalValueKey": "CurPickUpCrystalLevel",
              "overrideMapKey": "CurPickUpCrystalLevel" //OverrideMap中的值
            } //获取到GV
          ]
        },
        "UNIQUE_Activity_Potion_LevelBuff_Level2_Decision_IsCurLocalAvatar": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "CurLocalAvatarMixinV2",
              "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level2_Action_AllAtkUp"
            }
          ] //为前场角色动态添加增伤BUFF
        },
        "UNIQUE_Activity_Potion_LevelBuff_Level2_Action_AllAtkUp": {
          "isUnique": true,
          "stacking": "Unique",
          "isLimitedProperties": true,
          "properties": {
            "Actor_AddHurtDelta": "%DamageUpRate*%CurPickUpCrystalLevel"
          } //总增伤=单层增伤*buff层数
        },
        "UNIQUE_Activity_Potion_LevelBuff_Level2_Action_GenerateImpact": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": 0.05, //延迟产生伤害框
          "onRemoved": [
            {
              "$type": "TriggerAttackEvent",
              "targetType": "Enemy",
              "attackEvent": {
                "attackPattern": {
                  "$type": "ConfigAttackSphere",
                  "triggerType": "TriggerNoRepeat",
                  "radius": 5,
                  "born": {
                    "$type": "ConfigBornBySelf"
                  }
                },
                "attackInfo": {
                  "canBeModifiedBy": "OriginOwner",
                  "attackProperty": {
                    "damageExtra": "%DamageCoefficient*%DamageSystemValue",
                    "ignoreAttackerProperty": true, //忽略角色属性加成
                    "attackType": "Melee",
                    "elementType": "None", //元素类型为无
                    "elementDurability": 0, //元素含量为0
                    "enBreak": 0
                  },
                  "hitPattern": {
                    "onHitEffectName": "default", //击中特效名称，
                    "hitImpulseType": "LV2", //击退？
                    "reboundRatio": 0, //需要解释
                    "canBeDefenceHalt": false, //持盾防御者无法产生额外卡肉
                    "hitHaltTime": 0,
                    "hitHaltTimeScale": 0.02,
                    "muteHitText": false //不跳字
                  } //打击效果
                }
              }
            }, //生成圆形攻击盒
            {
              "$type": "ApplyModifier",
              "target": "Team",
              "modifierName": "UNIQUE_Activity_Potion_LevelBuff_Level2_Action_ImpactCD"
            } //进入CD
          ]
        },
        "UNIQUE_Activity_Potion_LevelBuff_Level2_Action_ImpactCD": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%ImpactCD",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "ImpactState",
              "value": -1
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "ImpactState",
              "value": 0
            }
          ]
        }
      },
      "abilitySpecials": {
        "MaxPickUpCrystalLevel": 0, //最大层数
        "CurPickUpCrystalLevel": 0, //用于缓存当前层数
        "PickUpCrystalLevelDuration": 0, //一层效果的持续时间
        "DamageUpRate": 0, //增伤系数
        "DamageSystemValue": 0, //基础攻击
        "DamageCoefficient": 0, //环境系数
        "ImpactCD": 0 //冲击波冷却时间
      }
    }
  },
  {
    //角色普通攻击命中敌人时，队伍中所有角色获得一层A效果。A效果最多{1}秒触发一次，持续{2}秒，可叠加{3}层。每层A效果使得普通攻击的伤害提高{4}%。
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_LevelEntity_LevelBuff_QuicklyAttack",
      "isDynamicAbility": true,
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "Self",
          "modifierName": "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_Decision_OnAttackLanded"
        },
        {
          "$type": "ApplyModifier",
          "target": "Team",
          "modifierName": "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_ClearLevel_Handler"
        }
      ],
      "abilityMixins": [
        {
          "$type": "DoReviveMixin",
          "onReviveActions": [
            {
              "$type": "TriggerAbility",
              "target": "CurTeamAvatars",
              "doAfterDie": true,
              "doOffStage": true,
              "abilityName": "ActivityAbility_Potion_LevelEntity_LevelBuff_QuicklyAttack"
            }, //
            {
              "$type": "AttachModifier",
              "target": "Self",
              "modifierName": "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_Decision_OnAttackLanded"
            }
          ]
        }
      ],
      "onAbilityStart": [
        {
          "$type": "SetGlobalValueToOverrideMap",
          "doOffStage": true,
          "doAfterDie": true,
          "target": "Team",
          "globalValueKey": "NormalAtkLevel",
          "overrideMapKey": "CurLevel"
        }
      ],
      "modifiers": {
        "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_Decision_OnAttackLanded": {
          "isUnique": true,
          "stacking": "Unique",
          "onAttackLanded": [
            {
              "$type": "Predicated",
              "target": "Self",
              "targetPredicates": [
                {
                  "$type": "ByAttackTags",
                  "attackTags": [
                    "NormalAttack_01",
                    "NormalAttack_02",
                    "NormalAttack_03",
                    "NormalAttack_04",
                    "NormalAttack_05",
                    "NormalAttack_06"
                  ]
                },
                {
                  "$type": "ByTargetGlobalValue",
                  "target": "Team",
                  "key": "QuicklyAttackCDState",
                  "value": 0,
                  "compareType": "NoneOrEqual"
                }
              ],
              "successActions": [
                {
                  "$type": "AddGlobalValue",
                  "target": "Team",
                  "key": "NormalAtkLevel",
                  "value": 1,
                  "useLimitRange": true,
                  "maxValue": "%MaxLevel",
                  "minValue": 0
                },
                {
                  "$type": "ApplyModifier",
                  "target": "Team",
                  "modifierName": "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_Action_CD"
                }, //进入CD
                {
                  "$type": "TriggerAbility",
                  "target": "CurTeamAvatars",
                  "doAfterDie": true,
                  "doOffStage": true,
                  "abilityName": "ActivityAbility_Potion_LevelEntity_LevelBuff_QuicklyAttack"
                } //
              ]
            }
          ],
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": [
                "NormalAttack_01",
                "NormalAttack_02",
                "NormalAttack_03",
                "NormalAttack_04",
                "NormalAttack_05",
                "NormalAttack_06"
              ],
              "damagePercentageRatio": "%AtkUpRate*%CurLevel"
            }
          ]
        },
        "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_ClearLevel_Handler": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueNoInitMixin",
              "globalValueKey": "HitTarget",
              "valueSteps": [0.5, 1.5],
              "modifierNameSteps": [
                "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_Action_AddClearBuff"
              ]
            }
          ]
        },
        "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_Action_AddClearBuff": {
          "isUnique": true,
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "ApplyModifier",
              "target": "Team",
              "modifierName": "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_Action_ClearLevel"
            }
          ]
        },
        "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_Action_ClearLevel": {
          "isUnique": true,
          "duration": "%AtkUpDuration",
          "stacking": "Refresh",
          "onAdded": [
            {
              "$type": "AttachModifier",
              "target": "CurTeamAvatars",
              "modifierName": "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_AtkUpEff"
            }
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "NormalAtkLevel",
              "value": 0
            },
            {
              "$type": "TriggerAbility",
              "target": "CurTeamAvatars",
              "doAfterDie": true,
              "doOffStage": true,
              "abilityName": "ActivityAbility_Potion_LevelEntity_LevelBuff_QuicklyAttack"
            }
          ]
        },
        "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_Action_AtkUp": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "ModifyDamageMixin",
              "attackTags": [
                "NormalAttack_01",
                "NormalAttack_02",
                "NormalAttack_03",
                "NormalAttack_04",
                "NormalAttack_05",
                "NormalAttack_06"
              ],
              "damagePercentageRatio": "%AtkUpRate*%CurLevel"
            }
          ]
        },
        "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_Action_CD": {
          "isUnique": true,
          "stacking": "Unique",
          "duration": "%AddBuffCD",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "QuicklyAttackCDState",
              "value": -1
            },
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "HitTarget",
              "value": 1
            } //清楚层数计时器
          ],
          "onRemoved": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "QuicklyAttackCDState",
              "value": 0
            },
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "HitTarget",
              "value": 0
            } //清楚层数计时器
          ]
        },
        "UNIQUE_Activity_Potion_LevelEntity_LevelBuff_QuicklyAttack_AtkUpEff": {
          "isUnique": true,
          "stacking": "Unique",
          "state": "AttackUp",
          "onAdded": []
        }
      },
      "abilitySpecials": {
        "AddBuffCD": 0, //保险机制，最低必须大于0
        "AtkUpDuration": 0,
        "AtkUpRate": 0,
        "MaxLevel": 0,
        "CurLevel": 0
      }
    }
  },
  ///////////////////////////////////
  /////////侵蚀效果
  ///////////////////////////////////
  {
    //敌人死亡后，创建亡语物件执行扣血逻辑
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_LevelEntity_DeathRattle_Corruption_LoseHP",
      "isDynamicAbility": true,
      "abilityMixins": [
        {
          "$type": "ServerCreateGadgetOnKillMixin",
          "gadgetIDList": [44000426],
          "campID": 4001,
          "campTargetType": "Enemy",
          "randomCreate": false
        }
      ]
    }
  },
  {
    //检测关卡是否结束，添加特效
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_DeathRattle_Corruption_LoseHPEff_ChallangeFinishHandler",
      "onAdded": [
        {
          "$type": "AttachModifier",
          "target": "AllTeams",
          "modifierName": "UNIQUE_Activity_Potion_DeathRattle_Corruption_LogicGadget_Decision_ChallangeFinish"
        },
        {
          "$type": "AttachModifier",
          "target": "Team",
          "modifierName": "UNIQUE_Activity_Potion_DeathRattle_Corruption_AddEffect_Handler"
        }
      ],
      // "abilityMixins":
      // [
      //     {
      //         "$type": "DoActionByTeamStatusMixin",
      //         "actions":
      //         [

      //         ]
      //     }
      // ],
      "modifiers": {
        "UNIQUE_Activity_Potion_DeathRattle_Corruption_AddEffect_Handler": {
          "isUnique": true,
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "CurTeamAvatars",
              "key": "CorruptionLevel",
              "value": 0
            }
          ],
          "modifierMixins": [
            // {
            //     "$type": "CurLocalAvatarMixinV2",
            //     "modifierName": "UNIQUE_Activity_Potion_DeathRattle_Corruption_Effect",
            // },
            {
              "$type": "CurLocalAvatarMixinV2",
              "modifierName": "UNIQUE_Activity_Potion_DeathRattle_Corruption_Effect_Handler"
            }
          ]
        },
        "UNIQUE_Activity_Potion_DeathRattle_Corruption_Effect_Handler": {
          "isUnique": true,
          "stacking": "Unique",
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "CorruptionLevel",
              "globalValueTarget": "Self",
              "removeAppliedModifier": true,
              "valueSteps": [0.5, 999],
              "modifierNameSteps": [
                "UNIQUE_Activity_Potion_DeathRattle_Corruption_Effect"
              ]
            }
          ]
        }, //侵蚀表现效果
        "UNIQUE_Activity_Potion_DeathRattle_Corruption_Effect": {
          "isUnique": true,
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Monster_Common_Corruption_LoseHP"
            }
          ],
          "modifierMixins": [
            {
              "$type": "AttachModifierToSelfGlobalValueMixin",
              "globalValueKey": "CorruptionLevel",
              "globalValueTarget": "Self",
              "removeAppliedModifier": true,
              "valueSteps": [-0.5, 0.5, 3.5, 7.5, 999],
              "modifierNameSteps": [
                "Blank",
                "Eff_Stage1",
                "Eff_Stage2",
                "Eff_Stage3"
              ]
            }
          ]
        },
        "Blank": {},
        "Eff_Stage1": {
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "parameter": "Stage",
              "type": "Int",
              "value": 1,
              "effectPattern": "Eff_Monster_Common_Corruption_LoseHP"
            }
          ]
        },
        "Eff_Stage2": {
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "parameter": "Stage",
              "type": "Int",
              "value": 2,
              "effectPattern": "Eff_Monster_Common_Corruption_LoseHP"
            }
          ]
        },
        "Eff_Stage3": {
          "onAdded": [
            {
              "$type": "SendEffectTrigger",
              "parameter": "Stage",
              "type": "Int",
              "value": 3,
              "effectPattern": "Eff_Monster_Common_Corruption_LoseHP"
            }
          ]
        },
        //-------------扣血表现-----------------
        "UNIQUE_Activity_Potion_DeathRattle_Corruption_LogicGadget_Decision_ChallangeFinish": {
          "isUnique": true,
          "stacking": "Unique",
          "onAdded": [
            {
              "$type": "SetGlobalValue",
              "target": "Team",
              "key": "Team_ChallangeFinishState",
              "value": 0
            }
          ],
          "modifierMixins": [
            {
              "$type": "ServerUpdateGlobalValueMixin",
              "key": "Team_ChallangeFinishState",
              "useLimitRange": true,
              "maxValue": 1, //结束
              "minValue": 0 //开始
            } //从服务器接受关卡消息
          ]
        } //关卡结束接收器
      }
    }
  },
  {
    //具体侵蚀效果，由亡语物件挂上
    "Default": {
      "$type": "ConfigAbility",
      "abilityName": "ActivityAbility_Potion_DeathRattle_Corruption_LogicGadget",
      "onAdded": [
        {
          "$type": "FireEffect",
          "effectPattern": "Eff_Monster_Common_DeathRattle_Corruption_Explode"
        },
        {
          "$type": "ApplyModifier",
          "modifierName": "Activity_Potion_DeathRattle_Corruption_LogicGadget_Action_LoseHP",
          "doOffStage": true,
          "target": "AllPlayerAvatars"
        }
      ],
      "modifiers": {
        "Activity_Potion_DeathRattle_Corruption_LogicGadget_Action_LoseHP": {
          "stacking": "Multiple",
          "duration": "%LoseHPBuff_duration",
          "buffID": 90005,
          "timeScale": "Level",
          "onAdded": [
            {
              "$type": "Predicated",
              "target": "Self",
              "doOffStage": true,
              "targetPredicates": [
                {
                  "$type": "ByIsLocalAvatar",
                  "target": "Self"
                }
              ], //判断是否属于前台角色
              "successActions": [
                {
                  "$type": "LoseHP",
                  "target": "Self",
                  "amount": "%LoseHP_Amount",
                  "amountByTargetMaxHPRatio": "%LoseHP_AmountRatio",
                  "enableInvincible": true, //无敌可以抵挡这个扣血行为
                  "enableLockHP": true, //锁血可以抵挡这个扣血行为
                  "lethal": true, //流血会致死
                  "doOffStage": true,
                  "disableWhenLoading": true,
                  "predicates": [
                    {
                      "$type": "ByGameTimeIsLocked",
                      "isLocked": false
                    }, //判断是否暂停
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Team",
                      "key": "Team_ChallangeFinishState",
                      "value": 0,
                      "compareType": "NoneOrEqual"
                    } //判断关卡是否结束
                  ]
                }
              ], //前台角色执行
              "failActions": [
                {
                  "$type": "LoseHP",
                  "target": "Self",
                  "amount": "%LoseHP_Amount",
                  "amountByTargetMaxHPRatio": "%LoseHP_AmountRatio",
                  "enableInvincible": true, //允许使用无敌抵挡这个扣血行为
                  "enableLockHP": true, //允许锁血抵挡这个扣血行为
                  "lethal": false, //流血不会致死
                  "doOffStage": true,
                  "disableWhenLoading": true,
                  "predicates": [
                    {
                      "$type": "ByGameTimeIsLocked",
                      "isLocked": false
                    }, //判断是否暂停
                    {
                      "$type": "ByTargetHPRatio",
                      "target": "Self",
                      "HPRatio": "%Backstage_HPRatio",
                      "logic": "Greater"
                    }, //判断血量
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Team",
                      "key": "Team_ChallangeFinishState",
                      "value": 0,
                      "compareType": "NoneOrEqual"
                    } //判断关卡是否结束
                  ]
                }
              ] //后台角色执行
            },
            {
              "$type": "AddGlobalValue",
              "target": "Self",
              "key": "CorruptionLevel",
              "value": 1,
              "doOffStage": true,
              "doAfterDie": true,
              "useLimitRange": true,
              "maxValue": 999,
              "minValue": 0
            }
          ],
          "thinkInterval": 1,
          "onThinkInterval": [
            {
              "$type": "Predicated",
              "target": "Self",
              "doOffStage": true,
              "targetPredicates": [
                {
                  "$type": "ByIsLocalAvatar",
                  "target": "Self"
                }
              ], //判断是否属于前台角色
              "successActions": [
                {
                  "$type": "LoseHP",
                  "target": "Self",
                  "amount": "%LoseHP_Amount",
                  "amountByTargetMaxHPRatio": "%LoseHP_AmountRatio",
                  "enableInvincible": true, //无敌可以抵挡这个扣血行为
                  "enableLockHP": true, //锁血可以抵挡这个扣血行为
                  "lethal": true, //流血不会致死
                  "doOffStage": true,
                  "disableWhenLoading": true,
                  "predicates": [
                    {
                      "$type": "ByGameTimeIsLocked",
                      "isLocked": false
                    }, //判断是否暂停
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Team",
                      "key": "Team_ChallangeFinishState",
                      "value": 0,
                      "compareType": "NoneOrEqual"
                    } //判断关卡是否结束
                  ]
                }
              ], //前台角色执行
              "failActions": [
                {
                  "$type": "LoseHP",
                  "target": "Self",
                  "amount": "%LoseHP_Amount",
                  "amountByTargetMaxHPRatio": "%LoseHP_AmountRatio",
                  "enableInvincible": true, //无敌状态可以抵挡这个扣血行为
                  "enableLockHP": true, //锁血状态可以抵挡这个扣血行为
                  "lethal": false, //流血会致死
                  "doOffStage": true,
                  "disableWhenLoading": true,
                  "predicates": [
                    {
                      "$type": "ByGameTimeIsLocked",
                      "isLocked": false
                    }, //判断是否暂停
                    {
                      "$type": "ByTargetHPRatio",
                      "target": "Self",
                      "HPRatio": "%Backstage_HPRatio",
                      "logic": "Greater"
                    }, //判断血量
                    {
                      "$type": "ByTargetGlobalValue",
                      "target": "Team",
                      "key": "Team_ChallangeFinishState",
                      "value": 0,
                      "compareType": "NoneOrEqual"
                    } //判断关卡是否结束
                  ]
                }
              ] //后台角色执行
            }
          ],
          "onRemoved": [
            {
              "$type": "AddGlobalValue",
              "target": "Self",
              "doOffStage": true,
              "doAfterDie": true,
              "key": "CorruptionLevel",
              "value": -1,
              "useLimitRange": true,
              "maxValue": 999,
              "minValue": 0
            }
          ]
        }
      },
      "abilitySpecials": {
        "LoseHP_Amount": 0,
        "LoseHP_AmountRatio": 0,
        "LoseHPBuff_duration": 0,
        "Backstage_HPRatio": 0
      }
    }
  }
  ///////////////////////////////////
  /////////侵蚀效果
  ///////////////////////////////////
  //敌人被击败后，队伍中所有角色会承受「侵蚀」效果。处于侵蚀状态下的角色将会每秒损失部分生命值。当前场上角色可能会因为侵蚀效果损失的生命值而倒下。处于队伍后台的角色生命值低于①%时，不会因为侵蚀而损失生命值。侵蚀效果持续②秒，可以叠加，每层效果独立计时。
  //----------------------地脉异常----------------------
]
